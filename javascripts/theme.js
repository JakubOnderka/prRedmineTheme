var requirejs,require,define;!function(e){function t(e,t){return g.call(e,t)}function n(e,t){var n,i,a,r,s,o,l,u,c,d,h,f=t&&t.split("/"),m=p.map,_=m&&m["*"]||{};if(e&&"."===e.charAt(0))if(t){for(e=e.split("/"),s=e.length-1,p.nodeIdCompat&&y.test(e[s])&&(e[s]=e[s].replace(y,"")),e=f.slice(0,f.length-1).concat(e),c=0;c<e.length;c+=1)if(h=e[c],"."===h)e.splice(c,1),c-=1;else if(".."===h){if(1===c&&(".."===e[2]||".."===e[0]))break;c>0&&(e.splice(c-1,2),c-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((f||_)&&m){for(n=e.split("/"),c=n.length;c>0;c-=1){if(i=n.slice(0,c).join("/"),f)for(d=f.length;d>0;d-=1)if(a=m[f.slice(0,d).join("/")],a&&(a=a[i])){r=a,o=c;break}if(r)break;!l&&_&&_[i]&&(l=_[i],u=c)}!r&&l&&(r=l,o=u),r&&(n.splice(0,o,r),e=n.join("/"))}return e}function i(t,n){return function(){var i=v.call(arguments,0);return"string"!=typeof i[0]&&1===i.length&&i.push(null),c.apply(e,i.concat([t,n]))}}function a(e){return function(t){return n(t,e)}}function r(e){return function(t){f[e]=t}}function s(n){if(t(m,n)){var i=m[n];delete m[n],_[n]=!0,u.apply(e,i)}if(!t(f,n)&&!t(_,n))throw new Error("No "+n);return f[n]}function o(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function l(e){return function(){return p&&p.config&&p.config[e]||{}}}var u,c,d,h,f={},m={},p={},_={},g=Object.prototype.hasOwnProperty,v=[].slice,y=/\.js$/;d=function(e,t){var i,r=o(e),l=r[0];return e=r[1],l&&(l=n(l,t),i=s(l)),l?e=i&&i.normalize?i.normalize(e,a(t)):n(e,t):(e=n(e,t),r=o(e),l=r[0],e=r[1],l&&(i=s(l))),{f:l?l+"!"+e:e,n:e,pr:l,p:i}},h={require:function(e){return i(e)},exports:function(e){var t=f[e];return"undefined"!=typeof t?t:f[e]={}},module:function(e){return{id:e,uri:"",exports:f[e],config:l(e)}}},u=function(n,a,o,l){var u,c,p,g,v,y,b=[],w=typeof o;if(l=l||n,"undefined"===w||"function"===w){for(a=!a.length&&o.length?["require","exports","module"]:a,v=0;v<a.length;v+=1)if(g=d(a[v],l),c=g.f,"require"===c)b[v]=h.require(n);else if("exports"===c)b[v]=h.exports(n),y=!0;else if("module"===c)u=b[v]=h.module(n);else if(t(f,c)||t(m,c)||t(_,c))b[v]=s(c);else{if(!g.p)throw new Error(n+" missing "+c);g.p.load(g.n,i(l,!0),r(c),{}),b[v]=f[c]}p=o?o.apply(f[n],b):void 0,n&&(u&&u.exports!==e&&u.exports!==f[n]?f[n]=u.exports:p===e&&y||(f[n]=p))}else n&&(f[n]=o)},requirejs=require=c=function(t,n,i,a,r){if("string"==typeof t)return h[t]?h[t](n):s(d(t,n).f);if(!t.splice){if(p=t,p.deps&&c(p.deps,p.callback),!n)return;n.splice?(t=n,n=i,i=null):t=e}return n=n||function(){},"function"==typeof i&&(i=a,a=r),a?u(e,t,n,i):setTimeout(function(){u(e,t,n,i)},4),c},c.config=function(e){return c(e)},requirejs._defined=f,define=function(e,n,i){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");n.splice||(i=n,n=[]),t(f,e)||t(m,e)||(m[e]=[e,n,i])},define.amd={jQuery:!0}}(),define("vendor/almond.js",function(){}),function(e){function t(e,t,n){switch(arguments.length){case 2:return null!=e?e:t;case 3:return null!=e?e:null!=t?t:n;default:throw new Error("Implement me")}}function n(e,t){return St.call(e,t)}function i(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function a(e){wt.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function r(e,t){var n=!0;return m(function(){return n&&(a(e),n=!1),t.apply(this,arguments)},t)}function s(e,t){yn[e]||(a(t),yn[e]=!0)}function o(e,t){return function(n){return g(e.call(this,n),t)}}function l(e,t){return function(n){return this.localeData().ordinal(e.call(this,n),t)}}function u(e,t){var n,i,a=12*(t.year()-e.year())+(t.month()-e.month()),r=e.clone().add(a,"months");return 0>t-r?(n=e.clone().add(a-1,"months"),i=(t-r)/(r-n)):(n=e.clone().add(a+1,"months"),i=(t-r)/(n-r)),-(a+i)}function c(e,t,n){var i;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?(i=e.isPM(n),i&&12>t&&(t+=12),i||12!==t||(t=0),t):t}function d(){}function h(e,t){t!==!1&&E(e),p(this,e),this._d=new Date(+e._d),wn===!1&&(wn=!0,wt.updateOffset(this),wn=!1)}function f(e){var t=T(e),n=t.year||0,i=t.quarter||0,a=t.month||0,r=t.week||0,s=t.day||0,o=t.hour||0,l=t.minute||0,u=t.second||0,c=t.millisecond||0;this._milliseconds=+c+1e3*u+6e4*l+36e5*o,this._days=+s+7*r,this._months=+a+3*i+12*n,this._data={},this._locale=wt.localeData(),this._bubble()}function m(e,t){for(var i in t)n(t,i)&&(e[i]=t[i]);return n(t,"toString")&&(e.toString=t.toString),n(t,"valueOf")&&(e.valueOf=t.valueOf),e}function p(e,t){var n,i,a;if("undefined"!=typeof t._isAMomentObject&&(e._isAMomentObject=t._isAMomentObject),"undefined"!=typeof t._i&&(e._i=t._i),"undefined"!=typeof t._f&&(e._f=t._f),"undefined"!=typeof t._l&&(e._l=t._l),"undefined"!=typeof t._strict&&(e._strict=t._strict),"undefined"!=typeof t._tzm&&(e._tzm=t._tzm),"undefined"!=typeof t._isUTC&&(e._isUTC=t._isUTC),"undefined"!=typeof t._offset&&(e._offset=t._offset),"undefined"!=typeof t._pf&&(e._pf=t._pf),"undefined"!=typeof t._locale&&(e._locale=t._locale),Nt.length>0)for(n in Nt)i=Nt[n],a=t[i],"undefined"!=typeof a&&(e[i]=a);return e}function _(e){return 0>e?Math.ceil(e):Math.floor(e)}function g(e,t,n){for(var i=""+Math.abs(e),a=e>=0;i.length<t;)i="0"+i;return(a?n?"+":"":"-")+i}function v(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function y(e,t){var n;return t=A(t,e),e.isBefore(t)?n=v(e,t):(n=v(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n}function b(e,t){return function(n,i){var a,r;return null===i||isNaN(+i)||(s(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),r=n,n=i,i=r),n="string"==typeof n?+n:n,a=wt.duration(n,i),w(this,a,e),this}}function w(e,t,n,i){var a=t._milliseconds,r=t._days,s=t._months;i=null==i?!0:i,a&&e._d.setTime(+e._d+a*n),r&&pt(e,"Date",mt(e,"Date")+r*n),s&&ft(e,mt(e,"Month")+s*n),i&&wt.updateOffset(e,r||s)}function D(e){return"[object Array]"===Object.prototype.toString.call(e)}function M(e){return"[object Date]"===Object.prototype.toString.call(e)||e instanceof Date}function k(e,t,n){var i,a=Math.min(e.length,t.length),r=Math.abs(e.length-t.length),s=0;for(i=0;a>i;i++)(n&&e[i]!==t[i]||!n&&Y(e[i])!==Y(t[i]))&&s++;return s+r}function x(e){if(e){var t=e.toLowerCase().replace(/(.)s$/,"$1");e=hn[e]||fn[t]||t}return e}function T(e){var t,i,a={};for(i in e)n(e,i)&&(t=x(i),t&&(a[t]=e[i]));return a}function S(t){var n,i;if(0===t.indexOf("week"))n=7,i="day";else{if(0!==t.indexOf("month"))return;n=12,i="month"}wt[t]=function(a,r){var s,o,l=wt._locale[t],u=[];if("number"==typeof a&&(r=a,a=e),o=function(e){var t=wt().utc().set(i,e);return l.call(wt._locale,t,a||"")},null!=r)return o(r);for(s=0;n>s;s++)u.push(o(s));return u}}function Y(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=t>=0?Math.floor(t):Math.ceil(t)),n}function P(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function O(e,t,n){return ut(wt([e,11,31+t-n]),t,n).week}function C(e){return $(e)?366:365}function $(e){return e%4===0&&e%100!==0||e%400===0}function E(e){var t;e._a&&-2===e._pf.overflow&&(t=e._a[Pt]<0||e._a[Pt]>11?Pt:e._a[Ot]<1||e._a[Ot]>P(e._a[Yt],e._a[Pt])?Ot:e._a[Ct]<0||e._a[Ct]>24||24===e._a[Ct]&&(0!==e._a[$t]||0!==e._a[Et]||0!==e._a[jt])?Ct:e._a[$t]<0||e._a[$t]>59?$t:e._a[Et]<0||e._a[Et]>59?Et:e._a[jt]<0||e._a[jt]>999?jt:-1,e._pf._overflowDayOfYear&&(Yt>t||t>Ot)&&(t=Ot),e._pf.overflow=t)}function j(t){return null==t._isValid&&(t._isValid=!isNaN(t._d.getTime())&&t._pf.overflow<0&&!t._pf.empty&&!t._pf.invalidMonth&&!t._pf.nullInput&&!t._pf.invalidFormat&&!t._pf.userInvalidated,t._strict&&(t._isValid=t._isValid&&0===t._pf.charsLeftOver&&0===t._pf.unusedTokens.length&&t._pf.bigHour===e)),t._isValid}function I(e){return e?e.toLowerCase().replace("_","-"):e}function N(e){for(var t,n,i,a,r=0;r<e.length;){for(a=I(e[r]).split("-"),t=a.length,n=I(e[r+1]),n=n?n.split("-"):null;t>0;){if(i=F(a.slice(0,t).join("-")))return i;if(n&&n.length>=t&&k(a,n,!0)>=t-1)break;t--}r++}return null}function F(e){var t=null;if(!It[e]&&Ft)try{t=wt.locale(),require("./locale/"+e),wt.locale(t)}catch(n){}return It[e]}function A(e,t){var n,i;return t._isUTC?(n=t.clone(),i=(wt.isMoment(e)||M(e)?+e:+wt(e))-+n,n._d.setTime(+n._d+i),wt.updateOffset(n,!1),n):wt(e).local()}function L(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function U(e){var t,n,i=e.match(zt);for(t=0,n=i.length;n>t;t++)i[t]=vn[i[t]]?vn[i[t]]:L(i[t]);return function(a){var r="";for(t=0;n>t;t++)r+=i[t]instanceof Function?i[t].call(a,e):i[t];return r}}function z(e,t){return e.isValid()?(t=W(t,e.localeData()),mn[t]||(mn[t]=U(t)),mn[t](e)):e.localeData().invalidDate()}function W(e,t){function n(e){return t.longDateFormat(e)||e}var i=5;for(Wt.lastIndex=0;i>=0&&Wt.test(e);)e=e.replace(Wt,n),Wt.lastIndex=0,i-=1;return e}function H(e,t){var n,i=t._strict;switch(e){case"Q":return Qt;case"DDDD":return tn;case"YYYY":case"GGGG":case"gggg":return i?nn:Gt;case"Y":case"G":case"g":return rn;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return i?an:qt;case"S":if(i)return Qt;case"SS":if(i)return en;case"SSS":if(i)return tn;case"DDD":return Rt;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Vt;case"a":case"A":return t._locale._meridiemParse;case"x":return Kt;case"X":return Xt;case"Z":case"ZZ":return Zt;case"T":return Jt;case"SSSS":return Bt;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return i?en:Ht;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return Ht;case"Do":return i?t._locale._ordinalParse:t._locale._ordinalParseLenient;default:return n=new RegExp(X(K(e.replace("\\","")),"i"))}}function R(e){e=e||"";var t=e.match(Zt)||[],n=t[t.length-1]||[],i=(n+"").match(cn)||["-",0,0],a=+(60*i[1])+Y(i[2]);return"+"===i[0]?a:-a}function G(e,t,n){var i,a=n._a;switch(e){case"Q":null!=t&&(a[Pt]=3*(Y(t)-1));break;case"M":case"MM":null!=t&&(a[Pt]=Y(t)-1);break;case"MMM":case"MMMM":i=n._locale.monthsParse(t,e,n._strict),null!=i?a[Pt]=i:n._pf.invalidMonth=t;break;case"D":case"DD":null!=t&&(a[Ot]=Y(t));break;case"Do":null!=t&&(a[Ot]=Y(parseInt(t.match(/\d{1,2}/)[0],10)));break;case"DDD":case"DDDD":null!=t&&(n._dayOfYear=Y(t));break;case"YY":a[Yt]=wt.parseTwoDigitYear(t);break;case"YYYY":case"YYYYY":case"YYYYYY":a[Yt]=Y(t);break;case"a":case"A":n._meridiem=t;break;case"h":case"hh":n._pf.bigHour=!0;case"H":case"HH":a[Ct]=Y(t);break;case"m":case"mm":a[$t]=Y(t);break;case"s":case"ss":a[Et]=Y(t);break;case"S":case"SS":case"SSS":case"SSSS":a[jt]=Y(1e3*("0."+t));break;case"x":n._d=new Date(Y(t));break;case"X":n._d=new Date(1e3*parseFloat(t));break;case"Z":case"ZZ":n._useUTC=!0,n._tzm=R(t);break;case"dd":case"ddd":case"dddd":i=n._locale.weekdaysParse(t),null!=i?(n._w=n._w||{},n._w.d=i):n._pf.invalidWeekday=t;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":e=e.substr(0,1);case"gggg":case"GGGG":case"GGGGG":e=e.substr(0,2),t&&(n._w=n._w||{},n._w[e]=Y(t));break;case"gg":case"GG":n._w=n._w||{},n._w[e]=wt.parseTwoDigitYear(t)}}function q(e){var n,i,a,r,s,o,l;n=e._w,null!=n.GG||null!=n.W||null!=n.E?(s=1,o=4,i=t(n.GG,e._a[Yt],ut(wt(),1,4).year),a=t(n.W,1),r=t(n.E,1)):(s=e._locale._week.dow,o=e._locale._week.doy,i=t(n.gg,e._a[Yt],ut(wt(),s,o).year),a=t(n.w,1),null!=n.d?(r=n.d,s>r&&++a):r=null!=n.e?n.e+s:s),l=ct(i,a,r,o,s),e._a[Yt]=l.year,e._dayOfYear=l.dayOfYear}function B(e){var n,i,a,r,s=[];if(!e._d){for(a=Z(e),e._w&&null==e._a[Ot]&&null==e._a[Pt]&&q(e),e._dayOfYear&&(r=t(e._a[Yt],a[Yt]),e._dayOfYear>C(r)&&(e._pf._overflowDayOfYear=!0),i=rt(r,0,e._dayOfYear),e._a[Pt]=i.getUTCMonth(),e._a[Ot]=i.getUTCDate()),n=0;3>n&&null==e._a[n];++n)e._a[n]=s[n]=a[n];for(;7>n;n++)e._a[n]=s[n]=null==e._a[n]?2===n?1:0:e._a[n];24===e._a[Ct]&&0===e._a[$t]&&0===e._a[Et]&&0===e._a[jt]&&(e._nextDay=!0,e._a[Ct]=0),e._d=(e._useUTC?rt:at).apply(null,s),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Ct]=24)}}function V(e){var t;e._d||(t=T(e._i),e._a=[t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],B(e))}function Z(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function J(t){if(t._f===wt.ISO_8601)return void et(t);t._a=[],t._pf.empty=!0;var n,i,a,r,s,o=""+t._i,l=o.length,u=0;for(a=W(t._f,t._locale).match(zt)||[],n=0;n<a.length;n++)r=a[n],i=(o.match(H(r,t))||[])[0],i&&(s=o.substr(0,o.indexOf(i)),s.length>0&&t._pf.unusedInput.push(s),o=o.slice(o.indexOf(i)+i.length),u+=i.length),vn[r]?(i?t._pf.empty=!1:t._pf.unusedTokens.push(r),G(r,i,t)):t._strict&&!i&&t._pf.unusedTokens.push(r);t._pf.charsLeftOver=l-u,o.length>0&&t._pf.unusedInput.push(o),t._pf.bigHour===!0&&t._a[Ct]<=12&&(t._pf.bigHour=e),t._a[Ct]=c(t._locale,t._a[Ct],t._meridiem),B(t),E(t)}function K(e){return e.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,i,a){return t||n||i||a})}function X(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Q(e){var t,n,a,r,s;if(0===e._f.length)return e._pf.invalidFormat=!0,void(e._d=new Date(0/0));for(r=0;r<e._f.length;r++)s=0,t=p({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._pf=i(),t._f=e._f[r],J(t),j(t)&&(s+=t._pf.charsLeftOver,s+=10*t._pf.unusedTokens.length,t._pf.score=s,(null==a||a>s)&&(a=s,n=t));m(e,n||t)}function et(e){var t,n,i=e._i,a=sn.exec(i);if(a){for(e._pf.iso=!0,t=0,n=ln.length;n>t;t++)if(ln[t][1].exec(i)){e._f=ln[t][0]+(a[6]||" ");break}for(t=0,n=un.length;n>t;t++)if(un[t][1].exec(i)){e._f+=un[t][0];break}i.match(Zt)&&(e._f+="Z"),J(e)}else e._isValid=!1}function tt(e){et(e),e._isValid===!1&&(delete e._isValid,wt.createFromInputFallback(e))}function nt(e,t){var n,i=[];for(n=0;n<e.length;++n)i.push(t(e[n],n));return i}function it(t){var n,i=t._i;i===e?t._d=new Date:M(i)?t._d=new Date(+i):null!==(n=At.exec(i))?t._d=new Date(+n[1]):"string"==typeof i?tt(t):D(i)?(t._a=nt(i.slice(0),function(e){return parseInt(e,10)}),B(t)):"object"==typeof i?V(t):"number"==typeof i?t._d=new Date(i):wt.createFromInputFallback(t)}function at(e,t,n,i,a,r,s){var o=new Date(e,t,n,i,a,r,s);return 1970>e&&o.setFullYear(e),o}function rt(e){var t=new Date(Date.UTC.apply(null,arguments));return 1970>e&&t.setUTCFullYear(e),t}function st(e,t){if("string"==typeof e)if(isNaN(e)){if(e=t.weekdaysParse(e),"number"!=typeof e)return null}else e=parseInt(e,10);return e}function ot(e,t,n,i,a){return a.relativeTime(t||1,!!n,e,i)}function lt(e,t,n){var i=wt.duration(e).abs(),a=Tt(i.as("s")),r=Tt(i.as("m")),s=Tt(i.as("h")),o=Tt(i.as("d")),l=Tt(i.as("M")),u=Tt(i.as("y")),c=a<pn.s&&["s",a]||1===r&&["m"]||r<pn.m&&["mm",r]||1===s&&["h"]||s<pn.h&&["hh",s]||1===o&&["d"]||o<pn.d&&["dd",o]||1===l&&["M"]||l<pn.M&&["MM",l]||1===u&&["y"]||["yy",u];return c[2]=t,c[3]=+e>0,c[4]=n,ot.apply({},c)}function ut(e,t,n){var i,a=n-t,r=n-e.day();return r>a&&(r-=7),a-7>r&&(r+=7),i=wt(e).add(r,"d"),{week:Math.ceil(i.dayOfYear()/7),year:i.year()}}function ct(e,t,n,i,a){var r,s,o=rt(e,0,1).getUTCDay();return o=0===o?7:o,n=null!=n?n:a,r=a-o+(o>i?7:0)-(a>o?7:0),s=7*(t-1)+(n-a)+r+1,{year:s>0?e:e-1,dayOfYear:s>0?s:C(e-1)+s}}function dt(t){var n,i=t._i,a=t._f;return t._locale=t._locale||wt.localeData(t._l),null===i||a===e&&""===i?wt.invalid({nullInput:!0}):("string"==typeof i&&(t._i=i=t._locale.preparse(i)),wt.isMoment(i)?new h(i,!0):(a?D(a)?Q(t):J(t):it(t),n=new h(t),n._nextDay&&(n.add(1,"d"),n._nextDay=e),n))}function ht(e,t){var n,i;if(1===t.length&&D(t[0])&&(t=t[0]),!t.length)return wt();for(n=t[0],i=1;i<t.length;++i)t[i][e](n)&&(n=t[i]);return n}function ft(e,t){var n;return"string"==typeof t&&(t=e.localeData().monthsParse(t),"number"!=typeof t)?e:(n=Math.min(e.date(),P(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e)}function mt(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function pt(e,t,n){return"Month"===t?ft(e,n):e._d["set"+(e._isUTC?"UTC":"")+t](n)}function _t(e,t){return function(n){return null!=n?(pt(this,e,n),wt.updateOffset(this,t),this):mt(this,e)}}function gt(e){return 400*e/146097}function vt(e){return 146097*e/400}function yt(e){wt.duration.fn[e]=function(){return this._data[e]}}function bt(e){"undefined"==typeof ender&&(Dt=xt.moment,xt.moment=e?r("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",wt):wt)}for(var wt,Dt,Mt,kt="2.9.0",xt="undefined"==typeof global||"undefined"!=typeof window&&window!==global.window?this:global,Tt=Math.round,St=Object.prototype.hasOwnProperty,Yt=0,Pt=1,Ot=2,Ct=3,$t=4,Et=5,jt=6,It={},Nt=[],Ft="undefined"!=typeof module&&module&&module.exports,At=/^\/?Date\((\-?\d+)/i,Lt=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Ut=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,zt=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,Wt=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Ht=/\d\d?/,Rt=/\d{1,3}/,Gt=/\d{1,4}/,qt=/[+\-]?\d{1,6}/,Bt=/\d+/,Vt=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Zt=/Z|[\+\-]\d\d:?\d\d/gi,Jt=/T/i,Kt=/[\+\-]?\d+/,Xt=/[\+\-]?\d+(\.\d{1,3})?/,Qt=/\d/,en=/\d\d/,tn=/\d{3}/,nn=/\d{4}/,an=/[+-]?\d{6}/,rn=/[+-]?\d+/,sn=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,on="YYYY-MM-DDTHH:mm:ssZ",ln=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],un=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],cn=/([\+\-]|\d\d)/gi,dn=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),hn={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},fn={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},mn={},pn={s:45,m:45,h:22,d:26,M:11},_n="DDD w W M D d".split(" "),gn="M D H h m s w W".split(" "),vn={M:function(){return this.month()+1},MMM:function(e){return this.localeData().monthsShort(this,e)},MMMM:function(e){return this.localeData().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.localeData().weekdaysMin(this,e)},ddd:function(e){return this.localeData().weekdaysShort(this,e)},dddd:function(e){return this.localeData().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return g(this.year()%100,2)},YYYY:function(){return g(this.year(),4)},YYYYY:function(){return g(this.year(),5)},YYYYYY:function(){var e=this.year(),t=e>=0?"+":"-";return t+g(Math.abs(e),6)},gg:function(){return g(this.weekYear()%100,2)},gggg:function(){return g(this.weekYear(),4)},ggggg:function(){return g(this.weekYear(),5)},GG:function(){return g(this.isoWeekYear()%100,2)},GGGG:function(){return g(this.isoWeekYear(),4)},GGGGG:function(){return g(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return Y(this.milliseconds()/100)},SS:function(){return g(Y(this.milliseconds()/10),2)},SSS:function(){return g(this.milliseconds(),3)},SSSS:function(){return g(this.milliseconds(),3)},Z:function(){var e=this.utcOffset(),t="+";return 0>e&&(e=-e,t="-"),t+g(Y(e/60),2)+":"+g(Y(e)%60,2)},ZZ:function(){var e=this.utcOffset(),t="+";return 0>e&&(e=-e,t="-"),t+g(Y(e/60),2)+g(Y(e)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},x:function(){return this.valueOf()},X:function(){return this.unix()},Q:function(){return this.quarter()}},yn={},bn=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"],wn=!1;_n.length;)Mt=_n.pop(),vn[Mt+"o"]=l(vn[Mt],Mt);for(;gn.length;)Mt=gn.pop(),vn[Mt+Mt]=o(vn[Mt],2);vn.DDDD=o(vn.DDD,3),m(d.prototype,{set:function(e){var t,n;for(n in e)t=e[n],"function"==typeof t?this[n]=t:this["_"+n]=t;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e,t,n){var i,a,r;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;12>i;i++){if(a=wt.utc([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(a,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(a,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(r="^"+this.months(a,"")+"|^"+this.monthsShort(a,""),this._monthsParse[i]=new RegExp(r.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[i].test(e))return i;if(n&&"MMM"===t&&this._shortMonthsParse[i].test(e))return i;if(!n&&this._monthsParse[i].test(e))return i}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var t,n,i;for(this._weekdaysParse||(this._weekdaysParse=[]),t=0;7>t;t++)if(this._weekdaysParse[t]||(n=wt([2e3,1]).day(t),i="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[t]=new RegExp(i.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t},_longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},isPM:function(e){return"p"===(e+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t,n){var i=this._calendar[e];return"function"==typeof i?i.apply(t,[n]):i},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,n,i){var a=this._relativeTime[n];return"function"==typeof a?a(e,t,n,i):a.replace(/%d/i,e)},pastFuture:function(e,t){var n=this._relativeTime[e>0?"future":"past"];return"function"==typeof n?n(t):n.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",_ordinalParse:/\d{1,2}/,preparse:function(e){return e},postformat:function(e){return e},week:function(e){return ut(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},firstDayOfWeek:function(){return this._week.dow},firstDayOfYear:function(){return this._week.doy},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),wt=function(t,n,a,r){var s;return"boolean"==typeof a&&(r=a,a=e),s={},s._isAMomentObject=!0,s._i=t,s._f=n,s._l=a,s._strict=r,s._isUTC=!1,s._pf=i(),dt(s)},wt.suppressDeprecationWarnings=!1,wt.createFromInputFallback=r("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),wt.min=function(){var e=[].slice.call(arguments,0);return ht("isBefore",e)},wt.max=function(){var e=[].slice.call(arguments,0);return ht("isAfter",e)},wt.utc=function(t,n,a,r){var s;return"boolean"==typeof a&&(r=a,a=e),s={},s._isAMomentObject=!0,s._useUTC=!0,s._isUTC=!0,s._l=a,s._i=t,s._f=n,s._strict=r,s._pf=i(),dt(s).utc()},wt.unix=function(e){return wt(1e3*e)},wt.duration=function(e,t){var i,a,r,s,o=e,l=null;return wt.isDuration(e)?o={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(o={},t?o[t]=e:o.milliseconds=e):(l=Lt.exec(e))?(i="-"===l[1]?-1:1,o={y:0,d:Y(l[Ot])*i,h:Y(l[Ct])*i,m:Y(l[$t])*i,s:Y(l[Et])*i,ms:Y(l[jt])*i}):(l=Ut.exec(e))?(i="-"===l[1]?-1:1,r=function(e){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*i},o={y:r(l[2]),M:r(l[3]),d:r(l[4]),h:r(l[5]),m:r(l[6]),s:r(l[7]),w:r(l[8])}):null==o?o={}:"object"==typeof o&&("from"in o||"to"in o)&&(s=y(wt(o.from),wt(o.to)),o={},o.ms=s.milliseconds,o.M=s.months),a=new f(o),wt.isDuration(e)&&n(e,"_locale")&&(a._locale=e._locale),a},wt.version=kt,wt.defaultFormat=on,wt.ISO_8601=function(){},wt.momentProperties=Nt,wt.updateOffset=function(){},wt.relativeTimeThreshold=function(t,n){return pn[t]===e?!1:n===e?pn[t]:(pn[t]=n,!0)},wt.lang=r("moment.lang is deprecated. Use moment.locale instead.",function(e,t){return wt.locale(e,t)}),wt.locale=function(e,t){var n;return e&&(n="undefined"!=typeof t?wt.defineLocale(e,t):wt.localeData(e),n&&(wt.duration._locale=wt._locale=n)),wt._locale._abbr},wt.defineLocale=function(e,t){return null!==t?(t.abbr=e,It[e]||(It[e]=new d),It[e].set(t),wt.locale(e),It[e]):(delete It[e],null)},wt.langData=r("moment.langData is deprecated. Use moment.localeData instead.",function(e){return wt.localeData(e)}),wt.localeData=function(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return wt._locale;if(!D(e)){if(t=F(e))return t;e=[e]}return N(e)},wt.isMoment=function(e){return e instanceof h||null!=e&&n(e,"_isAMomentObject")},wt.isDuration=function(e){return e instanceof f};for(Mt=bn.length-1;Mt>=0;--Mt)S(bn[Mt]);wt.normalizeUnits=function(e){return x(e)},wt.invalid=function(e){var t=wt.utc(0/0);return null!=e?m(t._pf,e):t._pf.userInvalidated=!0,t},wt.parseZone=function(){return wt.apply(null,arguments).parseZone()},wt.parseTwoDigitYear=function(e){return Y(e)+(Y(e)>68?1900:2e3)},wt.isDate=M,m(wt.fn=h.prototype,{clone:function(){return wt(this)},valueOf:function(){return+this._d-6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var e=wt(this).utc();return 0<e.year()&&e.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():z(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):z(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return j(this)},isDSTShifted:function(){return this._a?this.isValid()&&k(this._a,(this._isUTC?wt.utc(this._a):wt(this._a)).toArray())>0:!1},parsingFlags:function(){return m({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(e){return this.utcOffset(0,e)},local:function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(this._dateUtcOffset(),"m")),this},format:function(e){var t=z(this,e||wt.defaultFormat);return this.localeData().postformat(t)},add:b(1,"add"),subtract:b(-1,"subtract"),diff:function(e,t,n){var i,a,r=A(e,this),s=6e4*(r.utcOffset()-this.utcOffset());return t=x(t),"year"===t||"month"===t||"quarter"===t?(a=u(this,r),"quarter"===t?a/=3:"year"===t&&(a/=12)):(i=this-r,a="second"===t?i/1e3:"minute"===t?i/6e4:"hour"===t?i/36e5:"day"===t?(i-s)/864e5:"week"===t?(i-s)/6048e5:i),n?a:_(a)},from:function(e,t){return wt.duration({to:this,from:e}).locale(this.locale()).humanize(!t)},fromNow:function(e){return this.from(wt(),e)},calendar:function(e){var t=e||wt(),n=A(t,this).startOf("day"),i=this.diff(n,"days",!0),a=-6>i?"sameElse":-1>i?"lastWeek":0>i?"lastDay":1>i?"sameDay":2>i?"nextDay":7>i?"nextWeek":"sameElse";return this.format(this.localeData().calendar(a,this,wt(t)))},isLeapYear:function(){return $(this.year())},isDST:function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=st(e,this.localeData()),this.add(e-t,"d")):t},month:_t("Month",!0),startOf:function(e){switch(e=x(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e?this.weekday(0):"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(t){return t=x(t),t===e||"millisecond"===t?this:this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms")},isAfter:function(e,t){var n;return t=x("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=wt.isMoment(e)?e:wt(e),+this>+e):(n=wt.isMoment(e)?+e:+wt(e),n<+this.clone().startOf(t))},isBefore:function(e,t){var n;return t=x("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=wt.isMoment(e)?e:wt(e),+e>+this):(n=wt.isMoment(e)?+e:+wt(e),+this.clone().endOf(t)<n)},isBetween:function(e,t,n){return this.isAfter(e,n)&&this.isBefore(t,n)},isSame:function(e,t){var n;return t=x(t||"millisecond"),"millisecond"===t?(e=wt.isMoment(e)?e:wt(e),+this===+e):(n=+wt(e),+this.clone().startOf(t)<=n&&n<=+this.clone().endOf(t))},min:r("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(e){return e=wt.apply(null,arguments),this>e?this:e}),max:r("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(e){return e=wt.apply(null,arguments),e>this?this:e}),zone:r("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",function(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}),utcOffset:function(e,t){var n,i=this._offset||0;return null!=e?("string"==typeof e&&(e=R(e)),Math.abs(e)<16&&(e=60*e),!this._isUTC&&t&&(n=this._dateUtcOffset()),this._offset=e,this._isUTC=!0,null!=n&&this.add(n,"m"),i!==e&&(!t||this._changeInProgress?w(this,wt.duration(e-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,wt.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?i:this._dateUtcOffset()},isLocal:function(){return!this._isUTC},isUtcOffset:function(){return this._isUTC},isUtc:function(){return this._isUTC&&0===this._offset},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(R(this._i)),this},hasAlignedHourOffset:function(e){return e=e?wt(e).utcOffset():0,(this.utcOffset()-e)%60===0},daysInMonth:function(){return P(this.year(),this.month())},dayOfYear:function(e){var t=Tt((wt(this).startOf("day")-wt(this).startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},quarter:function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)
},weekYear:function(e){var t=ut(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==e?t:this.add(e-t,"y")},isoWeekYear:function(e){var t=ut(this,1,4).year;return null==e?t:this.add(e-t,"y")},week:function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},isoWeek:function(e){var t=ut(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},weekday:function(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},isoWeekday:function(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)},isoWeeksInYear:function(){return O(this.year(),1,4)},weeksInYear:function(){var e=this.localeData()._week;return O(this.year(),e.dow,e.doy)},get:function(e){return e=x(e),this[e]()},set:function(e,t){var n;if("object"==typeof e)for(n in e)this.set(n,e[n]);else e=x(e),"function"==typeof this[e]&&this[e](t);return this},locale:function(t){var n;return t===e?this._locale._abbr:(n=wt.localeData(t),null!=n&&(this._locale=n),this)},lang:r("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===e?this.localeData():this.locale(t)}),localeData:function(){return this._locale},_dateUtcOffset:function(){return 15*-Math.round(this._d.getTimezoneOffset()/15)}}),wt.fn.millisecond=wt.fn.milliseconds=_t("Milliseconds",!1),wt.fn.second=wt.fn.seconds=_t("Seconds",!1),wt.fn.minute=wt.fn.minutes=_t("Minutes",!1),wt.fn.hour=wt.fn.hours=_t("Hours",!0),wt.fn.date=_t("Date",!0),wt.fn.dates=r("dates accessor is deprecated. Use date instead.",_t("Date",!0)),wt.fn.year=_t("FullYear",!0),wt.fn.years=r("years accessor is deprecated. Use year instead.",_t("FullYear",!0)),wt.fn.days=wt.fn.day,wt.fn.months=wt.fn.month,wt.fn.weeks=wt.fn.week,wt.fn.isoWeeks=wt.fn.isoWeek,wt.fn.quarters=wt.fn.quarter,wt.fn.toJSON=wt.fn.toISOString,wt.fn.isUTC=wt.fn.isUtc,m(wt.duration.fn=f.prototype,{_bubble:function(){var e,t,n,i=this._milliseconds,a=this._days,r=this._months,s=this._data,o=0;s.milliseconds=i%1e3,e=_(i/1e3),s.seconds=e%60,t=_(e/60),s.minutes=t%60,n=_(t/60),s.hours=n%24,a+=_(n/24),o=_(gt(a)),a-=_(vt(o)),r+=_(a/30),a%=30,o+=_(r/12),r%=12,s.days=a,s.months=r,s.years=o},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return _(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*Y(this._months/12)},humanize:function(e){var t=lt(this,!e,this.localeData());return e&&(t=this.localeData().pastFuture(+this,t)),this.localeData().postformat(t)},add:function(e,t){var n=wt.duration(e,t);return this._milliseconds+=n._milliseconds,this._days+=n._days,this._months+=n._months,this._bubble(),this},subtract:function(e,t){var n=wt.duration(e,t);return this._milliseconds-=n._milliseconds,this._days-=n._days,this._months-=n._months,this._bubble(),this},get:function(e){return e=x(e),this[e.toLowerCase()+"s"]()},as:function(e){var t,n;if(e=x(e),"month"===e||"year"===e)return t=this._days+this._milliseconds/864e5,n=this._months+12*gt(t),"month"===e?n:n/12;switch(t=this._days+Math.round(vt(this._months/12)),e){case"week":return t/7+this._milliseconds/6048e5;case"day":return t+this._milliseconds/864e5;case"hour":return 24*t+this._milliseconds/36e5;case"minute":return 24*t*60+this._milliseconds/6e4;case"second":return 24*t*60*60+this._milliseconds/1e3;case"millisecond":return Math.floor(24*t*60*60*1e3)+this._milliseconds;default:throw new Error("Unknown unit "+e)}},lang:wt.fn.lang,locale:wt.fn.locale,toIsoString:r("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var e=Math.abs(this.years()),t=Math.abs(this.months()),n=Math.abs(this.days()),i=Math.abs(this.hours()),a=Math.abs(this.minutes()),r=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(n?n+"D":"")+(i||a||r?"T":"")+(i?i+"H":"")+(a?a+"M":"")+(r?r+"S":""):"P0D"},localeData:function(){return this._locale},toJSON:function(){return this.toISOString()}}),wt.duration.fn.toString=wt.duration.fn.toISOString;for(Mt in dn)n(dn,Mt)&&yt(Mt.toLowerCase());wt.duration.fn.asMilliseconds=function(){return this.as("ms")},wt.duration.fn.asSeconds=function(){return this.as("s")},wt.duration.fn.asMinutes=function(){return this.as("m")},wt.duration.fn.asHours=function(){return this.as("h")},wt.duration.fn.asDays=function(){return this.as("d")},wt.duration.fn.asWeeks=function(){return this.as("weeks")},wt.duration.fn.asMonths=function(){return this.as("M")},wt.duration.fn.asYears=function(){return this.as("y")},wt.locale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=1===Y(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+n}}),function(e){e(wt)}(function(e){function t(e){return e>1&&5>e&&1!==~~(e/10)}function n(e,n,i,a){var r=e+" ";switch(i){case"s":return n||a?"pár sekund":"pár sekundami";case"m":return n?"minuta":a?"minutu":"minutou";case"mm":return n||a?r+(t(e)?"minuty":"minut"):r+"minutami";case"h":return n?"hodina":a?"hodinu":"hodinou";case"hh":return n||a?r+(t(e)?"hodiny":"hodin"):r+"hodinami";case"d":return n||a?"den":"dnem";case"dd":return n||a?r+(t(e)?"dny":"dní"):r+"dny";case"M":return n||a?"měsíc":"měsícem";case"MM":return n||a?r+(t(e)?"měsíce":"měsíců"):r+"měsíci";case"y":return n||a?"rok":"rokem";case"yy":return n||a?r+(t(e)?"roky":"let"):r+"lety"}}var i="leden_únor_březen_duben_květen_červen_červenec_srpen_září_říjen_listopad_prosinec".split("_"),a="led_úno_bře_dub_kvě_čvn_čvc_srp_zář_říj_lis_pro".split("_");return e.defineLocale("cs",{months:i,monthsShort:a,monthsParse:function(e,t){var n,i=[];for(n=0;12>n;n++)i[n]=new RegExp("^"+e[n]+"$|^"+t[n]+"$","i");return i}(i,a),weekdays:"neděle_pondělí_úterý_středa_čtvrtek_pátek_sobota".split("_"),weekdaysShort:"ne_po_út_st_čt_pá_so".split("_"),weekdaysMin:"ne_po_út_st_čt_pá_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd D. MMMM YYYY LT"},calendar:{sameDay:"[dnes v] LT",nextDay:"[zítra v] LT",nextWeek:function(){switch(this.day()){case 0:return"[v neděli v] LT";case 1:case 2:return"[v] dddd [v] LT";case 3:return"[ve středu v] LT";case 4:return"[ve čtvrtek v] LT";case 5:return"[v pátek v] LT";case 6:return"[v sobotu v] LT"}},lastDay:"[včera v] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulou neděli v] LT";case 1:case 2:return"[minulé] dddd [v] LT";case 3:return"[minulou středu v] LT";case 4:case 5:return"[minulý] dddd [v] LT";case 6:return"[minulou sobotu v] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"před %s",s:n,m:n,mm:n,h:n,hh:n,d:n,dd:n,M:n,MM:n,y:n,yy:n},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}),wt.locale("en"),Ft?module.exports=wt:"function"==typeof define&&define.amd?(define("vendor/moment",["require","exports","module"],function(e,t,n){return n.config&&n.config()&&n.config().noGlobal===!0&&(xt.moment=Dt),wt}),bt(!0)):bt()}.call(this),function(e,t){"function"==typeof define&&define.amd?define("vendor/handlebars.runtime",[],t):"object"==typeof exports?module.exports=t():e.Handlebars=t()}(this,function(){var e=function(){function e(e){return l[e]}function t(e){for(var t=1;t<arguments.length;t++)for(var n in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],n)&&(e[n]=arguments[t][n]);return e}function n(e,t){for(var n=0,i=e.length;i>n;n++)if(e[n]===t)return n;return-1}function i(t){return t&&t.toHTML?t.toHTML():null==t?"":t?(t=""+t,c.test(t)?t.replace(u,e):t):t+""}function a(e){return e||0===e?f(e)&&0===e.length?!0:!1:!0}function r(e,t){return e.path=t,e}function s(e,t){return(e?e+".":"")+t}var o={},l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},u=/[&<>"'`]/g,c=/[&<>"'`]/;o.extend=t;var d=Object.prototype.toString;o.toString=d;var h=function(e){return"function"==typeof e};h(/x/)&&(h=function(e){return"function"==typeof e&&"[object Function]"===d.call(e)});var h;o.isFunction=h;var f=Array.isArray||function(e){return e&&"object"==typeof e?"[object Array]"===d.call(e):!1};return o.isArray=f,o.indexOf=n,o.escapeExpression=i,o.isEmpty=a,o.blockParams=r,o.appendContextPath=s,o}(),t=function(){function e(e,t){var i,a,r=t&&t.loc;r&&(i=r.start.line,a=r.start.column,e+=" - "+i+":"+a);for(var s=Error.prototype.constructor.call(this,e),o=0;o<n.length;o++)this[n[o]]=s[n[o]];r&&(this.lineNumber=i,this.column=a)}var t,n=["description","fileName","lineNumber","message","name","number","stack"];return e.prototype=new Error,t=e}(),n=function(e,t){function n(e,t){this.helpers=e||{},this.partials=t||{},i(this)}function i(e){e.registerHelper("helperMissing",function(){if(1===arguments.length)return void 0;throw new s("Missing helper: '"+arguments[arguments.length-1].name+"'")}),e.registerHelper("blockHelperMissing",function(t,n){var i=n.inverse,a=n.fn;if(t===!0)return a(this);if(t===!1||null==t)return i(this);if(c(t))return t.length>0?(n.ids&&(n.ids=[n.name]),e.helpers.each(t,n)):i(this);if(n.data&&n.ids){var s=_(n.data);s.contextPath=r.appendContextPath(n.data.contextPath,n.name),n={data:s}}return a(t,n)}),e.registerHelper("each",function(e,t){function n(t,n,s){i&&(i.key=t,i.index=n,i.first=0===n,i.last=!!s,a&&(i.contextPath=a+t)),h+=o(e[t],{data:i,blockParams:r.blockParams([e[t],t],[a+t,null])})}if(!t)throw new s("Must pass iterator to #each");var i,a,o=t.fn,l=t.inverse,u=0,h="";if(t.data&&t.ids&&(a=r.appendContextPath(t.data.contextPath,t.ids[0])+"."),d(e)&&(e=e.call(this)),t.data&&(i=_(t.data)),e&&"object"==typeof e)if(c(e))for(var f=e.length;f>u;u++)n(u,u,u===e.length-1);else{var m;for(var p in e)e.hasOwnProperty(p)&&(m&&n(m,u-1),m=p,u++);m&&n(m,u-1,!0)}return 0===u&&(h=l(this)),h}),e.registerHelper("if",function(e,t){return d(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||r.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,n){return e.helpers["if"].call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})}),e.registerHelper("with",function(e,t){d(e)&&(e=e.call(this));var n=t.fn;if(r.isEmpty(e))return t.inverse(this);if(t.data&&t.ids){var i=_(t.data);i.contextPath=r.appendContextPath(t.data.contextPath,t.ids[0]),t={data:i}}return n(e,t)}),e.registerHelper("log",function(t,n){var i=n.data&&null!=n.data.level?parseInt(n.data.level,10):1;e.log(i,t)}),e.registerHelper("lookup",function(e,t){return e&&e[t]})}var a={},r=e,s=t,o="3.0.0";a.VERSION=o;var l=6;a.COMPILER_REVISION=l;var u={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1"};a.REVISION_CHANGES=u;var c=r.isArray,d=r.isFunction,h=r.toString,f="[object Object]";a.HandlebarsEnvironment=n,n.prototype={constructor:n,logger:m,log:p,registerHelper:function(e,t){if(h.call(e)===f){if(t)throw new s("Arg not supported with multiple helpers");r.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){if(h.call(e)===f)r.extend(this.partials,e);else{if("undefined"==typeof t)throw new s("Attempting to register a partial as undefined");this.partials[e]=t}},unregisterPartial:function(e){delete this.partials[e]}};var m={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:1,log:function(e,t){if("undefined"!=typeof console&&m.level<=e){var n=m.methodMap[e];(console[n]||console.log).call(console,t)}}};a.logger=m;var p=m.log;a.log=p;var _=function(e){var t=r.extend({},e);return t._parent=e,t};return a.createFrame=_,a}(e,t),i=function(){function e(e){this.string=e}var t;return e.prototype.toString=e.prototype.toHTML=function(){return""+this.string},t=e}(),a=function(e,t,n){function i(e){var t=e&&e[0]||1,n=f;if(t!==n){if(n>t){var i=m[n],a=m[t];throw new h("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+i+") or downgrade your runtime to an older version ("+a+").")}throw new h("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}}function a(e,t){if(!t)throw new h("No environment passed to template");if(!e||!e.main)throw new h("Unknown template object: "+typeof e);t.VM.checkRevision(e.compiler);var n=function(n,i,a){a.hash&&(i=d.extend({},i,a.hash)),n=t.VM.resolvePartial.call(this,n,i,a);var r=t.VM.invokePartial.call(this,n,i,a);if(null==r&&t.compile&&(a.partials[a.name]=t.compile(n,e.compilerOptions,t),r=a.partials[a.name](i,a)),null!=r){if(a.indent){for(var s=r.split("\n"),o=0,l=s.length;l>o&&(s[o]||o+1!==l);o++)s[o]=a.indent+s[o];r=s.join("\n")}return r}throw new h("The partial "+a.name+" could not be compiled when running in runtime-only mode")},i={strict:function(e,t){if(!(t in e))throw new h('"'+t+'" not defined in '+e);return e[t]},lookup:function(e,t){for(var n=e.length,i=0;n>i;i++)if(e[i]&&null!=e[i][t])return e[i][t]},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:d.escapeExpression,invokePartial:n,fn:function(t){return e[t]},programs:[],program:function(e,t,n,i,a){var s=this.programs[e],o=this.fn(e);return t||a||i||n?s=r(this,e,o,t,n,i,a):s||(s=this.programs[e]=r(this,e,o)),s},data:function(e,t){for(;e&&t--;)e=e._parent;return e},merge:function(e,t){var n=e||t;return e&&t&&e!==t&&(n=d.extend({},t,e)),n},noop:t.VM.noop,compilerInfo:e.compiler},a=function(t,n){n=n||{};var r=n.data;a._setup(n),!n.partial&&e.useData&&(r=u(t,r));var s,o=e.useBlockParams?[]:void 0;return e.useDepths&&(s=n.depths?[t].concat(n.depths):[t]),e.main.call(i,t,i.helpers,i.partials,r,o,s)};return a.isTop=!0,a._setup=function(n){n.partial?(i.helpers=n.helpers,i.partials=n.partials):(i.helpers=i.merge(n.helpers,t.helpers),e.usePartial&&(i.partials=i.merge(n.partials,t.partials)))},a._child=function(t,n,a,s){if(e.useBlockParams&&!a)throw new h("must pass block params");if(e.useDepths&&!s)throw new h("must pass parent depths");return r(i,t,e[t],n,0,a,s)},a}function r(e,t,n,i,a,r,s){var o=function(t,a){return a=a||{},n.call(e,t,e.helpers,e.partials,a.data||i,r&&[a.blockParams].concat(r),s&&[t].concat(s))};return o.program=t,o.depth=s?s.length:0,o.blockParams=a||0,o}function s(e,t,n){return e?e.call||n.name||(n.name=e,e=n.partials[e]):e=n.partials[n.name],e}function o(e,t,n){if(n.partial=!0,void 0===e)throw new h("The partial "+n.name+" could not be found");return e instanceof Function?e(t,n):void 0}function l(){return""}function u(e,t){return t&&"root"in t||(t=t?p(t):{},t.root=e),t}var c={},d=e,h=t,f=n.COMPILER_REVISION,m=n.REVISION_CHANGES,p=n.createFrame;return c.checkRevision=i,c.template=a,c.program=r,c.resolvePartial=s,c.invokePartial=o,c.noop=l,c}(e,t,n),r=function(e,t,n,i,a){var r,s=e,o=t,l=n,u=i,c=a,d=function(){var e=new s.HandlebarsEnvironment;return u.extend(e,s),e.SafeString=o,e.Exception=l,e.Utils=u,e.escapeExpression=u.escapeExpression,e.VM=c,e.template=function(t){return c.template(t,e)},e},h=d();h.create=d;var f="undefined"!=typeof global?global:window,m=f.Handlebars;return h.noConflict=function(){f.Handlebars===h&&(f.Handlebars=m)},h["default"]=h,r=h}(n,i,t,e,a);return r}),define("translation/cs",{Project:"Projekt",Subject:"Předmět",Assignee:"Přiřazeno",Status:"Stav",Done:"Hotovo","Due date":"Uzavřít do","Updated on":"Aktualizováno","Assigned to":"Přiřazeno","Open Timey":"Otevřít Timey",maybe:"možná","Show details":"Zobrazit detaily","Planned absences":"Plánované nepřítomnosti",refresh:"obnovit","Not available from %0 to %1":"Nedostupný od %0 do %1","Not available %0":"Nedostupný %0",author:"autor","My issues":"Mé úkoly","No issues":"Žádné úkoly","Overdue issues":"Úkoly s vypršeným Uzavřít do","select random":"zobrazit náhodný","show all":"zobrazit všechny","Add to editor":"Přidat do editoru","Last viewed issue":"Poslední zobrazený úkol","I wanna work!":"Chci práci!","Due date is near.":"Blíží se termín dokončení.","Due date is over.":"Vypršený termín dokončení.","This issue has to be done":"Tento úkol má být uzavřen","This issue should be done":"Tento úkol měl být uzavřen"}),define("translation/en",{}),define("lib/translate",["translation/cs","translation/en"],function(e,t){var n=document.documentElement.lang;return function(i){return"cs"===n&&i in e?e[i]:"en"===n&&i in t?t[i]:i}}),define("template/helper/translate",["vendor/handlebars.runtime","lib/translate"],function(e,t){e.registerHelper("_",function(e){for(var n=t(e),i=1;i<arguments.length-1;i++)n=n.replace("%"+(i-1),arguments[i]);return n})}),define("template/helper/dayFromDate",["vendor/handlebars.runtime"],function(e){e.registerHelper("dayFromDate",function(e){return parseInt(e.split("-")[2])})}),define("template/helper/trim",["vendor/handlebars.runtime"],function(e){e.registerHelper("trim",function(e){return e.trim()})}),define("template/helper/is",["vendor/handlebars.runtime"],function(e){e.registerHelper("is",function(e,t,n){return e===t?n.fn(this):n.inverse(this)})}),define("template/helper/isEven",["vendor/handlebars.runtime"],function(e){e.registerHelper("isEven",function(e,t){return e%2===0?t.fn(this):t.inverse(this)})}),define("template/helper/isNotEmpty",["vendor/handlebars.runtime"],function(e){e.registerHelper("isNotEmpty",function(e,t){return e&&0!==e.length?t.fn(this):t.inverse(this)})}),define("template/helper/monthFromDate",["vendor/handlebars.runtime","vendor/moment"],function(e,t){e.registerHelper("monthFromDate",function(e){var n=e.split("-"),i=n[1],a=n[0],r=t().year(parseInt(a,10)).month(parseInt(i,10)-1).format("MMMM");return r.charAt(0).toUpperCase()+r.slice(1)})}),define("template/helper/redmineTime",["vendor/handlebars.runtime","vendor/moment"],function(e,t){e.registerHelper("redmineTime",function(e){return t(e).format("YYYY-MM-DD HH:mm")})}),define("lib/local_storage",[],function(){function e(e){var t=0;if(0==e)return t;for(var n=0;n<e.length;n++){var i=e.charCodeAt(n);t=(t<<5)-t+i,t&=t}return t}function t(e,t){if(-1!==e.indexOf("."))throw new Error('Key cannot contains dot character, "'+e+'" given.');return void 0!==t?a+"."+e+"."+t:a+"."+e}function n(e){var n;return null!==(n=i.getItem(t(e,"expire")))&&new Date>new Date(parseInt(n))?!0:!1}var i=window.localStorage,a="theme";return{set:function(e,n,a){if(void 0!==a){var r=(new Date).getTime()+3600*a*1e3;i.setItem(t(e,"expire"),r)}return i.setItem(t(e),n)},setJsonCache:function(t,n,i,a){return this.set(t+":"+e(n),JSON.stringify(i),a)},get:function(e){return n(e)?(this.remove(e),null):i.getItem(t(e))},getJsonCache:function(t,n){var i=this.get(t+":"+e(n));return i?JSON.parse(i):null},remove:function(e){return i.removeItem(t(e,"expire")),i.removeItem(t(e))},removeExpired:function(){for(var e in localStorage){var t=e.split(".");if(2===t.length&&t[0]===a){var i=t[1];n(i)&&this.remove(i)}}}}}),define("lib/redmine_api",["lib/local_storage"],function(e){return function(){function t(e){var t=0;if(0==e)return t;for(var n=0;n<e.length;n++){var i=e.charCodeAt(n);t=(t<<5)-t+i,t&=t}return t}if("undefined"==typeof jQuery)throw new Error("Redmine API require jQuery library");var n=jQuery;this.getRedmineApiKey=function(t){var i=e.get("rma:redmineApiKey");return i?void t(i):void n.get("/my/api_key").done(function(a){if(i=n(a).find("#content .box pre").text(),!i)throw new Error("Cannot find Redmine API access key on page /my/api_key.");e.set("rma:redmineApiKey",i),t(i)}).fail(function(){throw new Error("Cannot load page /my/api_key for getting Redmine API access key.")})},this.get=function(e,t,i){this.getRedmineApiKey(function(a){t.key=a,e+="?"+n.param(t),n.ajax({url:e,dataType:"text",global:!1}).done(function(e){i(JSON.parse(e),e)}).fail(function(t,n){throw new Error(401===t.statusCode()?"Redmine API access key is invalid.":"Cannot load URL "+e+" from Redmine API. "+n)})})},this.getWithCache=function(i,a,r){var s="rma:cache:"+t(i+"?"+n.param(a)),o=e.get(s);o&&r(JSON.parse(o)),this.get(i,a,function(t,n){o!=n&&(e.set(s,n,1),r(t))})},this.getIssuesWithCache=function(e,t){this.getWithCache("/issues.json",e,t)},this.getProject=function(e,t){this.getWithCache("/projects/"+e+".json",{},t)},this.getAttachment=function(e,t){this.get("/attachments/"+e+".json",{},t)}}}),define("lib/page_property_miner",["lib/redmine_api"],function(e){return{projectId:null,issueId:null,userId:null,lang:null,matchPage:function(e,t){var n=document.body.classList;if(n)return n.contains("controller-"+e)&&n.contains("action-"+t);var i=$("body");return i.hasClass("controller-"+e)&&i.hasClass("action-"+t)},getProjectName:function(){for(var e=document.body.className.split(/\s+/),t=0;t<e.length;t++){var n=e[t];if(0===n.indexOf("project-"))return n.substr(8)}return!1},getTopProjectName:function(){var e=$("#header").find("h1 .root");if(e.size()){var t=e.attr("href");return t.split("/")[2].split("?")[0]}return this.getProjectName()},getProjectId:function(t){if(null===this.projectId)if(this.matchPage("issues","show"))this.projectId=$('#issue_project_id option[selected="selected"]').val(),t(this.projectId);else{var n=new e,i=this;n.getProject(this.getProjectName(),function(e){i.projectId=e.project.id,t(i.projectId)})}else t(this.projectId)},getIssueId:function(){if(null===this.issueId){if(this.matchPage("issues","show"))$("h2").eq(0).text().match(/^.+\#([0-9]+)/)&&(this.issueId=/^.+\#([0-9]+)/.exec($("h2").eq(0).text()).pop());else if(this.matchPage("timelog","new")){var e=$("#issue_id");e.length&&(this.issueId=e.val())}console&&console.log("issue id recognized: "+this.issueId)}return this.issueId},getUserId:function(){return null===this.userId&&(this.userId=/people\/([0-9]+)$/.exec($("#loggedas a").attr("href")).pop(),console&&console.log("user id recognized: "+this.userId)),this.userId},debug:function(){this.getProjectId(function(e){console&&console.log("Project ID recognized: "+e)}),this.getIssueId(),this.getUserId()}}}),define("module/remove_issue_type_from_title",["lib/page_property_miner"],function(e){return{init:function(){e.matchPage("issues","show")&&(document.title=document.title.replace(/^([^#]*)/,""))}}}),define("module/high_res_gravatars",{init:function(){void 0!==window.devicePixelRatio&&2===window.devicePixelRatio&&$(".gravatar").each(function(){var e=this;e.src=e.src.replace(/(size=)?([0-9]*)(x([0-9]*))?/,function(t,n,i,a,r){return"undefined"==typeof n&&(n=""),r?(e.width=i,e.height=r,n+2*i+"x"+2*r):(e.width=i,e.height=i,n+2*i)})})}}),define("lib/add_style",[],function(){return function(e){var t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");return n.type="text/css",n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e)),t.appendChild(n),n}}),define("module/better_sidebar",["lib/local_storage","lib/add_style"],function(e,t){var n,i,a=e.get("sidebarHidden");return a&&(i=t("#sidebar {display:none}#main #content{padding-right:15px}")),{init:function(){this.getSidebar().children().length>0&&(this.getSidebar().before('<div class="toggleSidebar"><div class="border"></div><div class="text">&times;</div></div>'),a&&this.hideSidebar(),i&&i.parentNode.removeChild(i),this.setListeners())},setListeners:function(){var e=this;$(".toggleSidebar").click(function(){e.toggleSidebar()})},toggleSidebar:function(){this.getSidebar().is(":visible")?(this.hideSidebar(),e.set("sidebarHidden",!0)):(this.showSidebar(),e.remove("sidebarHidden"))},showSidebar:function(){this.getSidebar().show(),$(".toggleSidebar .text").html("&times;"),$("#main").removeClass("nosidebar")},hideSidebar:function(){this.getSidebar().hide(),$("#main").addClass("nosidebar"),$(".toggleSidebar .text").html("&larr;")},getSidebar:function(){return n||(n=$("#sidebar")),n}}}),define("templates",["vendor/handlebars.runtime"],function(e){e=e["default"];var t=e.template,n=e.templates=e.templates||{};return n.absences=t({1:function(e,t,n,i){var a;return'    <h4 style="margin: 10px 0 0">'+this.escapeExpression((t.monthFromDate||e&&e.monthFromDate||t.helperMissing).call(e,null!=e?e.month:e,{name:"monthFromDate",hash:{},data:i}))+"</h4>\n    <ul>\n"+(null!=(a=t.each.call(e,null!=e?e.persons:e,{name:"each",hash:{},fn:this.program(2,i,0),inverse:this.noop,data:i}))?a:"")+"    </ul>\n"},2:function(e,t,n,i){var a,r;return'            <li style="margin: 0 0;"><b>'+this.escapeExpression((r=null!=(r=t.name||(null!=e?e.name:e))?r:t.helperMissing,"function"==typeof r?r.call(e,{name:"name",hash:{},data:i}):r))+"</b>:\n\n"+(null!=(a=t.each.call(e,null!=e?e.absences:e,{name:"each",hash:{},fn:this.program(3,i,0),inverse:this.noop,data:i}))?a:"")+"\n            </li>\n"},3:function(e,t,n,i){var a;return"                    "+(null!=(a=t["if"].call(e,null!=e?e.actual:e,{name:"if",hash:{},fn:this.program(4,i,0),inverse:this.noop,data:i}))?a:"")+"\n\n"+(null!=(a=(t.is||e&&e.is||t.helperMissing).call(e,null!=e?e.from:e,null!=e?e.to:e,{name:"is",hash:{},fn:this.program(6,i,0),inverse:this.program(8,i,0),data:i}))?a:"")+"\n                    "+(null!=(a=t["if"].call(e,null!=e?e.actual:e,{name:"if",hash:{},fn:this.program(10,i,0),inverse:this.noop,data:i}))?a:"")+(null!=(a=t["if"].call(e,null!=e?e.type:e,{name:"if",hash:{},fn:this.program(12,i,0),inverse:this.noop,data:i}))?a:"")+(null!=(a=t.unless.call(e,i&&i.last,{name:"unless",hash:{},fn:this.program(21,i,0),inverse:this.noop,data:i}))?a:"")+"\n"},4:function(){return'<span style="color:red">'},6:function(e,t,n,i){return"                        "+this.escapeExpression((t.dayFromDate||e&&e.dayFromDate||t.helperMissing).call(e,null!=e?e.from:e,{name:"dayFromDate",hash:{},data:i}))+".\n"},8:function(e,t,n,i){var a=t.helperMissing,r=this.escapeExpression;return"                        "+r((t.dayFromDate||e&&e.dayFromDate||a).call(e,null!=e?e.from:e,{name:"dayFromDate",hash:{},data:i}))+".–"+r((t.dayFromDate||e&&e.dayFromDate||a).call(e,null!=e?e.to:e,{name:"dayFromDate",hash:{},data:i}))+".\n"},10:function(){return"</span>"},12:function(e,t,n,i){var a;return null!=(a=(t.is||e&&e.is||t.helperMissing).call(e,null!=e?e.type:e,"-",{name:"is",hash:{},fn:this.program(13,i,0),inverse:this.program(15,i,0),data:i}))?a:""},13:function(){return""},15:function(e,t,n,i){var a;return null!=(a=(t.is||e&&e.is||t.helperMissing).call(e,null!=e?e.type:e,"/",{name:"is",hash:{},fn:this.program(13,i,0),inverse:this.program(16,i,0),data:i}))?a:""},16:function(e,t,n,i){var a;return null!=(a=(t.is||e&&e.is||t.helperMissing).call(e,null!=e?e.type:e,"?",{name:"is",hash:{},fn:this.program(17,i,0),inverse:this.program(19,i,0),data:i}))?a:""},17:function(e,t,n,i){return"("+this.escapeExpression((t._||e&&e._||t.helperMissing).call(e,"maybe",{name:"_",hash:{},data:i}))+")"},19:function(e,t,n,i){return"("+this.escapeExpression((t.trim||e&&e.trim||t.helperMissing).call(e,null!=e?e.type:e,{name:"trim",hash:{},data:i}))+")"},21:function(){return", "},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,r,s=t.helperMissing,o=this.escapeExpression;return'<h3 style="margin-top: 30px">'+o((t._||e&&e._||s).call(e,"Planned absences",{name:"_",hash:{},data:i}))+' (<a href="#" class="refresh">'+o((t._||e&&e._||s).call(e,"refresh",{name:"_",hash:{},data:i}))+"</a>)</h3>\n\n"+(null!=(a=t.each.call(e,null!=e?e.months:e,{name:"each",hash:{},fn:this.program(1,i,0),inverse:this.noop,data:i}))?a:"")+'\n<p><a href="'+o((r=null!=(r=t.detailsUri||(null!=e?e.detailsUri:e))?r:s,"function"==typeof r?r.call(e,{name:"detailsUri",hash:{},data:i}):r))+'">'+o((t._||e&&e._||s).call(e,"Show details",{name:"_",hash:{},data:i}))+"</a></p>"},useData:!0}),n.issue_tree_header=t({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a=t.helperMissing,r=this.escapeExpression;return"<thead>\n    <tr>\n        <th>"+r((t._||e&&e._||a).call(e,"Subject",{name:"_",hash:{},data:i}))+"</th>\n        <th>"+r((t._||e&&e._||a).call(e,"Status",{name:"_",hash:{},data:i}))+"</th>\n        <th>"+r((t._||e&&e._||a).call(e,"Assignee",{name:"_",hash:{},data:i}))+"</th>\n        <th>"+r((t._||e&&e._||a).call(e,"Done",{name:"_",hash:{},data:i}))+"</th>\n    </tr>\n</thead>"},useData:!0}),n.issue_warning_duedate=t({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,r=t.helperMissing,s=this.escapeExpression;return"<strong>"+s((t._||e&&e._||r).call(e,"Due date is over.",{name:"_",hash:{},data:i}))+"</strong> "+s((t._||e&&e._||r).call(e,"This issue should be done",{name:"_",hash:{},data:i}))+" "+s((a=null!=(a=t.due_date||(null!=e?e.due_date:e))?a:r,"function"==typeof a?a.call(e,{name:"due_date",hash:{},data:i}):a))+"."},useData:!0}),n.issue_warning_duedate_near=t({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,r=t.helperMissing,s=this.escapeExpression;return"<strong>"+s((t._||e&&e._||r).call(e,"Due date is near.",{name:"_",hash:{},data:i}))+"</strong> "+s((t._||e&&e._||r).call(e,"This issue has to be done",{name:"_",hash:{},data:i}))+" "+s((a=null!=(a=t.due_date||(null!=e?e.due_date:e))?a:r,"function"==typeof a?a.call(e,{name:"due_date",hash:{},data:i}):a))+"."},useData:!0}),n.issues=t({1:function(e,t,n,i,a,r){var s,o=t.helperMissing,l=this.escapeExpression;return'<form>\n    <table class="list issues">\n        <thead>\n        <tr>\n            <th>#</th>\n            '+(null!=(s=t["if"].call(e,null!=e?e.withProject:e,{name:"if",hash:{},fn:this.program(2,i,0,a,r),inverse:this.noop,data:i}))?s:"")+"\n            "+(null!=(s=t["if"].call(e,null!=e?e.withAssigned:e,{name:"if",hash:{},fn:this.program(4,i,0,a,r),inverse:this.noop,data:i}))?s:"")+"\n            <th>"+l((t._||e&&e._||o).call(e,"Status",{name:"_",hash:{},data:i}))+"</th>\n            <th>"+l((t._||e&&e._||o).call(e,"Subject",{name:"_",hash:{},data:i}))+"</th>\n            <th>"+l((t._||e&&e._||o).call(e,"Updated on",{name:"_",hash:{},data:i}))+"</th>\n            <th>"+l((t._||e&&e._||o).call(e,"Due date",{name:"_",hash:{},data:i}))+"</th>\n        </tr>\n        </thead>\n        <tbody>\n"+(null!=(s=t.each.call(e,null!=e?e.issues:e,{name:"each",hash:{},fn:this.program(6,i,0,a,r),inverse:this.noop,data:i}))?s:"")+"        </tbody>\n    </table>\n</form>\n"},2:function(e,t,n,i){return"<th>"+this.escapeExpression((t._||e&&e._||t.helperMissing).call(e,"Project",{name:"_",hash:{},data:i}))+"</th>"},4:function(e,t,n,i){return"<th>"+this.escapeExpression((t._||e&&e._||t.helperMissing).call(e,"Assigned to",{name:"_",hash:{},data:i}))+"</th>"},6:function(e,t,n,i,a,r){var s,o,l=t.helperMissing,u=this.lambda,c=this.escapeExpression,d="function";return'            <tr class="hascontextmenu issue '+(null!=(s=(t.isEven||e&&e.isEven||l).call(e,i&&i.index,{name:"isEven",hash:{},fn:this.program(7,i,0,a,r),inverse:this.program(9,i,0,a,r),data:i}))?s:"")+" priority-"+c(u(null!=(s=null!=e?e.priority:e)?s.id:s,e))+'">\n                <td class="id"><input name="ids[]" type="checkbox" value="'+c((o=null!=(o=t.id||(null!=e?e.id:e))?o:l,typeof o===d?o.call(e,{name:"id",hash:{},data:i}):o))+'" style="display: none"><a href="/issues/'+c((o=null!=(o=t.id||(null!=e?e.id:e))?o:l,typeof o===d?o.call(e,{name:"id",hash:{},data:i}):o))+'">'+c((o=null!=(o=t.id||(null!=e?e.id:e))?o:l,typeof o===d?o.call(e,{name:"id",hash:{},data:i}):o))+"</a></td>\n                "+(null!=(s=t["if"].call(e,null!=r[1]?r[1].withProject:r[1],{name:"if",hash:{},fn:this.program(11,i,0,a,r),inverse:this.noop,data:i}))?s:"")+"\n                "+(null!=(s=t["if"].call(e,null!=r[1]?r[1].withAssigned:r[1],{name:"if",hash:{},fn:this.program(13,i,0,a,r),inverse:this.noop,data:i}))?s:"")+'\n                <td class="status" title="'+c(u(null!=(s=null!=e?e.status:e)?s.name:s,e))+'">'+c(u(null!=(s=null!=e?e.status:e)?s.name:s,e))+'</td>\n                <td class="subject"><a href="/issues/'+c((o=null!=(o=t.id||(null!=e?e.id:e))?o:l,typeof o===d?o.call(e,{name:"id",hash:{},data:i}):o))+'">'+c((o=null!=(o=t.subject||(null!=e?e.subject:e))?o:l,typeof o===d?o.call(e,{name:"subject",hash:{},data:i}):o))+'</a></td>\n                <td class="updated_on">'+c((t.redmineTime||e&&e.redmineTime||l).call(e,null!=e?e.updated_on:e,{name:"redmineTime",hash:{},data:i}))+'</td>\n                <td class="due_date">'+c((o=null!=(o=t.due_date||(null!=e?e.due_date:e))?o:l,typeof o===d?o.call(e,{name:"due_date",hash:{},data:i}):o))+"</td>\n            </tr>\n"
},7:function(){return"even"},9:function(){return"odd"},11:function(e){var t,n=this.lambda,i=this.escapeExpression;return'<td class="project"><a href="/projects/'+i(n(null!=(t=null!=e?e.project:e)?t.id:t,e))+'">'+i(n(null!=(t=null!=e?e.project:e)?t.name:t,e))+"</a></td>"},13:function(e){var t;return'<td class="assigned_to">'+this.escapeExpression(this.lambda(null!=(t=null!=e?e.assigned_to:e)?t.name:t,e))+"</td>"},15:function(e,t,n,i){return this.escapeExpression((t._||e&&e._||t.helperMissing).call(e,"No issues",{name:"_",hash:{},data:i}))+"\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i,a,r){var s;return null!=(s=(t.isNotEmpty||e&&e.isNotEmpty||t.helperMissing).call(e,null!=e?e.issues:e,{name:"isNotEmpty",hash:{},fn:this.program(1,i,0,a,r),inverse:this.program(15,i,0,a,r),data:i}))?s:""},useData:!0,useDepths:!0}),n.issues_project=t({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a=t.helperMissing,r=this.escapeExpression;return'<div class="box issues" id="my-issues">\n    <h3>'+r((t._||e&&e._||a).call(e,"My issues",{name:"_",hash:{},data:i}))+' <span class="count"></span></h3>\n    <a href="#" class="select-random" style="display: none;">'+r((t._||e&&e._||a).call(e,"select random",{name:"_",hash:{},data:i}))+'</a>\n    <div class="content"></div>\n</div>\n\n<div class="box issues"  id="due-date-issues">\n    <h3>'+r((t._||e&&e._||a).call(e,"Overdue issues",{name:"_",hash:{},data:i}))+'</h3>\n    <div class="content"></div>\n</div>'},useData:!0}),n.issues_welcome=t({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a=t.helperMissing,r=this.escapeExpression;return'<div class="box issues" id="my-issues">\n    <h3>'+r((t._||e&&e._||a).call(e,"My issues",{name:"_",hash:{},data:i}))+' <span class="count"></span></h3>\n    <a href="#" class="select-random" style="display: none;">'+r((t._||e&&e._||a).call(e,"select random",{name:"_",hash:{},data:i}))+'</a>\n    <div class="content"></div>\n    <a href="/issues?assigned_to_id=me&amp;set_filter=1&amp;sort=priority%3Adesc%2Cupdated_on%3Adesc">'+r((t._||e&&e._||a).call(e,"show all",{name:"_",hash:{},data:i}))+"</a>\n</div>"},useData:!0}),n.last_issue=t({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,r=t.helperMissing,s=this.escapeExpression,o="function";return"<h3>"+s((t._||e&&e._||r).call(e,"Last viewed issue",{name:"_",hash:{},data:i}))+'</h3>\n<p><a href="/issues/'+s((a=null!=(a=t.id||(null!=e?e.id:e))?a:r,typeof a===o?a.call(e,{name:"id",hash:{},data:i}):a))+'">#'+s((a=null!=(a=t.id||(null!=e?e.id:e))?a:r,typeof a===o?a.call(e,{name:"id",hash:{},data:i}):a))+" – "+s((a=null!=(a=t.projectTitle||(null!=e?e.projectTitle:e))?a:r,typeof a===o?a.call(e,{name:"projectTitle",hash:{},data:i}):a))+": "+s((a=null!=(a=t.title||(null!=e?e.title:e))?a:r,typeof a===o?a.call(e,{name:"title",hash:{},data:i}):a))+"</a></p>"},useData:!0}),n.make_money=t({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){return'<div id="makeMoney" style="float: right">\n    <a href="/projects/chci-praci/issues/new?issue[priority_id]=5">'+this.escapeExpression((t._||e&&e._||t.helperMissing).call(e,"I wanna work!",{name:"_",hash:{},data:i}))+"</a>\n</div>"},useData:!0}),n.not_available_user=t({1:function(e,t,n,i){return this.escapeExpression((t._||e&&e._||t.helperMissing).call(e,"Not available %0",null!=e?e.from:e,{name:"_",hash:{},data:i}))},3:function(e,t,n,i){return this.escapeExpression((t._||e&&e._||t.helperMissing).call(e,"Not available from %0 to %1",null!=e?e.from:e,null!=e?e.to:e,{name:"_",hash:{},data:i}))},5:function(e,t,n,i){var a;return": "+this.escapeExpression((a=null!=(a=t.type||(null!=e?e.type:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"type",hash:{},data:i}):a))},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a;return' <span class="glyphicon glyphicon-warning-sign" style="color: #d9534f;padding-right:3px;" title="'+(null!=(a=(t.is||e&&e.is||t.helperMissing).call(e,null!=e?e.from:e,null!=e?e.to:e,{name:"is",hash:{},fn:this.program(1,i,0),inverse:this.program(3,i,0),data:i}))?a:"")+(null!=(a=t["if"].call(e,null!=e?e.type:e,{name:"if",hash:{},fn:this.program(5,i,0),inverse:this.noop,data:i}))?a:"")+'"></span>'},useData:!0}),n.open_timey=t({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){return'<div id="enterTimey" style="float: right">\n    <a href="https://timey.proofreason.com" target="_blank">'+this.escapeExpression((t._||e&&e._||t.helperMissing).call(e,"Open Timey",{name:"_",hash:{},data:i}))+"</a>\n</div>"},useData:!0}),n.relations_header=t({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a=t.helperMissing,r=this.escapeExpression;return"<thead>\n<tr>\n    <th>"+r((t._||e&&e._||a).call(e,"Subject",{name:"_",hash:{},data:i}))+"</th>\n    <th>"+r((t._||e&&e._||a).call(e,"Status",{name:"_",hash:{},data:i}))+"</th>\n    <th>"+r((t._||e&&e._||a).call(e,"Assignee",{name:"_",hash:{},data:i}))+"</th>\n    <th>"+r((t._||e&&e._||a).call(e,"Due date",{name:"_",hash:{},data:i}))+"</th>\n    <th></th>\n</tr>\n</thead>"},useData:!0}),n.timey_logger=t({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a;return'<div class="timeyLoggerWrapper">\n    <span class="close"><span class="glyphicon glyphicon-remove"></span></span>\n    <iframe style="border:0; width: 100%; height: 220px" src="'+this.escapeExpression((a=null!=(a=t.url||(null!=e?e.url:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"url",hash:{},data:i}):a))+'"></iframe>\n</div>'},useData:!0}),n}),define("module/timey_integration",["lib/page_property_miner","templates"],function(e,t){return{init:function(){if($(t.open_timey()).insertBefore("#loggedas"),e.matchPage("timelog","new"))this.insertTimeyLogger();else if(e.matchPage("timelog","index"))$("#context-menu").remove(),$("td.buttons").hide();else if(e.matchPage("issues","show")){var n=this;$("#main > #content > .contextual .icon-time-add").click(function(){return $(".timeyLoggerWrapper").length||n.insertTimeyLogger(),!1})}},insertTimeyLogger:function(){var n=this;e.getProjectId(function(i){var a=e.getIssueId(),r="https://timey.proofreason.com/";i>0&&(r=r+"?redmine[project_id]="+i,a>0&&(r=r+"&redmine[issue_id]="+a)),r+="#/logs/new";var s=t.timey_logger({url:r});e.matchPage("timelog","new")?$("#new_time_entry").after(s).hide():e.matchPage("issues","show")&&($("body").append(s),$(".timeyLoggerWrapper .close").click(function(){n.removeTimeyLogger()}))})},removeTimeyLogger:function(){$(".timeyLoggerWrapper").remove()}}}),define("module/related_issues_header",["lib/page_property_miner","templates"],function(e,t){return{init:function(){function n(){r.length&&0===r.find("thead").length&&r.prepend(t.issue_tree_header()),s.length&&0===s.find("thead").length&&s.prepend(t.relations_header())}if(e.matchPage("issues","show")){var i=$("#content .issue"),a=i.find("#relations"),r=i.find("#issue_tree table.list.issues"),s=a.find("table.list.issues");n()}}}}),define("lib/replace_issue_form_proxy",[],function(){var e=replaceIssueFormWith,t=[];return replaceIssueFormWith=function(){console.log("replaceIssueFormWith proxy called");for(var n=e.apply(this,arguments),i=0;i<t.length;i++)t[i]();return n},function(e){t.push(e)}}),define("module/absences",["lib/page_property_miner","lib/local_storage","templates","vendor/moment","lib/replace_issue_form_proxy"],function(e,t,n,i,a){return{absencesInfoUrl:null,htmlOutput:null,czechMonths:{Leden:1,"Únor":2,"Březen":3,Duben:4,"Květen":5,"Červen":6,"Červenec":7,Srpen:8,"Září":9,"Říjen":10,Listopad:11,Prosinec:12},init:function(){var t=this;this.absencesInfoUrl="localhost"==window.location.hostname?"holidays.html":"/projects/pm/wiki/Holidays",e.matchPage("welcome","index")?$(".splitcontentleft .wiki").after('<div id="plannedAbsences"></div>'):e.matchPage("issues","index")?$("#sidebar").append('<div id="plannedAbsences"></div>'):(e.matchPage("issues","show")||e.matchPage("issues","new"))&&this.loadWithCache(function(e){t.markAbsencedUsers(e)}),$("#plannedAbsences").length&&this.loadWithCache(function(e){var n=t.createHtml(e);t.putHtmlIntoDocument(n)})},fixDate:function(e){var t=e.split("-");return 2!==t[1].length&&parseInt(t[1])<10&&(t[1]="0"+t[1]),2!==t[2].length&&parseInt(t[2])<10&&(t[2]="0"+t[2]),t.join("-")},removeOldAndMarkActual:function(e){var t={},n=new Date,i=this.fixDate(n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate());for(var a in e)for(var r=0;r<e[a].length;r++){var s=e[a][r],o=this.fixDate(s.from),l=this.fixDate(s.to);i>l||(s.actual=i>=o,a in t||(t[a]=[]),t[a].push(s))}return t},markAbsencedUsers:function(e){function t(t){if(t in e)for(var n=0;n<e[t].length;n++){var i=e[t][n];if(i.actual)return i}return!1}function r(){$("#issue_assigned_to_id option").each(function(){var e=$(this),n=e.text(),i=t(n);i&&e.text(e.text()+" ⚠")})}var s=this;e=this.removeOldAndMarkActual(e),r(),a(r),$(".user").each(function(){var e=$(this),a=e.text(),r=t(a);r&&e.after(n.not_available_user({from:i(s.fixDate(r.from)).format("D. MMMM"),to:i(s.fixDate(r.to)).format("D. MMMM"),type:r.type&&"-"!==r.type?r.type:null}))})},createHtml:function(e){e=this.removeOldAndMarkActual(e);var t={};for(var n in e)for(var i=0;i<e[n].length;i++){var a=e[n][i].from.split("-"),r=a[0]+"-"+a[1];r in t||(t[r]={}),n in t[r]||(t[r][n]=[]),t[r][n].push(e[n][i])}var s=[];for(r in t){var o={month:r,persons:[]};for(var l in t[r])o.persons.push({name:l,absences:t[r][l]});o.persons.sort(function(e,t){return e.name.split(" ")[1].localeCompare(t.name.split(" ")[1])}),s.push(o)}return s.sort(function(e,t){return e.month>t.month?1:e.month<t.month?-1:0}),s},putHtmlIntoDocument:function(e){$("#plannedAbsences").html(n.absences({detailsUri:this.absencesInfoUrl,months:e}));var t=this;$("#plannedAbsences .refresh").click(function(){return $("#ajax-indicator").show(),t.load(function(e){$("#ajax-indicator").hide();var n=t.createHtml(e);t.putHtmlIntoDocument(n)}),!1})},getAbsencesForTable:function(e,t){for(var n=e.querySelectorAll("tr"),i=n[0].querySelector("td strong").textContent,a=i.split(" ")[1]+"-"+this.czechMonths[i.split(" ")[0]]+"-",r=2;r<n.length;r++){var s,o=n[r].querySelectorAll("td"),l=o[0].textContent;l in t?s=t[l]:(t[l]=[],s=t[l]);for(var u=1,c=1;c<o.length;c++){var d,h=o[c],f=h.textContent;f!==u+"."?(d&&d.type!==f&&(d.to=this.fixDate(a+(u-1)),s.push(d),d=null),d||(d={from:this.fixDate(a+u),to:-1,type:f})):d&&(d.to=this.fixDate(a+(u-1)),s.push(d),d=null),h.colSpan?u+=h.colSpan:u++}d&&(d.to=this.fixDate(a+(u-1)),s.push(d),d=null)}},loadAbsencesData:function(e){var t=this;$.ajax({url:this.absencesInfoUrl,global:!1,cache:!1}).success(function(n){var i={},a=document.createElement("div");a.innerHTML=n;for(var r=a.querySelectorAll("table"),s=0;s<r.length;s++)t.getAbsencesForTable(r[s],i);e(i)})},loadWithCache:function(e){if(t.get("absencesObject")){var n=JSON.parse(t.get("absencesObject"));e(n)}else this.load(e)},load:function(e){this.loadAbsencesData(function(n){t.set("absencesObject",JSON.stringify(n),24),e(n)})}}}),define("module/better_header",[],function(){return{init:function(){$("#header").find("h1").prepend('<a class="go-to-my-issues" href="/issues?query_id=135" title="My issues"></a><a class="go-to-projects" href="/projects" title="Projects"></a>')}}}),define("vendor/keymaster",["require","exports","module"],function(e,t,n){!function(e){function t(e,t){for(var n=e.length;n--;)if(e[n]===t)return n;return-1}function i(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function a(e){for(b in D)D[b]=e[Y[b]]}function r(e){var n,i,r,s,o,u;if(n=e.keyCode,-1==t(S,n)&&S.push(n),(93==n||224==n)&&(n=91),n in D){D[n]=!0;for(r in k)k[r]==n&&(l[r]=!0)}else if(a(e),l.filter.call(this,e)&&n in w)for(u=m(),s=0;s<w[n].length;s++)if(i=w[n][s],i.scope==u||"all"==i.scope){o=i.mods.length>0;for(r in D)(!D[r]&&t(i.mods,+r)>-1||D[r]&&-1==t(i.mods,+r))&&(o=!1);(0!=i.mods.length||D[16]||D[18]||D[17]||D[91])&&!o||i.method(e,i)===!1&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0))}}function s(e){var n,i=e.keyCode,a=t(S,i);if(a>=0&&S.splice(a,1),(93==i||224==i)&&(i=91),i in D){D[i]=!1;for(n in k)k[n]==i&&(l[n]=!1)}}function o(){for(b in D)D[b]=!1;for(b in k)l[b]=!1}function l(e,t,n){var i,a;i=_(e),void 0===n&&(n=t,t="all");for(var r=0;r<i.length;r++)a=[],e=i[r].split("+"),e.length>1&&(a=g(e),e=[e[e.length-1]]),e=e[0],e=T(e),e in w||(w[e]=[]),w[e].push({shortcut:i[r],scope:t,method:n,key:i[r],mods:a})}function u(e,t){var n,a,r,s,o,l=[];for(n=_(e),s=0;s<n.length;s++){if(a=n[s].split("+"),a.length>1&&(l=g(a)),e=a[a.length-1],e=T(e),void 0===t&&(t=m()),!w[e])return;for(r=0;r<w[e].length;r++)o=w[e][r],o.scope===t&&i(o.mods,l)&&(w[e][r]={})}}function c(e){return"string"==typeof e&&(e=T(e)),-1!=t(S,e)}function d(){return S.slice(0)}function h(e){var t=(e.target||e.srcElement).tagName;return!("INPUT"==t||"SELECT"==t||"TEXTAREA"==t)}function f(e){M=e||"all"}function m(){return M||"all"}function p(e){var t,n,i;for(t in w)for(n=w[t],i=0;i<n.length;)n[i].scope===e?n.splice(i,1):i++}function _(e){var t;return e=e.replace(/\s/g,""),t=e.split(","),""==t[t.length-1]&&(t[t.length-2]+=","),t}function g(e){for(var t=e.slice(0,e.length-1),n=0;n<t.length;n++)t[n]=k[t[n]];return t}function v(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,function(){n(window.event)})}function y(){var t=e.key;return e.key=P,t}var b,w={},D={16:!1,18:!1,17:!1,91:!1},M="all",k={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,command:91},x={backspace:8,tab:9,clear:12,enter:13,"return":13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,"delete":46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},T=function(e){return x[e]||e.toUpperCase().charCodeAt(0)},S=[];for(b=1;20>b;b++)x["f"+b]=111+b;var Y={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};for(b in k)l[b]=!1;v(document,"keydown",function(e){r(e)}),v(document,"keyup",s),v(window,"focus",o);var P=e.key;e.key=l,e.key.setScope=f,e.key.getScope=m,e.key.deleteScope=p,e.key.filter=h,e.key.isPressed=c,e.key.getPressedKeyCodes=d,e.key.noConflict=y,e.key.unbind=u,"undefined"!=typeof n&&(n.exports=l)}(this)}),define("lib/issue_property_miner",["lib/page_property_miner"],function(e){function t(e){if(0===e.length)return null;var t=e.attr("href"),n=t.split("/")[2];return{id:n,name:e.text()}}var n;return function(){if("undefined"!=typeof n)return n;if(!e.matchPage("issues","show"))return n=null,null;for(var i,a,r,s,o=$("h1")[0].childNodes,l=o[o.length-1].textContent.replace(" » ",""),u=$("h1 .root").text(),c=$("h2:eq(0)").text(),d=$(".issue"),h=d.find("h3").text(),f=d.find("p.author a"),m=d[0].className.split(/\s+/),p=d.find(".due-date .value").text(),_=d.find(".start-date .value").text(),g=t(d.find(".assigned-to .value a")),v=0;v<m.length;v++){var y=m[v];if(0===y.indexOf("tracker-"))i=y.replace("tracker-","");else if(0===y.indexOf("status-"))a=y.replace("status-","");else if(0===y.indexOf("priority-")){var b=y.replace("priority-","");/\d/.test(b)?r=b:s=b}}return n={id:c.substr(c.indexOf("#")+1),title:h,projectName:e.getProjectName(),projectTitle:l,topProjectName:e.getTopProjectName(),topProjectTitle:u,createdBy:t($(f[0])),assignedTo:g,isCreatedByMe:d.hasClass("created-by-me"),isAssignedToMe:d.hasClass("assigned-to-me"),isOverDueDate:d.hasClass("overdue"),trackerId:i,statusId:a,priority:{id:r,type:s},addedAt:f[1].title,actualizedAt:f[2]?f[2].title:null,startDate:_,dueDate:p}}}),define("module/last_issue",["lib/page_property_miner","lib/issue_property_miner","lib/local_storage","templates"],function(e,t,n,i){return{init:function(){var a=t();if(a){var r=JSON.stringify({id:a.id,projectTitle:a.projectTitle,title:a.title});n.set("last_issue",r,168),n.set("last_issue["+a.projectName+"]",r,168)}var s,o;e.matchPage("welcome","index")?(s=n.get("last_issue"),s&&(o=i.last_issue(JSON.parse(s)),$("#content .splitcontentright").prepend(o))):e.matchPage("projects","show")&&(s=n.get("last_issue["+e.getProjectName()+"]"),s&&(o=i.last_issue(JSON.parse(s)),$("#content .splitcontentright").prepend(o)))},getLastIssue:function(){var t,i=e.getProjectName();return t=n.get(i?"last_issue["+i+"]":"last_issue"),t?JSON.parse(t):void 0}}}),define("lib/textarea_insert_at_cursor",[],function(){return function(e,t){if(document.selection){e.focus();var n=document.selection.createRange();n.text=t}else if(e.selectionStart||"0"==e.selectionStart){var i=e.selectionStart,a=e.selectionEnd,r=e.value;i>1&&"\n"!=r.substring(i-1,i)&&(t="\n"+t),e.value=r.substring(0,i)+t+r.substring(a,r.length),e.selectionStart=e.selectionEnd=i+t.length}else e.value+=t}}),define("module/key_shortcuts",["lib/page_property_miner","vendor/keymaster","lib/local_storage","module/last_issue","lib/textarea_insert_at_cursor"],function(e,t,n,i,a){return{init:function(){function r(e){window.location.href=e}function s(e){var t=e.attr("href");return t?(r(t),!1):!0}function o(e){return s(u.find("."+e))}var l=$("#q");if(!n.get("enabled:keyShortcuts"))return void($(window).width()>640&&!e.matchPage("issues","show")&&!this.isTouchDevice()&&l.focus());var u=$("#main-menu");if(l.keypress(function(e){return 27===e.keyCode?($(this).blur(),!1):void 0}),t("g",function(){return t.setScope("go"),setTimeout(function(){t.setScope("all")},1e3),!1}),t("p","go",function(){return r("/projects"),!1}),t("h","go",function(){return r("/"),!1}),t("o","go",function(){return o("overview")}),t("i","go",function(){return o("issues")}),t("w","go",function(){return o("wiki")}),t("n","go",function(){return o("new-issue")}),t("a","go",function(){return o("activity")}),t("l","go",function(){var e=i.getLastIssue();return e?(r("/issues/"+e.id),!1):!0}),t("s",function(){return l.focus(),!1}),t("p",function(){return $("#s2id_project_quick_jump_box").select2("open"),!1}),e.matchPage("issues","show")){t("e",function(){return $(".updateButton:eq(0)").click(),!1}),t("esc",function(){return $("#update").hide(),!1});var c=$("#issue_notes");c.keypress(function(e){return 27===e.keyCode?($("#update").hide(),c.blur(),!1):void 0}),t("left",function(){var e=$("#content .next-prev-links *").slice(0,1);return e.is("a")?s(e):!1}),t("right",function(){var e=$("#content .next-prev-links *").slice(-1);return e.is("a")?s(e):!1}),t("r",function(){var e=window.getSelection().toString();return e?(e=e.trim().split("\n").join("\n> "),$(".updateButton:eq(0)").click(),a(document.getElementById("issue_notes"),"> "+e+"\n\n"),!1):void 0})}else e.matchPage("issues","index")&&(t("left",function(){return s($("ul.pagination .prev"))}),t("right",function(){return s($("ul.pagination .next"))}))},isTouchDevice:function(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch}}}),define("lib/date_format",["vendor/moment"],function(e){function t(t){return e.isMoment(t)}function n(n,i){if(!t(n))throw new Error("`date` must be instance of moment.");if(i){if(!t(i))throw new Error("`compareTo` must be instance of moment.")}else i=e();var a=i.week(),r=i.year(),s=n.week(),o=n.year();return s===a&&o===r?"sameWeek":s===a-1&&o===r||52===s&&o===r-1?"prevWeek":s===a+1&&o===r||1===s&&o===r+1?"nextWeek;":"sameElse"}function i(i,a){if(!t(i))throw new Error("`date` must be instance of moment.");if(a){if(!t(a))throw new Error("`compareTo` must be instance of moment.")}else a=e();var r=i.clone().startOf("day").diff(a.clone().startOf("day"),"days");return 0==r?"sameDay":-1==r?"prevDay":1==r?"nextDay":n(i,a)}function a(e){return r[e]}var r=["ledna","února","března","dubna","května","června","července","srpna","září","října","listopadu","prosince"];return{isTextDate:function(e){return 3===e.split("-").length},formatFullDate:function(e){if(!t(e))throw new Error("Date must be instance of moment.");return e.format("D. ["+a(e.month())+"] YYYY")},formatFullDateWithRelative:function(e){if(!t(e))throw new Error("Date must be instance of moment.");return this.formatFullDate(e)+" ("+this.betterFromNow(e)+")"},betterFromNow:function(t){if("cs"==e.locale())switch(i(t)){case"prevDay":return"včera";case"nextDay":return"zítra"}return t.fromNow()},dueDateWithTime:function(n){if(!t(n))throw new Error("Date must be instance of moment.");var i=e(n);return i.hour(16),i}}}),define("module/alternate_cell_format",["lib/page_property_miner","lib/local_storage","vendor/moment","lib/date_format"],function(e,t,n,i){function a(e){return"alternateCellFormat:"+e.split(" ").join("").split(".").join("_")}var r=!1;return{init:function(){$("#issue_tree").find("table.issues tr").each(function(){$(this).find("td:eq(2)").addClass("status")}),this.setFormatUp("table.issues .due_date",{verbalDate:this.format.relativeTimeDueDate}),this.setFormatUp("table.issues .updated_on",{relativeTime:this.format.relativeTime}),this.setFormatUp("table.issues td.status",{newHighlighted:this.format.newIssuesHighlighted,statusIcon:this.format.statusIcon}),this.setFormatUp("table.issues .tracker",{shortIssueType:this.format.shortIssueType}),r=!0},setFormatUp:function(e,n){var i=t.get(a(e));if(this.prepareCells(e,n,i),!r){var s=this;$("#content").on("click",e,function(){s.toggleFormats(e)})}},prepareCells:function(e,t,n){$(e).each(function(){var e=$(this);if(!e.data("currentlyDisplayed")){var i=e.text();e.data("format.originalFormat",i),e.attr("title",i);for(var a in t){var r=t[a];e.data("format."+a,r(i))}n&&"originalFormat"!==n?(e.data("currentlyDisplayed",n),e.html(e.data("format."+n))):e.data("currentlyDisplayed","originalFormat")}})},showAlternateFormat:function(e,t){$(e).each(function(){$(this).html($(this).data("format."+t)),$(this).data("currentlyDisplayed",t)})},toggleFormats:function(e){var n=$(e).first(),i=n.data(),r=[];for(var s in i)0===s.indexOf("format.")&&r.push(s.substring(7));var o=$.inArray(n.data("currentlyDisplayed"),r),l=o<r.length-1?o+1:0;t.set(a(e),r[l]),this.showAlternateFormat(e,r[l])},format:{statusIcon:function(e){var t={"Nový / New":["inbox"],"Přiřazený / Assigned":["arrow-right"],"Vyřešený / Solved":["ok"],Feedback:["comment"],"Čeká se / Waiting":["refresh"],"Odložený / Postponed":["stop"],"Čeká na klienta":["eye-open"],"Uzavřený / Closed":["home"],"Odmítnutý / Rejected":["ban-circle"],"Needs explanation":["question-sign"],"Needs design":["picture"],Refused:["ban-circle"],"Needs estimation":["time"],"Needs estimation approval":["question-sign"],"Needs implementation":["arrow-right"],"Needs code review":["th-list"],"Needs deployment":["upload"],"Needs review":["eye-open"],Closed:["home"]},n={"Nový / New":["red"],"Přiřazený / Assigned":["green"],"Vyřešený / Solved":["blue"],Feedback:["blue"],"Needs explanation":["blue"],"Needs design":["green"],Refused:["red"],"Needs estimation":["blue"],"Needs implementation":["green"],"Needs code review":["blue"],"Needs deployment":["green"]};if(!(e in t))return e;for(var i="",a=0;a<t[e].length;a++){var r=t[e][a],s=n[e]?n[e][a]:null,o=s?'style="background-color: '+s+'"':"";i+="<span "+o+' class="glyphicon glyphicon-'+r+'"></span>'}return i},newIssuesHighlighted:function(e){return"Nový / New"==e?'<b style="color: red">'+e+"</b>":e},relativeTime:function(e){return e?i.betterFromNow(n(e)):""},relativeTimeDueDate:function(e){if(!e)return"";var t=i.dueDateWithTime(n(e)),a=i.betterFromNow(t);return t.isBefore(n())?'<b class="overdue">'+a+"</b>":a},shortIssueType:function(e){var t={request:'<span style="opacity:.4">&fnof;</span>',error:'<img src="/themes/prRedmineTheme/stylesheets/img/error.png" width="16" height="16" style="opacity:.4">',support:'<span class="glyphicon glyphicon-question-sign" style="opacity:.4"></span>',development:'<span class="glyphicon glyphicon-console" style="opacity:.4"></span>'},n={"Požadavek":t.request,"Feature Request":t.request,Error:t.error,"Error (Baufinder)":t.error,Podpora:t.support,Development:t.development};return e in n?n[e]:e}}}}),define("module/issues",["vendor/moment","lib/redmine_api","lib/page_property_miner","templates","lib/local_storage","module/alternate_cell_format","module/better_sidebar","lib/add_style"],function(e,t,n,i,a,r,s,o){function l(e,t){var n=document.getElementsByTagName("head")[0],i=document.createElement("script");i.type="text/javascript",i.src=e,i.async=!0,i.onreadystatechange=t,i.onload=t,n.appendChild(i)}function u(e){var t=document.getElementsByTagName("head")[0],n=document.createElement("link");n.rel="stylesheet",n.media="screen",n.href=e,t.appendChild(n)}function c(){l("/javascripts/context_menu.js",function(){contextMenuInit("/issues/context_menu")}),u("/stylesheets/context_menu.css")}function d(t){t.sort(function(t,n){return t.due_date||n.due_date?t.due_date?n.due_date?e(t.due_date).diff(n.due_date):-1:1:e(n.updated_on).diff(t.updated_on)})}function h(e,t){d(e.issues);var n=i.issues({issues:e.issues,withProject:t,withAssigned:!1,count:e.total_count}),a=$("#my-issues"),s=a.find(".select-random");a.find(".content").html(n),a.find(".count").html(e.total_count),0===e.total_count?s.hide():s.show(),s.click(function(){var t=Math.floor(Math.random()*e.issues.length),n=e.issues[t].id,i="/issues/"+n;$(this).attr("href",i)}),r.init()}if(a.get("enabled:issues_project")){var f=["body.controller-projects.action-show #content .splitcontentleft {width:28%}","body.controller-projects.action-show #content .splitcontentright {width:70%;margin-top:-30px}","body.controller-welcome.action-index #content .splitcontentleft {width:38%;}","body.controller-welcome.action-index #content .splitcontentright {width:60%;}"];o(f.join(""))}var m;return{init:function(){a.get("enabled:issues_project")&&(m=new t,n.matchPage("projects","show")?(c(),this.project()):n.matchPage("welcome","index")&&(c(),this.welcome()))},project:function(){s.hideSidebar(),$("#content .splitcontentright").prepend(i.issues_project());var t=n.getProjectName();m.getIssuesWithCache({project_id:t,assigned_to_id:"me",sort:"due_date:desc,updated_on:desc",limit:20},function(e){h(e,!1)}),m.getIssuesWithCache({project_id:t,due_date:"<="+e().format("YYYY-MM-DD"),sort:"due_date:desc",limit:20},function(e){d(e.issues);var t=i.issues({issues:e.issues,withProject:!1,withAssigned:!0});$("#due-date-issues .content").html(t),r.init()})},welcome:function(){$("#content .splitcontentright").prepend(i.issues_welcome()),m.getIssuesWithCache({assigned_to_id:n.getUserId(),sort:"due_date:desc,updated_on:desc",limit:20},function(e){h(e,!0)})}}}),define("module/localize",["lib/page_property_miner","lib/local_storage","lib/replace_issue_form_proxy"],function(e,t,n){var i;return{init:function(){if(t.get("enabled:localize")){i=document.documentElement.lang;var a=this;if(e.matchPage("issues","show")){this.localizeElementContent($(".issue .attributes td.status")),this.localizeElementContent($(".issue .attributes td.priority"));var r=function(){a.localizeSelect($("#issue_status_id")),a.localizeSelect($("#issue_priority_id"))};r(),n(r)}}},localizeSelect:function(e){var t=this;e.find("option").each(function(){t.localizeElementContent($(this))})},localizeElementContent:function(e){var t=e.text();t="cs"===i?this.extractCzechVersion(t):this.extractEnglishVersion(t),t&&e.text(t)},extractCzechVersion:function(e){var t=e.split("/");return 2===t.length?t[0].trim():!1},extractEnglishVersion:function(e){var t=e.split("/");return 2===t.length?t[1].trim():!1}}}),define("module/paste_issue_number",["lib/local_storage"],function(e){function t(e){return"#"===e[0]&&(e=e.substr(1)),parseInt(e)==e?e:!1}function n(e){window.location.href="/issues/"+e}return{init:function(){e.get("enabled:pasteIssueNumber")&&($("#q").on("paste",function(e){var i=e.originalEvent.clipboardData.getData("text"),a=t(i);a&&n(a)}),document.addEventListener("paste",function(e){if("INPUT"!==e.target.nodeName&&"TEXTAREA"!==e.target.nodeName&&e.clipboardData.types.indexOf("text/plain")>-1){var i=e.clipboardData.getData("text/plain"),a=t(i);a&&n(a)}}))}}}),define("module/checkbox",["lib/page_property_miner"],function(e){function t(e,t,n){var i=document.createElement("input");return i.type="checkbox",i.name="todo",i.checked=t,i.value=e,i.disabled=n,i}function n(e,i,a){for(var r=0;r<e.childNodes.length;r++){var s=e.childNodes[r];if(3===s.nodeType){var o=s.textContent;0===o.indexOf("[ ]")?(s.textContent=o.substring(3),e.insertBefore(t(i++,!1,a),s)):0===o.indexOf("[]")?(s.textContent=o.substring(2),e.insertBefore(t(i++,!1,a),s)):0===o.indexOf("[X]")||0===o.indexOf("[x]")?(s.textContent=o.substring(3),e.insertBefore(t(i++,!0,a),s)):(o.indexOf("[ ]")>0||o.indexOf("[]")>0||o.indexOf("[X]")>0||o.indexOf("[x]")>0)&&i++}else i=n(s,i,a)}return i}function i(e,t,n){var i=e.text(),a=1;i=i.replace(/\[[ Xx]?]/g,function(e){return t==a++?n?"[x]":"[ ]":e}),e.text(i),e.data("changed","changed")}return{init:function(){if(e.matchPage("issues","show")){var t=$("#content").find(".issue .wiki");if(t.size()){var a=$("#issue_description"),r=a.size()>0;n(t[0],1,!r),t.on("change",'[name="todo"]',function(e){var n=e.target.value,r=e.target.checked;i(a,n,r),$("#issue_description_and_toolbar").show().prev().hide(),0==t.find("#saveCheckbox").length&&(t.css("position","relative"),t.append('<input type="submit" value="Uložit" id="saveCheckbox" style="position: absolute; right: 10px; bottom: 10px;">'))}),t.on("click","#saveCheckbox",function(){return $("#issue-form").submit(),!1})}}else if(e.matchPage("issues","new")){var s=document.getElementById("preview"),o=new MutationObserver(function(){n(s,1,!1)}),l={attributes:!0,childList:!0,characterData:!0};o.observe(s,l)}}}}),define("module/cl_ly",["lib/page_property_miner","lib/local_storage"],function(e,t){return{init:function(){if(e.matchPage("issues","show")&&"baufinder"===e.getTopProjectName()){var n=this;$("#content").find("p > a").each(function(){var e=$(this),i=e.attr("href");if(0===i.indexOf("http://cl.ly/")){var a=t.getJsonCache("clly",i);a?n.processLink(e,a):n.getData(e.attr("href"),function(a){t.setJsonCache("clly",i,a,24),n.processLink(e,a)})}})}},getData:function(e,t){var n={headers:{Accept:"application/json"}};$.ajax("http://acci.cz/proxy/proxy.php?csurl="+e,n).done(function(e){t(e)})},processLink:function(e,t){if("image"===t.item_type){var n=new Image;n.src=t.remote_url,n.title=n.alt=t.name,e.html(n),e.attr("target","_blank"),e.removeClass("external")}}}}),define("module/attachments",["lib/page_property_miner","lib/local_storage","lib/redmine_api","lib/translate","lib/textarea_insert_at_cursor"],function(e,t,n,i,a){return{activeEditor:"issue_notes",init:function(){if(e.matchPage("issues","show")||e.matchPage("issues","edit"))$("#issue_description").focus(function(){n.activeEditor="issue_description"}),$("#issue_notes").focus(function(){n.activeEditor="issue_notes"});else{if(!e.matchPage("issues","new"))return;this.activeEditor="issue_description"}var t=uploadBlob,n=this;uploadBlob=function(e,i,a){var r=t.apply(this,arguments);return r.done(function(){n.uploaded(a,e)}),r}},uploaded:function(e,t){this.processAttachment($("#attachments_fields").find("#attachments_"+e),t)},processAttachment:function(e,t){var r=new n,s=e.find("a.remove-upload").attr("href").split("?")[0].split("/")[2].split(".")[0],o=this;r.getAttachment(s,function(n){n=n.attachment,"image"===n.content_type.split("/")[0]&&$('<a href="#">'+i("Add to editor")+"</a>").appendTo(e).click(function(){var e;return-1!==n.content_url.indexOf("%")?(e="!/attachments/download/",e+=n.id,e+="/#",e+=t.name.split(" ").join("%20"),e+="!"):e="!"+n.filename+"!",a(document.getElementById(o.activeEditor),e),!1})})}}}),define("module/issue_update_form",["lib/page_property_miner","lib/local_storage"],function(e,t){return{init:function(){function n(){i.hasClass("minimized")?(i.removeClass("minimized"),t.remove("updateFormMinimized")):(i.addClass("minimized"),t.set("updateFormMinimized",!0))}if(e.matchPage("issues","show")){var i=$("#update");i.find("#issue_subject").closest("fieldset").addClass("issueAttributes"),i.find("#time_entry_hours").closest("fieldset").addClass("timeLogging"),i.find("#issue_notes").closest("fieldset").addClass("issueJournalNotes"),i.find(".timeLogging").closest("fieldset").hide(),$(".icon-edit").filter(function(){return'showAndScrollTo("update", "issue_notes"); return false;'===$(this).attr("onclick")
}).addClass("updateButton").attr("onclick",""),$(".updateButton").click(function(e){e.preventDefault(),i.show(),$("#issue_notes").focus(),i.hasClass("minimized")||$("html, body").animate({scrollTop:$("#issue-form").offset().top},100)}),i.prepend('<span class="minimize"><span class="glyphicon glyphicon-minus"></span> <span class="glyphicon glyphicon-plus"></span></span>'),i.find("span.minimize").click(function(){return n(),!1}),t.get("updateFormMinimized")&&i.find("span.minimize").click(),$("#issue-form").contents().filter(function(){return 3===this.nodeType&&"|"===this.textContent.trim()}).remove(),$('<span class="delimiter"> | </span>').insertBefore("#issue-form a:last")}}}}),define("module/clickable_issue_names",["lib/page_property_miner"],function(e){return{init:function(){e.matchPage("issues","show")&&$("table.list.issues td.subject").each(function(){var e=$(this);e.html(e.find("a").html(e.text()))})}}}),define("module/make_money",["lib/page_property_miner","templates","vendor/moment"],function(e,t,n){return{init:function(){if($(t.make_money()).insertBefore("#loggedas"),$("body").hasClass("project-chci-praci")&&e.matchPage("issues","new")){var i=n().add(1,"weeks").startOf("isoWeek").format("D. M.");$("#issue_subject").val("Příští týden (od "+i+") mám X hodin času");var a=$("#all_attributes");a.find("#issue_subject").closest("p").css("display","block"),a.find("#issue_description_and_toolbar").closest("p").css("display","block"),a.find("#issue_description_and_toolbar textarea").attr("placeholder","Upřesněte případné detaily.")}}}}),define("module/better_timeline",["lib/page_property_miner"],function(e){return{init:function(){if(e.matchPage("issues","show")){var t=$("#history");$(' <a href="#" class="showStatusChanges">(show all issue status changes)</a>').appendTo(t.find("h3")).click(function(){return t.find(".peekable").removeClass("peekable"),$(this).remove(),!1}),t.find(">.journal:not(.has-notes)").addClass("peekable").click(function(){$(this).removeClass("peekable")})}}}}),define("module/czech_date_fix",["lib/page_property_miner","vendor/moment","lib/date_format","lib/issue_property_miner"],function(e,t,n,i){function a(e){var t=e.fromNow();return t=t.replace("před ","")}function r(e){var n=e.attr("title"),i=t(n);e.text(a(i))}if("cs"===document.documentElement.lang)return{init:function(){if(e.matchPage("issues","show")){var a=$(".issue");r(a.find(".author a:eq(1)")),r(a.find(".author a:eq(2)")),$("#history").find("h4").each(function(){var e=$(this).find("a").last();r(e)});var s=i();if(n.isTextDate(s.startDate)){var o=t(s.startDate),l=a.find(".start-date .value");l.text(n.formatFullDateWithRelative(o))}if(n.isTextDate(s.dueDate)){var u=n.dueDateWithTime(t(s.dueDate)),c=a.find(".due-date .value");c.text(n.formatFullDateWithRelative(u))}}}}}),define("module/issue_warnings",["lib/issue_property_miner","lib/date_format","vendor/moment","templates"],function(e,t,n,i){function a(e,t){return $('<div class="flash '+e+'">'+t+"</div>").css("display","none").prependTo("#content").slideDown("slow")}return{init:function(){var r=e();if(r&&r.isAssignedToMe&&t.isTextDate(r.dueDate)){var s=t.dueDateWithTime(n(r.dueDate));if(s.isBefore(n()))a("error",i.issue_warning_duedate({due_date:t.betterFromNow(s)}));else{var o=s.diff(n().startOf("day"),"days");7>o&&a("notice",i.issue_warning_duedate_near({due_date:t.betterFromNow(s)}))}}}}}),define("module/single_click_select",["lib/page_property_miner"],function(e){return{init:function(){this.issueId(),this.codeElement()},issueId:function(){e.matchPage("issues","show")&&$("#content h2:eq(0)").click(function(){for(var e=0;e<this.childNodes.length;e++)if(this.childNodes[e]instanceof Text){var t=this.childNodes[e],n=t.nodeValue.indexOf("#"),i=t.nodeValue.length,a=document.createRange();a.setStart(t,n),a.setEnd(t,i),window.getSelection().removeAllRanges(),window.getSelection().addRange(a);break}})},codeElement:function(){var e=null,t=null,n=$("body");n.on("mousedown","code",function(n){e=n.clientX,t=n.clientY}),n.on("mouseup","code",function(n){if(null!==e&&e===n.clientX&&t===n.clientY){var i=this.childNodes[0];if(i.nodeValue){var a=document.createRange();a.setStart(i,0),a.setEnd(i,i.nodeValue.length),window.getSelection().removeAllRanges(),window.getSelection().addRange(a),e=t=null}}})}}}),define("module/autologin",["lib/page_property_miner","lib/local_storage"],function(e,t){return{init:function(){function n(){document.getElementById("username")&&"jakub"===document.getElementById("username").value&&document.getElementById("password").value&&document.querySelector("#login-form form").submit()}e.matchPage("account","login")&&(document.getElementById("flash_error")||(t.get("autoLogin")&&(n(),setTimeout(function(){n()},100)),$("#account .logout").click(function(){t.remove("autoLogin")})))}}}),define("module/auto_return_to_owner",["lib/page_property_miner","lib/replace_issue_form_proxy","lib/issue_property_miner","vendor/moment"],function(e,t,n,i){function a(e){e.each(function(){var e=$(this);if(e.is(":visible")){var t=$("<div/>").width(e.outerWidth()).height(e.outerHeight()).css({position:"absolute",left:e.offset().left,top:e.offset().top,"background-color":"#ffff99",opacity:".7","z-index":"9999999"}).appendTo("body");setTimeout(function(){t.fadeOut(1500).queue(function(){t.remove()})},1e3)}})}return{init:function(){if(e.matchPage("issues","show")){var r=function(){var e=n().createdBy.id,t=$("select#issue_assigned_to_id");t.val(e),a(t.prev("label"))},s=function(){var e=$("#issue_custom_field_values_24");e.size()>0&&(e.val(i().format("YYYY-MM-DD")),a(e.prev("label")))},o=$("#all_attributes"),l=!1;o.on("change","select#issue_assigned_to_id",function(){l=!0}),o.on("change","select#issue_status_id",function(){var e=$(this).val();3==e||23==e?l||t(function(){r()}):(17==e||5==e)&&t(function(){s()})})}}}}),define("module/cmd_enter_form_submit",[],function(){return{init:function(){$(document).on("keydown","textarea#issue_notes, textarea#issue_description, #issue-form input",function(e){13===e.keyCode&&(e.metaKey||e.ctrlKey)&&(window.onbeforeunload=null,$(this).parents("form").submit(),e.preventDefault())})}}}),define("module/assign_select_author",["lib/page_property_miner","lib/issue_property_miner","lib/translate","lib/replace_issue_form_proxy"],function(e,t,n,i){return{init:function(){function a(){$("#issue_assigned_to_id").find('option[value="'+t().createdBy.id+'"]').each(function(){$(this).text($(this).text()+" ("+n("author")+")")})}e.matchPage("issues","show")&&(t().isCreatedByMe||(a(),i(a)))}}}),define("module/datepicker_focus",[],function(){$("body").on("focus",".hasDatepicker",function(){$(this).datepicker("show")})}),define("module/fix_context_menu",[],function(){return"undefined"!=typeof contextMenuCreate&&(console&&console.log("Replaced function 'contextMenuCreate'."),contextMenuCreate=function(){if(!document.getElementById("context-menu")){var e=document.createElement("div");e.id="context-menu",e.style="display:none",document.body.appendChild(e)}}),{init:function(){var e=document.getElementById("context-menu");e&&e.parentNode!==document.body&&(e.parentNode.removeChild(e),document.body.appendChild(e),console&&console.log("Changed position of '#context-menu'."))}}}),require(["vendor/moment"],function(e){var t=document.documentElement.lang;"cs"===t&&e.locale(t)},null,!0),require(["template/helper/translate","template/helper/dayFromDate","template/helper/trim","template/helper/is","template/helper/isEven","template/helper/isNotEmpty","template/helper/monthFromDate","template/helper/redmineTime"],null,null,!0),require(["module/remove_issue_type_from_title","module/high_res_gravatars","module/better_sidebar","module/timey_integration","module/related_issues_header","module/absences","module/better_header","module/key_shortcuts","module/issues","module/last_issue","module/localize","module/alternate_cell_format","module/paste_issue_number","module/checkbox","module/cl_ly","module/attachments","module/issue_update_form","module/clickable_issue_names","module/make_money","module/better_timeline","module/czech_date_fix","module/issue_warnings"],function(){var e=arguments;$(function(){console&&console.log("DOM ready");for(var t=0;t<e.length;t++){var n=e[t];n&&n.init&&n.init()}console&&console.log("Initialized all modules")})},null,!0),require(["module/single_click_select","module/autologin","module/auto_return_to_owner","module/cmd_enter_form_submit","module/assign_select_author","module/datepicker_focus","module/fix_context_menu"],function(){var e=arguments;$(function(){for(var t=0;t<e.length;t++){var n=e[t];n&&n.init&&n.init()}console&&console.log("Initialized can wait modules")})}),setTimeout(function(){require(["lib/local_storage"],function(e){Math.random()>.9&&(console&&console.log("Deleted expired cached entries in localStorage."),e.removeExpired())})},100);var ProofReasonRedmineTheme={init:function(){this.ZenMode.init(),this.MobileRedmine.init()},ZenMode:{init:function(){$('<div id="enterZenMode" style="float: right"><a href="#">Zen mode</a></div>').insertBefore("#loggedas"),$('<a id="exitZenMode" href="#">&#9775; Exit zen</a>').appendTo("#main>#content>.contextual"),$("body").on("click","#enterZenMode",function(){return $("body").addClass("zenMode"),!1}).on("click","#exitZenMode",function(){return $("body").removeClass("zenMode"),!1})}},MobileRedmine:{init:function(){$("body").addClass("mobileRedmine"),$("head").append('<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0">'),$(window).width()<=480&&setTimeout(function(){$("#project_quick_jump_box").select2("destroy")},300),$("#footer .bgr").append('<br><a id="backToDestop" href="javascript:ProofReasonRedmineTheme.MobileRedmine.remove()">Back to desktop mode</a>')},remove:function(){$("#backToDestop").remove(),$("body").removeClass("mobileRedmine"),$('head meta[name="viewport"]').remove(),$("#project_quick_jump_box").select2()}}};$(function(){ProofReasonRedmineTheme.init(),console&&console.log("Initialized old theme")}),define("main",function(){});
//# sourceMappingURL=theme.js
//# sourceMappingURL=theme.js.map
define.amd = undefined;
