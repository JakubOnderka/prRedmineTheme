function daysFromToday(e){var t=864e5,n=(new Date).getTime(),i=e.getTime(),r=i-n;return Math.round(r/t)+1}var requirejs,require,define;!function(e){function t(e,t){return g.call(e,t)}function n(e,t){var n,i,r,a,s,o,u,l,c,d,h,f=t&&t.split("/"),m=p.map,_=m&&m["*"]||{};if(e&&"."===e.charAt(0))if(t){for(e=e.split("/"),s=e.length-1,p.nodeIdCompat&&y.test(e[s])&&(e[s]=e[s].replace(y,"")),e=f.slice(0,f.length-1).concat(e),c=0;c<e.length;c+=1)if(h=e[c],"."===h)e.splice(c,1),c-=1;else if(".."===h){if(1===c&&(".."===e[2]||".."===e[0]))break;c>0&&(e.splice(c-1,2),c-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((f||_)&&m){for(n=e.split("/"),c=n.length;c>0;c-=1){if(i=n.slice(0,c).join("/"),f)for(d=f.length;d>0;d-=1)if(r=m[f.slice(0,d).join("/")],r&&(r=r[i])){a=r,o=c;break}if(a)break;!u&&_&&_[i]&&(u=_[i],l=c)}!a&&u&&(a=u,o=l),a&&(n.splice(0,o,a),e=n.join("/"))}return e}function i(t,n){return function(){var i=v.call(arguments,0);return"string"!=typeof i[0]&&1===i.length&&i.push(null),c.apply(e,i.concat([t,n]))}}function r(e){return function(t){return n(t,e)}}function a(e){return function(t){f[e]=t}}function s(n){if(t(m,n)){var i=m[n];delete m[n],_[n]=!0,l.apply(e,i)}if(!t(f,n)&&!t(_,n))throw new Error("No "+n);return f[n]}function o(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function u(e){return function(){return p&&p.config&&p.config[e]||{}}}var l,c,d,h,f={},m={},p={},_={},g=Object.prototype.hasOwnProperty,v=[].slice,y=/\.js$/;d=function(e,t){var i,a=o(e),u=a[0];return e=a[1],u&&(u=n(u,t),i=s(u)),u?e=i&&i.normalize?i.normalize(e,r(t)):n(e,t):(e=n(e,t),a=o(e),u=a[0],e=a[1],u&&(i=s(u))),{f:u?u+"!"+e:e,n:e,pr:u,p:i}},h={require:function(e){return i(e)},exports:function(e){var t=f[e];return"undefined"!=typeof t?t:f[e]={}},module:function(e){return{id:e,uri:"",exports:f[e],config:u(e)}}},l=function(n,r,o,u){var l,c,p,g,v,y,b=[],w=typeof o;if(u=u||n,"undefined"===w||"function"===w){for(r=!r.length&&o.length?["require","exports","module"]:r,v=0;v<r.length;v+=1)if(g=d(r[v],u),c=g.f,"require"===c)b[v]=h.require(n);else if("exports"===c)b[v]=h.exports(n),y=!0;else if("module"===c)l=b[v]=h.module(n);else if(t(f,c)||t(m,c)||t(_,c))b[v]=s(c);else{if(!g.p)throw new Error(n+" missing "+c);g.p.load(g.n,i(u,!0),a(c),{}),b[v]=f[c]}p=o?o.apply(f[n],b):void 0,n&&(l&&l.exports!==e&&l.exports!==f[n]?f[n]=l.exports:p===e&&y||(f[n]=p))}else n&&(f[n]=o)},requirejs=require=c=function(t,n,i,r,a){if("string"==typeof t)return h[t]?h[t](n):s(d(t,n).f);if(!t.splice){if(p=t,p.deps&&c(p.deps,p.callback),!n)return;n.splice?(t=n,n=i,i=null):t=e}return n=n||function(){},"function"==typeof i&&(i=r,r=a),r?l(e,t,n,i):setTimeout(function(){l(e,t,n,i)},4),c},c.config=function(e){return c(e)},requirejs._defined=f,define=function(e,n,i){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");n.splice||(i=n,n=[]),t(f,e)||t(m,e)||(m[e]=[e,n,i])},define.amd={jQuery:!0}}(),define("vendor/almond.js",function(){}),function(e){function t(e,t,n){switch(arguments.length){case 2:return null!=e?e:t;case 3:return null!=e?e:null!=t?t:n;default:throw new Error("Implement me")}}function n(e,t){return St.call(e,t)}function i(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function r(e){wt.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function a(e,t){var n=!0;return m(function(){return n&&(r(e),n=!1),t.apply(this,arguments)},t)}function s(e,t){yn[e]||(r(t),yn[e]=!0)}function o(e,t){return function(n){return g(e.call(this,n),t)}}function u(e,t){return function(n){return this.localeData().ordinal(e.call(this,n),t)}}function l(e,t){var n,i,r=12*(t.year()-e.year())+(t.month()-e.month()),a=e.clone().add(r,"months");return 0>t-a?(n=e.clone().add(r-1,"months"),i=(t-a)/(a-n)):(n=e.clone().add(r+1,"months"),i=(t-a)/(n-a)),-(r+i)}function c(e,t,n){var i;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?(i=e.isPM(n),i&&12>t&&(t+=12),i||12!==t||(t=0),t):t}function d(){}function h(e,t){t!==!1&&j(e),p(this,e),this._d=new Date(+e._d),wn===!1&&(wn=!0,wt.updateOffset(this),wn=!1)}function f(e){var t=T(e),n=t.year||0,i=t.quarter||0,r=t.month||0,a=t.week||0,s=t.day||0,o=t.hour||0,u=t.minute||0,l=t.second||0,c=t.millisecond||0;this._milliseconds=+c+1e3*l+6e4*u+36e5*o,this._days=+s+7*a,this._months=+r+3*i+12*n,this._data={},this._locale=wt.localeData(),this._bubble()}function m(e,t){for(var i in t)n(t,i)&&(e[i]=t[i]);return n(t,"toString")&&(e.toString=t.toString),n(t,"valueOf")&&(e.valueOf=t.valueOf),e}function p(e,t){var n,i,r;if("undefined"!=typeof t._isAMomentObject&&(e._isAMomentObject=t._isAMomentObject),"undefined"!=typeof t._i&&(e._i=t._i),"undefined"!=typeof t._f&&(e._f=t._f),"undefined"!=typeof t._l&&(e._l=t._l),"undefined"!=typeof t._strict&&(e._strict=t._strict),"undefined"!=typeof t._tzm&&(e._tzm=t._tzm),"undefined"!=typeof t._isUTC&&(e._isUTC=t._isUTC),"undefined"!=typeof t._offset&&(e._offset=t._offset),"undefined"!=typeof t._pf&&(e._pf=t._pf),"undefined"!=typeof t._locale&&(e._locale=t._locale),At.length>0)for(n in At)i=At[n],r=t[i],"undefined"!=typeof r&&(e[i]=r);return e}function _(e){return 0>e?Math.ceil(e):Math.floor(e)}function g(e,t,n){for(var i=""+Math.abs(e),r=e>=0;i.length<t;)i="0"+i;return(r?n?"+":"":"-")+i}function v(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function y(e,t){var n;return t=F(t,e),e.isBefore(t)?n=v(e,t):(n=v(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n}function b(e,t){return function(n,i){var r,a;return null===i||isNaN(+i)||(s(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),a=n,n=i,i=a),n="string"==typeof n?+n:n,r=wt.duration(n,i),w(this,r,e),this}}function w(e,t,n,i){var r=t._milliseconds,a=t._days,s=t._months;i=null==i?!0:i,r&&e._d.setTime(+e._d+r*n),a&&pt(e,"Date",mt(e,"Date")+a*n),s&&ft(e,mt(e,"Month")+s*n),i&&wt.updateOffset(e,a||s)}function M(e){return"[object Array]"===Object.prototype.toString.call(e)}function D(e){return"[object Date]"===Object.prototype.toString.call(e)||e instanceof Date}function k(e,t,n){var i,r=Math.min(e.length,t.length),a=Math.abs(e.length-t.length),s=0;for(i=0;r>i;i++)(n&&e[i]!==t[i]||!n&&Y(e[i])!==Y(t[i]))&&s++;return s+a}function x(e){if(e){var t=e.toLowerCase().replace(/(.)s$/,"$1");e=hn[e]||fn[t]||t}return e}function T(e){var t,i,r={};for(i in e)n(e,i)&&(t=x(i),t&&(r[t]=e[i]));return r}function S(t){var n,i;if(0===t.indexOf("week"))n=7,i="day";else{if(0!==t.indexOf("month"))return;n=12,i="month"}wt[t]=function(r,a){var s,o,u=wt._locale[t],l=[];if("number"==typeof r&&(a=r,r=e),o=function(e){var t=wt().utc().set(i,e);return u.call(wt._locale,t,r||"")},null!=a)return o(a);for(s=0;n>s;s++)l.push(o(s));return l}}function Y(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=t>=0?Math.floor(t):Math.ceil(t)),n}function P(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function O(e,t,n){return lt(wt([e,11,31+t-n]),t,n).week}function $(e){return C(e)?366:365}function C(e){return e%4===0&&e%100!==0||e%400===0}function j(e){var t;e._a&&-2===e._pf.overflow&&(t=e._a[Pt]<0||e._a[Pt]>11?Pt:e._a[Ot]<1||e._a[Ot]>P(e._a[Yt],e._a[Pt])?Ot:e._a[$t]<0||e._a[$t]>24||24===e._a[$t]&&(0!==e._a[Ct]||0!==e._a[jt]||0!==e._a[It])?$t:e._a[Ct]<0||e._a[Ct]>59?Ct:e._a[jt]<0||e._a[jt]>59?jt:e._a[It]<0||e._a[It]>999?It:-1,e._pf._overflowDayOfYear&&(Yt>t||t>Ot)&&(t=Ot),e._pf.overflow=t)}function I(t){return null==t._isValid&&(t._isValid=!isNaN(t._d.getTime())&&t._pf.overflow<0&&!t._pf.empty&&!t._pf.invalidMonth&&!t._pf.nullInput&&!t._pf.invalidFormat&&!t._pf.userInvalidated,t._strict&&(t._isValid=t._isValid&&0===t._pf.charsLeftOver&&0===t._pf.unusedTokens.length&&t._pf.bigHour===e)),t._isValid}function E(e){return e?e.toLowerCase().replace("_","-"):e}function A(e){for(var t,n,i,r,a=0;a<e.length;){for(r=E(e[a]).split("-"),t=r.length,n=E(e[a+1]),n=n?n.split("-"):null;t>0;){if(i=L(r.slice(0,t).join("-")))return i;if(n&&n.length>=t&&k(r,n,!0)>=t-1)break;t--}a++}return null}function L(e){var t=null;if(!Et[e]&&Lt)try{t=wt.locale(),require("./locale/"+e),wt.locale(t)}catch(n){}return Et[e]}function F(e,t){var n,i;return t._isUTC?(n=t.clone(),i=(wt.isMoment(e)||D(e)?+e:+wt(e))-+n,n._d.setTime(+n._d+i),wt.updateOffset(n,!1),n):wt(e).local()}function N(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function U(e){var t,n,i=e.match(Ht);for(t=0,n=i.length;n>t;t++)i[t]=vn[i[t]]?vn[i[t]]:N(i[t]);return function(r){var a="";for(t=0;n>t;t++)a+=i[t]instanceof Function?i[t].call(r,e):i[t];return a}}function H(e,t){return e.isValid()?(t=z(t,e.localeData()),mn[t]||(mn[t]=U(t)),mn[t](e)):e.localeData().invalidDate()}function z(e,t){function n(e){return t.longDateFormat(e)||e}var i=5;for(zt.lastIndex=0;i>=0&&zt.test(e);)e=e.replace(zt,n),zt.lastIndex=0,i-=1;return e}function W(e,t){var n,i=t._strict;switch(e){case"Q":return Qt;case"DDDD":return tn;case"YYYY":case"GGGG":case"gggg":return i?nn:Gt;case"Y":case"G":case"g":return an;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return i?rn:qt;case"S":if(i)return Qt;case"SS":if(i)return en;case"SSS":if(i)return tn;case"DDD":return Rt;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Vt;case"a":case"A":return t._locale._meridiemParse;case"x":return Kt;case"X":return Xt;case"Z":case"ZZ":return Zt;case"T":return Jt;case"SSSS":return Bt;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return i?en:Wt;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return Wt;case"Do":return i?t._locale._ordinalParse:t._locale._ordinalParseLenient;default:return n=new RegExp(X(K(e.replace("\\","")),"i"))}}function R(e){e=e||"";var t=e.match(Zt)||[],n=t[t.length-1]||[],i=(n+"").match(cn)||["-",0,0],r=+(60*i[1])+Y(i[2]);return"+"===i[0]?r:-r}function G(e,t,n){var i,r=n._a;switch(e){case"Q":null!=t&&(r[Pt]=3*(Y(t)-1));break;case"M":case"MM":null!=t&&(r[Pt]=Y(t)-1);break;case"MMM":case"MMMM":i=n._locale.monthsParse(t,e,n._strict),null!=i?r[Pt]=i:n._pf.invalidMonth=t;break;case"D":case"DD":null!=t&&(r[Ot]=Y(t));break;case"Do":null!=t&&(r[Ot]=Y(parseInt(t.match(/\d{1,2}/)[0],10)));break;case"DDD":case"DDDD":null!=t&&(n._dayOfYear=Y(t));break;case"YY":r[Yt]=wt.parseTwoDigitYear(t);break;case"YYYY":case"YYYYY":case"YYYYYY":r[Yt]=Y(t);break;case"a":case"A":n._meridiem=t;break;case"h":case"hh":n._pf.bigHour=!0;case"H":case"HH":r[$t]=Y(t);break;case"m":case"mm":r[Ct]=Y(t);break;case"s":case"ss":r[jt]=Y(t);break;case"S":case"SS":case"SSS":case"SSSS":r[It]=Y(1e3*("0."+t));break;case"x":n._d=new Date(Y(t));break;case"X":n._d=new Date(1e3*parseFloat(t));break;case"Z":case"ZZ":n._useUTC=!0,n._tzm=R(t);break;case"dd":case"ddd":case"dddd":i=n._locale.weekdaysParse(t),null!=i?(n._w=n._w||{},n._w.d=i):n._pf.invalidWeekday=t;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":e=e.substr(0,1);case"gggg":case"GGGG":case"GGGGG":e=e.substr(0,2),t&&(n._w=n._w||{},n._w[e]=Y(t));break;case"gg":case"GG":n._w=n._w||{},n._w[e]=wt.parseTwoDigitYear(t)}}function q(e){var n,i,r,a,s,o,u;n=e._w,null!=n.GG||null!=n.W||null!=n.E?(s=1,o=4,i=t(n.GG,e._a[Yt],lt(wt(),1,4).year),r=t(n.W,1),a=t(n.E,1)):(s=e._locale._week.dow,o=e._locale._week.doy,i=t(n.gg,e._a[Yt],lt(wt(),s,o).year),r=t(n.w,1),null!=n.d?(a=n.d,s>a&&++r):a=null!=n.e?n.e+s:s),u=ct(i,r,a,o,s),e._a[Yt]=u.year,e._dayOfYear=u.dayOfYear}function B(e){var n,i,r,a,s=[];if(!e._d){for(r=Z(e),e._w&&null==e._a[Ot]&&null==e._a[Pt]&&q(e),e._dayOfYear&&(a=t(e._a[Yt],r[Yt]),e._dayOfYear>$(a)&&(e._pf._overflowDayOfYear=!0),i=at(a,0,e._dayOfYear),e._a[Pt]=i.getUTCMonth(),e._a[Ot]=i.getUTCDate()),n=0;3>n&&null==e._a[n];++n)e._a[n]=s[n]=r[n];for(;7>n;n++)e._a[n]=s[n]=null==e._a[n]?2===n?1:0:e._a[n];24===e._a[$t]&&0===e._a[Ct]&&0===e._a[jt]&&0===e._a[It]&&(e._nextDay=!0,e._a[$t]=0),e._d=(e._useUTC?at:rt).apply(null,s),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[$t]=24)}}function V(e){var t;e._d||(t=T(e._i),e._a=[t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],B(e))}function Z(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function J(t){if(t._f===wt.ISO_8601)return void et(t);t._a=[],t._pf.empty=!0;var n,i,r,a,s,o=""+t._i,u=o.length,l=0;for(r=z(t._f,t._locale).match(Ht)||[],n=0;n<r.length;n++)a=r[n],i=(o.match(W(a,t))||[])[0],i&&(s=o.substr(0,o.indexOf(i)),s.length>0&&t._pf.unusedInput.push(s),o=o.slice(o.indexOf(i)+i.length),l+=i.length),vn[a]?(i?t._pf.empty=!1:t._pf.unusedTokens.push(a),G(a,i,t)):t._strict&&!i&&t._pf.unusedTokens.push(a);t._pf.charsLeftOver=u-l,o.length>0&&t._pf.unusedInput.push(o),t._pf.bigHour===!0&&t._a[$t]<=12&&(t._pf.bigHour=e),t._a[$t]=c(t._locale,t._a[$t],t._meridiem),B(t),j(t)}function K(e){return e.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,i,r){return t||n||i||r})}function X(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Q(e){var t,n,r,a,s;if(0===e._f.length)return e._pf.invalidFormat=!0,void(e._d=new Date(0/0));for(a=0;a<e._f.length;a++)s=0,t=p({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._pf=i(),t._f=e._f[a],J(t),I(t)&&(s+=t._pf.charsLeftOver,s+=10*t._pf.unusedTokens.length,t._pf.score=s,(null==r||r>s)&&(r=s,n=t));m(e,n||t)}function et(e){var t,n,i=e._i,r=sn.exec(i);if(r){for(e._pf.iso=!0,t=0,n=un.length;n>t;t++)if(un[t][1].exec(i)){e._f=un[t][0]+(r[6]||" ");break}for(t=0,n=ln.length;n>t;t++)if(ln[t][1].exec(i)){e._f+=ln[t][0];break}i.match(Zt)&&(e._f+="Z"),J(e)}else e._isValid=!1}function tt(e){et(e),e._isValid===!1&&(delete e._isValid,wt.createFromInputFallback(e))}function nt(e,t){var n,i=[];for(n=0;n<e.length;++n)i.push(t(e[n],n));return i}function it(t){var n,i=t._i;i===e?t._d=new Date:D(i)?t._d=new Date(+i):null!==(n=Ft.exec(i))?t._d=new Date(+n[1]):"string"==typeof i?tt(t):M(i)?(t._a=nt(i.slice(0),function(e){return parseInt(e,10)}),B(t)):"object"==typeof i?V(t):"number"==typeof i?t._d=new Date(i):wt.createFromInputFallback(t)}function rt(e,t,n,i,r,a,s){var o=new Date(e,t,n,i,r,a,s);return 1970>e&&o.setFullYear(e),o}function at(e){var t=new Date(Date.UTC.apply(null,arguments));return 1970>e&&t.setUTCFullYear(e),t}function st(e,t){if("string"==typeof e)if(isNaN(e)){if(e=t.weekdaysParse(e),"number"!=typeof e)return null}else e=parseInt(e,10);return e}function ot(e,t,n,i,r){return r.relativeTime(t||1,!!n,e,i)}function ut(e,t,n){var i=wt.duration(e).abs(),r=Tt(i.as("s")),a=Tt(i.as("m")),s=Tt(i.as("h")),o=Tt(i.as("d")),u=Tt(i.as("M")),l=Tt(i.as("y")),c=r<pn.s&&["s",r]||1===a&&["m"]||a<pn.m&&["mm",a]||1===s&&["h"]||s<pn.h&&["hh",s]||1===o&&["d"]||o<pn.d&&["dd",o]||1===u&&["M"]||u<pn.M&&["MM",u]||1===l&&["y"]||["yy",l];return c[2]=t,c[3]=+e>0,c[4]=n,ot.apply({},c)}function lt(e,t,n){var i,r=n-t,a=n-e.day();return a>r&&(a-=7),r-7>a&&(a+=7),i=wt(e).add(a,"d"),{week:Math.ceil(i.dayOfYear()/7),year:i.year()}}function ct(e,t,n,i,r){var a,s,o=at(e,0,1).getUTCDay();return o=0===o?7:o,n=null!=n?n:r,a=r-o+(o>i?7:0)-(r>o?7:0),s=7*(t-1)+(n-r)+a+1,{year:s>0?e:e-1,dayOfYear:s>0?s:$(e-1)+s}}function dt(t){var n,i=t._i,r=t._f;return t._locale=t._locale||wt.localeData(t._l),null===i||r===e&&""===i?wt.invalid({nullInput:!0}):("string"==typeof i&&(t._i=i=t._locale.preparse(i)),wt.isMoment(i)?new h(i,!0):(r?M(r)?Q(t):J(t):it(t),n=new h(t),n._nextDay&&(n.add(1,"d"),n._nextDay=e),n))}function ht(e,t){var n,i;if(1===t.length&&M(t[0])&&(t=t[0]),!t.length)return wt();for(n=t[0],i=1;i<t.length;++i)t[i][e](n)&&(n=t[i]);return n}function ft(e,t){var n;return"string"==typeof t&&(t=e.localeData().monthsParse(t),"number"!=typeof t)?e:(n=Math.min(e.date(),P(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e)}function mt(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function pt(e,t,n){return"Month"===t?ft(e,n):e._d["set"+(e._isUTC?"UTC":"")+t](n)}function _t(e,t){return function(n){return null!=n?(pt(this,e,n),wt.updateOffset(this,t),this):mt(this,e)}}function gt(e){return 400*e/146097}function vt(e){return 146097*e/400}function yt(e){wt.duration.fn[e]=function(){return this._data[e]}}function bt(e){"undefined"==typeof ender&&(Mt=xt.moment,xt.moment=e?a("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",wt):wt)}for(var wt,Mt,Dt,kt="2.9.0",xt="undefined"==typeof global||"undefined"!=typeof window&&window!==global.window?this:global,Tt=Math.round,St=Object.prototype.hasOwnProperty,Yt=0,Pt=1,Ot=2,$t=3,Ct=4,jt=5,It=6,Et={},At=[],Lt="undefined"!=typeof module&&module&&module.exports,Ft=/^\/?Date\((\-?\d+)/i,Nt=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Ut=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,Ht=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,zt=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Wt=/\d\d?/,Rt=/\d{1,3}/,Gt=/\d{1,4}/,qt=/[+\-]?\d{1,6}/,Bt=/\d+/,Vt=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Zt=/Z|[\+\-]\d\d:?\d\d/gi,Jt=/T/i,Kt=/[\+\-]?\d+/,Xt=/[\+\-]?\d+(\.\d{1,3})?/,Qt=/\d/,en=/\d\d/,tn=/\d{3}/,nn=/\d{4}/,rn=/[+-]?\d{6}/,an=/[+-]?\d+/,sn=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,on="YYYY-MM-DDTHH:mm:ssZ",un=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],ln=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],cn=/([\+\-]|\d\d)/gi,dn=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),hn={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},fn={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},mn={},pn={s:45,m:45,h:22,d:26,M:11},_n="DDD w W M D d".split(" "),gn="M D H h m s w W".split(" "),vn={M:function(){return this.month()+1},MMM:function(e){return this.localeData().monthsShort(this,e)},MMMM:function(e){return this.localeData().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.localeData().weekdaysMin(this,e)},ddd:function(e){return this.localeData().weekdaysShort(this,e)},dddd:function(e){return this.localeData().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return g(this.year()%100,2)},YYYY:function(){return g(this.year(),4)},YYYYY:function(){return g(this.year(),5)},YYYYYY:function(){var e=this.year(),t=e>=0?"+":"-";return t+g(Math.abs(e),6)},gg:function(){return g(this.weekYear()%100,2)},gggg:function(){return g(this.weekYear(),4)},ggggg:function(){return g(this.weekYear(),5)},GG:function(){return g(this.isoWeekYear()%100,2)},GGGG:function(){return g(this.isoWeekYear(),4)},GGGGG:function(){return g(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return Y(this.milliseconds()/100)},SS:function(){return g(Y(this.milliseconds()/10),2)},SSS:function(){return g(this.milliseconds(),3)},SSSS:function(){return g(this.milliseconds(),3)},Z:function(){var e=this.utcOffset(),t="+";return 0>e&&(e=-e,t="-"),t+g(Y(e/60),2)+":"+g(Y(e)%60,2)},ZZ:function(){var e=this.utcOffset(),t="+";return 0>e&&(e=-e,t="-"),t+g(Y(e/60),2)+g(Y(e)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},x:function(){return this.valueOf()},X:function(){return this.unix()},Q:function(){return this.quarter()}},yn={},bn=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"],wn=!1;_n.length;)Dt=_n.pop(),vn[Dt+"o"]=u(vn[Dt],Dt);for(;gn.length;)Dt=gn.pop(),vn[Dt+Dt]=o(vn[Dt],2);vn.DDDD=o(vn.DDD,3),m(d.prototype,{set:function(e){var t,n;for(n in e)t=e[n],"function"==typeof t?this[n]=t:this["_"+n]=t;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e,t,n){var i,r,a;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;12>i;i++){if(r=wt.utc([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(a="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[i]=new RegExp(a.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[i].test(e))return i;if(n&&"MMM"===t&&this._shortMonthsParse[i].test(e))return i;if(!n&&this._monthsParse[i].test(e))return i}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var t,n,i;for(this._weekdaysParse||(this._weekdaysParse=[]),t=0;7>t;t++)if(this._weekdaysParse[t]||(n=wt([2e3,1]).day(t),i="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[t]=new RegExp(i.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t},_longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},isPM:function(e){return"p"===(e+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t,n){var i=this._calendar[e];return"function"==typeof i?i.apply(t,[n]):i},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,n,i){var r=this._relativeTime[n];return"function"==typeof r?r(e,t,n,i):r.replace(/%d/i,e)},pastFuture:function(e,t){var n=this._relativeTime[e>0?"future":"past"];return"function"==typeof n?n(t):n.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",_ordinalParse:/\d{1,2}/,preparse:function(e){return e},postformat:function(e){return e},week:function(e){return lt(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},firstDayOfWeek:function(){return this._week.dow},firstDayOfYear:function(){return this._week.doy},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),wt=function(t,n,r,a){var s;return"boolean"==typeof r&&(a=r,r=e),s={},s._isAMomentObject=!0,s._i=t,s._f=n,s._l=r,s._strict=a,s._isUTC=!1,s._pf=i(),dt(s)},wt.suppressDeprecationWarnings=!1,wt.createFromInputFallback=a("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),wt.min=function(){var e=[].slice.call(arguments,0);return ht("isBefore",e)},wt.max=function(){var e=[].slice.call(arguments,0);return ht("isAfter",e)},wt.utc=function(t,n,r,a){var s;return"boolean"==typeof r&&(a=r,r=e),s={},s._isAMomentObject=!0,s._useUTC=!0,s._isUTC=!0,s._l=r,s._i=t,s._f=n,s._strict=a,s._pf=i(),dt(s).utc()},wt.unix=function(e){return wt(1e3*e)},wt.duration=function(e,t){var i,r,a,s,o=e,u=null;return wt.isDuration(e)?o={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(o={},t?o[t]=e:o.milliseconds=e):(u=Nt.exec(e))?(i="-"===u[1]?-1:1,o={y:0,d:Y(u[Ot])*i,h:Y(u[$t])*i,m:Y(u[Ct])*i,s:Y(u[jt])*i,ms:Y(u[It])*i}):(u=Ut.exec(e))?(i="-"===u[1]?-1:1,a=function(e){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*i},o={y:a(u[2]),M:a(u[3]),d:a(u[4]),h:a(u[5]),m:a(u[6]),s:a(u[7]),w:a(u[8])}):null==o?o={}:"object"==typeof o&&("from"in o||"to"in o)&&(s=y(wt(o.from),wt(o.to)),o={},o.ms=s.milliseconds,o.M=s.months),r=new f(o),wt.isDuration(e)&&n(e,"_locale")&&(r._locale=e._locale),r},wt.version=kt,wt.defaultFormat=on,wt.ISO_8601=function(){},wt.momentProperties=At,wt.updateOffset=function(){},wt.relativeTimeThreshold=function(t,n){return pn[t]===e?!1:n===e?pn[t]:(pn[t]=n,!0)},wt.lang=a("moment.lang is deprecated. Use moment.locale instead.",function(e,t){return wt.locale(e,t)}),wt.locale=function(e,t){var n;return e&&(n="undefined"!=typeof t?wt.defineLocale(e,t):wt.localeData(e),n&&(wt.duration._locale=wt._locale=n)),wt._locale._abbr},wt.defineLocale=function(e,t){return null!==t?(t.abbr=e,Et[e]||(Et[e]=new d),Et[e].set(t),wt.locale(e),Et[e]):(delete Et[e],null)},wt.langData=a("moment.langData is deprecated. Use moment.localeData instead.",function(e){return wt.localeData(e)}),wt.localeData=function(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return wt._locale;if(!M(e)){if(t=L(e))return t;e=[e]}return A(e)},wt.isMoment=function(e){return e instanceof h||null!=e&&n(e,"_isAMomentObject")},wt.isDuration=function(e){return e instanceof f};for(Dt=bn.length-1;Dt>=0;--Dt)S(bn[Dt]);wt.normalizeUnits=function(e){return x(e)},wt.invalid=function(e){var t=wt.utc(0/0);return null!=e?m(t._pf,e):t._pf.userInvalidated=!0,t},wt.parseZone=function(){return wt.apply(null,arguments).parseZone()},wt.parseTwoDigitYear=function(e){return Y(e)+(Y(e)>68?1900:2e3)},wt.isDate=D,m(wt.fn=h.prototype,{clone:function(){return wt(this)},valueOf:function(){return+this._d-6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var e=wt(this).utc();return 0<e.year()&&e.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():H(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):H(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return I(this)},isDSTShifted:function(){return this._a?this.isValid()&&k(this._a,(this._isUTC?wt.utc(this._a):wt(this._a)).toArray())>0:!1},parsingFlags:function(){return m({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(e){return this.utcOffset(0,e)},local:function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(this._dateUtcOffset(),"m")),this},format:function(e){var t=H(this,e||wt.defaultFormat);return this.localeData().postformat(t)},add:b(1,"add"),subtract:b(-1,"subtract"),diff:function(e,t,n){var i,r,a=F(e,this),s=6e4*(a.utcOffset()-this.utcOffset());return t=x(t),"year"===t||"month"===t||"quarter"===t?(r=l(this,a),"quarter"===t?r/=3:"year"===t&&(r/=12)):(i=this-a,r="second"===t?i/1e3:"minute"===t?i/6e4:"hour"===t?i/36e5:"day"===t?(i-s)/864e5:"week"===t?(i-s)/6048e5:i),n?r:_(r)},from:function(e,t){return wt.duration({to:this,from:e}).locale(this.locale()).humanize(!t)},fromNow:function(e){return this.from(wt(),e)},calendar:function(e){var t=e||wt(),n=F(t,this).startOf("day"),i=this.diff(n,"days",!0),r=-6>i?"sameElse":-1>i?"lastWeek":0>i?"lastDay":1>i?"sameDay":2>i?"nextDay":7>i?"nextWeek":"sameElse";return this.format(this.localeData().calendar(r,this,wt(t)))},isLeapYear:function(){return C(this.year())},isDST:function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=st(e,this.localeData()),this.add(e-t,"d")):t},month:_t("Month",!0),startOf:function(e){switch(e=x(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e?this.weekday(0):"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(t){return t=x(t),t===e||"millisecond"===t?this:this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms")},isAfter:function(e,t){var n;return t=x("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=wt.isMoment(e)?e:wt(e),+this>+e):(n=wt.isMoment(e)?+e:+wt(e),n<+this.clone().startOf(t))},isBefore:function(e,t){var n;return t=x("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=wt.isMoment(e)?e:wt(e),+e>+this):(n=wt.isMoment(e)?+e:+wt(e),+this.clone().endOf(t)<n)},isBetween:function(e,t,n){return this.isAfter(e,n)&&this.isBefore(t,n)},isSame:function(e,t){var n;return t=x(t||"millisecond"),"millisecond"===t?(e=wt.isMoment(e)?e:wt(e),+this===+e):(n=+wt(e),+this.clone().startOf(t)<=n&&n<=+this.clone().endOf(t))},min:a("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(e){return e=wt.apply(null,arguments),this>e?this:e}),max:a("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(e){return e=wt.apply(null,arguments),e>this?this:e}),zone:a("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",function(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}),utcOffset:function(e,t){var n,i=this._offset||0;return null!=e?("string"==typeof e&&(e=R(e)),Math.abs(e)<16&&(e=60*e),!this._isUTC&&t&&(n=this._dateUtcOffset()),this._offset=e,this._isUTC=!0,null!=n&&this.add(n,"m"),i!==e&&(!t||this._changeInProgress?w(this,wt.duration(e-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,wt.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?i:this._dateUtcOffset()},isLocal:function(){return!this._isUTC},isUtcOffset:function(){return this._isUTC},isUtc:function(){return this._isUTC&&0===this._offset},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(R(this._i)),this},hasAlignedHourOffset:function(e){return e=e?wt(e).utcOffset():0,(this.utcOffset()-e)%60===0},daysInMonth:function(){return P(this.year(),this.month())},dayOfYear:function(e){var t=Tt((wt(this).startOf("day")-wt(this).startOf("year"))/864e5)+1;
return null==e?t:this.add(e-t,"d")},quarter:function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},weekYear:function(e){var t=lt(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==e?t:this.add(e-t,"y")},isoWeekYear:function(e){var t=lt(this,1,4).year;return null==e?t:this.add(e-t,"y")},week:function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},isoWeek:function(e){var t=lt(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},weekday:function(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},isoWeekday:function(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)},isoWeeksInYear:function(){return O(this.year(),1,4)},weeksInYear:function(){var e=this.localeData()._week;return O(this.year(),e.dow,e.doy)},get:function(e){return e=x(e),this[e]()},set:function(e,t){var n;if("object"==typeof e)for(n in e)this.set(n,e[n]);else e=x(e),"function"==typeof this[e]&&this[e](t);return this},locale:function(t){var n;return t===e?this._locale._abbr:(n=wt.localeData(t),null!=n&&(this._locale=n),this)},lang:a("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===e?this.localeData():this.locale(t)}),localeData:function(){return this._locale},_dateUtcOffset:function(){return 15*-Math.round(this._d.getTimezoneOffset()/15)}}),wt.fn.millisecond=wt.fn.milliseconds=_t("Milliseconds",!1),wt.fn.second=wt.fn.seconds=_t("Seconds",!1),wt.fn.minute=wt.fn.minutes=_t("Minutes",!1),wt.fn.hour=wt.fn.hours=_t("Hours",!0),wt.fn.date=_t("Date",!0),wt.fn.dates=a("dates accessor is deprecated. Use date instead.",_t("Date",!0)),wt.fn.year=_t("FullYear",!0),wt.fn.years=a("years accessor is deprecated. Use year instead.",_t("FullYear",!0)),wt.fn.days=wt.fn.day,wt.fn.months=wt.fn.month,wt.fn.weeks=wt.fn.week,wt.fn.isoWeeks=wt.fn.isoWeek,wt.fn.quarters=wt.fn.quarter,wt.fn.toJSON=wt.fn.toISOString,wt.fn.isUTC=wt.fn.isUtc,m(wt.duration.fn=f.prototype,{_bubble:function(){var e,t,n,i=this._milliseconds,r=this._days,a=this._months,s=this._data,o=0;s.milliseconds=i%1e3,e=_(i/1e3),s.seconds=e%60,t=_(e/60),s.minutes=t%60,n=_(t/60),s.hours=n%24,r+=_(n/24),o=_(gt(r)),r-=_(vt(o)),a+=_(r/30),r%=30,o+=_(a/12),a%=12,s.days=r,s.months=a,s.years=o},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return _(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*Y(this._months/12)},humanize:function(e){var t=ut(this,!e,this.localeData());return e&&(t=this.localeData().pastFuture(+this,t)),this.localeData().postformat(t)},add:function(e,t){var n=wt.duration(e,t);return this._milliseconds+=n._milliseconds,this._days+=n._days,this._months+=n._months,this._bubble(),this},subtract:function(e,t){var n=wt.duration(e,t);return this._milliseconds-=n._milliseconds,this._days-=n._days,this._months-=n._months,this._bubble(),this},get:function(e){return e=x(e),this[e.toLowerCase()+"s"]()},as:function(e){var t,n;if(e=x(e),"month"===e||"year"===e)return t=this._days+this._milliseconds/864e5,n=this._months+12*gt(t),"month"===e?n:n/12;switch(t=this._days+Math.round(vt(this._months/12)),e){case"week":return t/7+this._milliseconds/6048e5;case"day":return t+this._milliseconds/864e5;case"hour":return 24*t+this._milliseconds/36e5;case"minute":return 24*t*60+this._milliseconds/6e4;case"second":return 24*t*60*60+this._milliseconds/1e3;case"millisecond":return Math.floor(24*t*60*60*1e3)+this._milliseconds;default:throw new Error("Unknown unit "+e)}},lang:wt.fn.lang,locale:wt.fn.locale,toIsoString:a("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var e=Math.abs(this.years()),t=Math.abs(this.months()),n=Math.abs(this.days()),i=Math.abs(this.hours()),r=Math.abs(this.minutes()),a=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(n?n+"D":"")+(i||r||a?"T":"")+(i?i+"H":"")+(r?r+"M":"")+(a?a+"S":""):"P0D"},localeData:function(){return this._locale},toJSON:function(){return this.toISOString()}}),wt.duration.fn.toString=wt.duration.fn.toISOString;for(Dt in dn)n(dn,Dt)&&yt(Dt.toLowerCase());wt.duration.fn.asMilliseconds=function(){return this.as("ms")},wt.duration.fn.asSeconds=function(){return this.as("s")},wt.duration.fn.asMinutes=function(){return this.as("m")},wt.duration.fn.asHours=function(){return this.as("h")},wt.duration.fn.asDays=function(){return this.as("d")},wt.duration.fn.asWeeks=function(){return this.as("weeks")},wt.duration.fn.asMonths=function(){return this.as("M")},wt.duration.fn.asYears=function(){return this.as("y")},wt.locale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=1===Y(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+n}}),function(e){e(wt)}(function(e){function t(e){return e>1&&5>e&&1!==~~(e/10)}function n(e,n,i,r){var a=e+" ";switch(i){case"s":return n||r?"pár sekund":"pár sekundami";case"m":return n?"minuta":r?"minutu":"minutou";case"mm":return n||r?a+(t(e)?"minuty":"minut"):a+"minutami";case"h":return n?"hodina":r?"hodinu":"hodinou";case"hh":return n||r?a+(t(e)?"hodiny":"hodin"):a+"hodinami";case"d":return n||r?"den":"dnem";case"dd":return n||r?a+(t(e)?"dny":"dní"):a+"dny";case"M":return n||r?"měsíc":"měsícem";case"MM":return n||r?a+(t(e)?"měsíce":"měsíců"):a+"měsíci";case"y":return n||r?"rok":"rokem";case"yy":return n||r?a+(t(e)?"roky":"let"):a+"lety"}}var i="leden_únor_březen_duben_květen_červen_červenec_srpen_září_říjen_listopad_prosinec".split("_"),r="led_úno_bře_dub_kvě_čvn_čvc_srp_zář_říj_lis_pro".split("_");return e.defineLocale("cs",{months:i,monthsShort:r,monthsParse:function(e,t){var n,i=[];for(n=0;12>n;n++)i[n]=new RegExp("^"+e[n]+"$|^"+t[n]+"$","i");return i}(i,r),weekdays:"neděle_pondělí_úterý_středa_čtvrtek_pátek_sobota".split("_"),weekdaysShort:"ne_po_út_st_čt_pá_so".split("_"),weekdaysMin:"ne_po_út_st_čt_pá_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd D. MMMM YYYY LT"},calendar:{sameDay:"[dnes v] LT",nextDay:"[zítra v] LT",nextWeek:function(){switch(this.day()){case 0:return"[v neděli v] LT";case 1:case 2:return"[v] dddd [v] LT";case 3:return"[ve středu v] LT";case 4:return"[ve čtvrtek v] LT";case 5:return"[v pátek v] LT";case 6:return"[v sobotu v] LT"}},lastDay:"[včera v] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulou neděli v] LT";case 1:case 2:return"[minulé] dddd [v] LT";case 3:return"[minulou středu v] LT";case 4:case 5:return"[minulý] dddd [v] LT";case 6:return"[minulou sobotu v] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"před %s",s:n,m:n,mm:n,h:n,hh:n,d:n,dd:n,M:n,MM:n,y:n,yy:n},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}),wt.locale("en"),Lt?module.exports=wt:"function"==typeof define&&define.amd?(define("vendor/moment",["require","exports","module"],function(e,t,n){return n.config&&n.config()&&n.config().noGlobal===!0&&(xt.moment=Mt),wt}),bt(!0)):bt()}.call(this),function(e,t){"function"==typeof define&&define.amd?define("vendor/handlebars.runtime",[],t):"object"==typeof exports?module.exports=t():e.Handlebars=t()}(this,function(){var e=function(){function e(e){return u[e]}function t(e){for(var t=1;t<arguments.length;t++)for(var n in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],n)&&(e[n]=arguments[t][n]);return e}function n(e,t){for(var n=0,i=e.length;i>n;n++)if(e[n]===t)return n;return-1}function i(t){return t&&t.toHTML?t.toHTML():null==t?"":t?(t=""+t,c.test(t)?t.replace(l,e):t):t+""}function r(e){return e||0===e?f(e)&&0===e.length?!0:!1:!0}function a(e,t){return e.path=t,e}function s(e,t){return(e?e+".":"")+t}var o={},u={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},l=/[&<>"'`]/g,c=/[&<>"'`]/;o.extend=t;var d=Object.prototype.toString;o.toString=d;var h=function(e){return"function"==typeof e};h(/x/)&&(h=function(e){return"function"==typeof e&&"[object Function]"===d.call(e)});var h;o.isFunction=h;var f=Array.isArray||function(e){return e&&"object"==typeof e?"[object Array]"===d.call(e):!1};return o.isArray=f,o.indexOf=n,o.escapeExpression=i,o.isEmpty=r,o.blockParams=a,o.appendContextPath=s,o}(),t=function(){function e(e,t){var i,r,a=t&&t.loc;a&&(i=a.start.line,r=a.start.column,e+=" - "+i+":"+r);for(var s=Error.prototype.constructor.call(this,e),o=0;o<n.length;o++)this[n[o]]=s[n[o]];a&&(this.lineNumber=i,this.column=r)}var t,n=["description","fileName","lineNumber","message","name","number","stack"];return e.prototype=new Error,t=e}(),n=function(e,t){function n(e,t){this.helpers=e||{},this.partials=t||{},i(this)}function i(e){e.registerHelper("helperMissing",function(){if(1===arguments.length)return void 0;throw new s("Missing helper: '"+arguments[arguments.length-1].name+"'")}),e.registerHelper("blockHelperMissing",function(t,n){var i=n.inverse,r=n.fn;if(t===!0)return r(this);if(t===!1||null==t)return i(this);if(c(t))return t.length>0?(n.ids&&(n.ids=[n.name]),e.helpers.each(t,n)):i(this);if(n.data&&n.ids){var s=_(n.data);s.contextPath=a.appendContextPath(n.data.contextPath,n.name),n={data:s}}return r(t,n)}),e.registerHelper("each",function(e,t){function n(t,n,s){i&&(i.key=t,i.index=n,i.first=0===n,i.last=!!s,r&&(i.contextPath=r+t)),h+=o(e[t],{data:i,blockParams:a.blockParams([e[t],t],[r+t,null])})}if(!t)throw new s("Must pass iterator to #each");var i,r,o=t.fn,u=t.inverse,l=0,h="";if(t.data&&t.ids&&(r=a.appendContextPath(t.data.contextPath,t.ids[0])+"."),d(e)&&(e=e.call(this)),t.data&&(i=_(t.data)),e&&"object"==typeof e)if(c(e))for(var f=e.length;f>l;l++)n(l,l,l===e.length-1);else{var m;for(var p in e)e.hasOwnProperty(p)&&(m&&n(m,l-1),m=p,l++);m&&n(m,l-1,!0)}return 0===l&&(h=u(this)),h}),e.registerHelper("if",function(e,t){return d(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||a.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,n){return e.helpers["if"].call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})}),e.registerHelper("with",function(e,t){d(e)&&(e=e.call(this));var n=t.fn;if(a.isEmpty(e))return t.inverse(this);if(t.data&&t.ids){var i=_(t.data);i.contextPath=a.appendContextPath(t.data.contextPath,t.ids[0]),t={data:i}}return n(e,t)}),e.registerHelper("log",function(t,n){var i=n.data&&null!=n.data.level?parseInt(n.data.level,10):1;e.log(i,t)}),e.registerHelper("lookup",function(e,t){return e&&e[t]})}var r={},a=e,s=t,o="3.0.0";r.VERSION=o;var u=6;r.COMPILER_REVISION=u;var l={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1"};r.REVISION_CHANGES=l;var c=a.isArray,d=a.isFunction,h=a.toString,f="[object Object]";r.HandlebarsEnvironment=n,n.prototype={constructor:n,logger:m,log:p,registerHelper:function(e,t){if(h.call(e)===f){if(t)throw new s("Arg not supported with multiple helpers");a.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){if(h.call(e)===f)a.extend(this.partials,e);else{if("undefined"==typeof t)throw new s("Attempting to register a partial as undefined");this.partials[e]=t}},unregisterPartial:function(e){delete this.partials[e]}};var m={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:1,log:function(e,t){if("undefined"!=typeof console&&m.level<=e){var n=m.methodMap[e];(console[n]||console.log).call(console,t)}}};r.logger=m;var p=m.log;r.log=p;var _=function(e){var t=a.extend({},e);return t._parent=e,t};return r.createFrame=_,r}(e,t),i=function(){function e(e){this.string=e}var t;return e.prototype.toString=e.prototype.toHTML=function(){return""+this.string},t=e}(),r=function(e,t,n){function i(e){var t=e&&e[0]||1,n=f;if(t!==n){if(n>t){var i=m[n],r=m[t];throw new h("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+i+") or downgrade your runtime to an older version ("+r+").")}throw new h("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}}function r(e,t){if(!t)throw new h("No environment passed to template");if(!e||!e.main)throw new h("Unknown template object: "+typeof e);t.VM.checkRevision(e.compiler);var n=function(n,i,r){r.hash&&(i=d.extend({},i,r.hash)),n=t.VM.resolvePartial.call(this,n,i,r);var a=t.VM.invokePartial.call(this,n,i,r);if(null==a&&t.compile&&(r.partials[r.name]=t.compile(n,e.compilerOptions,t),a=r.partials[r.name](i,r)),null!=a){if(r.indent){for(var s=a.split("\n"),o=0,u=s.length;u>o&&(s[o]||o+1!==u);o++)s[o]=r.indent+s[o];a=s.join("\n")}return a}throw new h("The partial "+r.name+" could not be compiled when running in runtime-only mode")},i={strict:function(e,t){if(!(t in e))throw new h('"'+t+'" not defined in '+e);return e[t]},lookup:function(e,t){for(var n=e.length,i=0;n>i;i++)if(e[i]&&null!=e[i][t])return e[i][t]},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:d.escapeExpression,invokePartial:n,fn:function(t){return e[t]},programs:[],program:function(e,t,n,i,r){var s=this.programs[e],o=this.fn(e);return t||r||i||n?s=a(this,e,o,t,n,i,r):s||(s=this.programs[e]=a(this,e,o)),s},data:function(e,t){for(;e&&t--;)e=e._parent;return e},merge:function(e,t){var n=e||t;return e&&t&&e!==t&&(n=d.extend({},t,e)),n},noop:t.VM.noop,compilerInfo:e.compiler},r=function(t,n){n=n||{};var a=n.data;r._setup(n),!n.partial&&e.useData&&(a=l(t,a));var s,o=e.useBlockParams?[]:void 0;return e.useDepths&&(s=n.depths?[t].concat(n.depths):[t]),e.main.call(i,t,i.helpers,i.partials,a,o,s)};return r.isTop=!0,r._setup=function(n){n.partial?(i.helpers=n.helpers,i.partials=n.partials):(i.helpers=i.merge(n.helpers,t.helpers),e.usePartial&&(i.partials=i.merge(n.partials,t.partials)))},r._child=function(t,n,r,s){if(e.useBlockParams&&!r)throw new h("must pass block params");if(e.useDepths&&!s)throw new h("must pass parent depths");return a(i,t,e[t],n,0,r,s)},r}function a(e,t,n,i,r,a,s){var o=function(t,r){return r=r||{},n.call(e,t,e.helpers,e.partials,r.data||i,a&&[r.blockParams].concat(a),s&&[t].concat(s))};return o.program=t,o.depth=s?s.length:0,o.blockParams=r||0,o}function s(e,t,n){return e?e.call||n.name||(n.name=e,e=n.partials[e]):e=n.partials[n.name],e}function o(e,t,n){if(n.partial=!0,void 0===e)throw new h("The partial "+n.name+" could not be found");return e instanceof Function?e(t,n):void 0}function u(){return""}function l(e,t){return t&&"root"in t||(t=t?p(t):{},t.root=e),t}var c={},d=e,h=t,f=n.COMPILER_REVISION,m=n.REVISION_CHANGES,p=n.createFrame;return c.checkRevision=i,c.template=r,c.program=a,c.resolvePartial=s,c.invokePartial=o,c.noop=u,c}(e,t,n),a=function(e,t,n,i,r){var a,s=e,o=t,u=n,l=i,c=r,d=function(){var e=new s.HandlebarsEnvironment;return l.extend(e,s),e.SafeString=o,e.Exception=u,e.Utils=l,e.escapeExpression=l.escapeExpression,e.VM=c,e.template=function(t){return c.template(t,e)},e},h=d();h.create=d;var f="undefined"!=typeof global?global:window,m=f.Handlebars;return h.noConflict=function(){f.Handlebars===h&&(f.Handlebars=m)},h["default"]=h,a=h}(n,i,t,e,r);return a}),define("translation/cs",{Project:"Projekt",Subject:"Předmět",Assignee:"Přiřazeno",Status:"Stav",Done:"Hotovo","Due date":"Uzavřít do","Updated on":"Aktualizováno","Assigned to":"Přiřazeno","Open Timey":"Otevřít Timey",maybe:"možná","Show details":"Zobrazit detaily","Planned absences":"Plánované nepřítomnosti",refresh:"obnovit","Not available from %0 to %1":"Nedostupný od %0 do %1","Not available %0":"Nedostupný %0",author:"autor","My issues":"Mé úkoly","No issues":"Žádné úkoly","Overdue issues":"Úkoly s vypršeným Uzavřít do","select random":"zobrazit náhodný","show all":"zobrazit všechny","Add to editor":"Přidat do editoru","Last viewed issue":"Poslední zobrazený úkol","I wanna work!":"Chci práci!"}),define("translation/en",{}),define("lib/translate",["translation/cs","translation/en"],function(e,t){var n=$("html").attr("lang");return function(i){return"cs"===n&&i in e?e[i]:"en"===n&&i in t?t[i]:i}}),define("template/helper/translate",["vendor/handlebars.runtime","lib/translate"],function(e,t){e.registerHelper("_",function(e){for(var n=t(e),i=1;i<arguments.length-1;i++)n=n.replace("%"+(i-1),arguments[i]);return n})}),define("template/helper/dayFromDate",["vendor/handlebars.runtime"],function(e){e.registerHelper("dayFromDate",function(e){return parseInt(e.split("-")[2])})}),define("template/helper/trim",["vendor/handlebars.runtime"],function(e){e.registerHelper("trim",function(e){return e.trim()})}),define("template/helper/is",["vendor/handlebars.runtime"],function(e){e.registerHelper("is",function(e,t,n){return e===t?n.fn(this):n.inverse(this)})}),define("template/helper/isEven",["vendor/handlebars.runtime"],function(e){e.registerHelper("isEven",function(e,t){return e%2===0?t.fn(this):t.inverse(this)})}),define("template/helper/isNotEmpty",["vendor/handlebars.runtime"],function(e){e.registerHelper("isNotEmpty",function(e,t){return e&&0!==e.length?t.fn(this):t.inverse(this)})}),define("template/helper/monthFromDate",["vendor/handlebars.runtime","vendor/moment"],function(e,t){e.registerHelper("monthFromDate",function(e){var n=e.split("-"),i=n[1],r=n[0],a=t().year(parseInt(r,10)).month(parseInt(i,10)-1).format("MMMM");return a.charAt(0).toUpperCase()+a.slice(1)})}),define("template/helper/redmineTime",["vendor/handlebars.runtime","vendor/moment"],function(e,t){e.registerHelper("redmineTime",function(e){return t(e).format("YYYY-MM-DD HH:mm")})}),define("lib/local_storage",[],function(){function e(e){var t=0;if(0==e)return t;for(var n=0;n<e.length;n++){var i=e.charCodeAt(n);t=(t<<5)-t+i,t&=t}return t}function t(e,t){if(-1!==e.indexOf("."))throw new Error('Key cannot contains dot character, "'+e+'" given.');return void 0!==t?r+"."+e+"."+t:r+"."+e}function n(e){var n;return null!==(n=i.getItem(t(e,"expire")))&&new Date>new Date(parseInt(n))?!0:!1}var i=window.localStorage,r="theme";return{set:function(e,n,r){if(void 0!==r){var a=(new Date).getTime()+3600*r*1e3;i.setItem(t(e,"expire"),a)}return i.setItem(t(e),n)},setJsonCache:function(t,n,i,r){return this.set(t+":"+e(n),JSON.stringify(i),r)},get:function(e){return n(e)?(this.remove(e),null):i.getItem(t(e))},getJsonCache:function(t,n){var i=this.get(t+":"+e(n));return i?JSON.parse(i):null},remove:function(e){return i.removeItem(t(e,"expire")),i.removeItem(t(e))},removeExpired:function(){for(var e in localStorage){var t=e.split(".");if(2===t.length&&t[0]===r){var i=t[1];n(i)&&this.remove(i)}}}}}),define("lib/redmine_api",["lib/local_storage"],function(e){return function(){function t(e){var t=0;if(0==e)return t;for(var n=0;n<e.length;n++){var i=e.charCodeAt(n);t=(t<<5)-t+i,t&=t}return t}if("undefined"==typeof jQuery)throw new Error("Redmine API require jQuery library");var n=jQuery;this.getRedmineApiKey=function(t){var i=e.get("rma:redmineApiKey");return i?void t(i):void n.get("/my/account").done(function(r){if(i=n(r).find("#api-access-key").text(),!i)throw new Error("Cannot find Redmine API access key in element #api-access-key on page /my/account.");e.set("rma:redmineApiKey",i),t(i)}).fail(function(){throw new Error("Cannot load page /my/account for getting Redmine API access key.")})},this.get=function(e,t,i){this.getRedmineApiKey(function(r){t.key=r,e+="?"+n.param(t),n.ajax({url:e,dataType:"text",global:!1}).done(function(e){i(JSON.parse(e),e)}).fail(function(t,n){throw new Error(401===t.statusCode()?"Redmine API access key is invalid.":"Cannot load URL "+e+" from Redmine API. "+n)})})},this.getWithCache=function(i,r,a){var s="rma:cache:"+t(i+"?"+n.param(r)),o=e.get(s);o&&a(JSON.parse(o)),this.get(i,r,function(t,n){o!=n&&(e.set(s,n,1),a(t))})},this.getIssuesWithCache=function(e,t){this.getWithCache("/issues.json",e,t)},this.getProject=function(e,t){this.getWithCache("/projects/"+e+".json",{},t)},this.getAttachment=function(e,t){this.get("/attachments/"+e+".json",{},t)}}}),define("lib/page_property_miner",["lib/redmine_api"],function(e){return{projectId:null,issueId:null,userId:null,lang:null,matchPage:function(e,t){var n=document.body.classList;if(n)return n.contains("controller-"+e)&&n.contains("action-"+t);var i=$("body");return i.hasClass("controller-"+e)&&i.hasClass("action-"+t)},getProjectName:function(){for(var e=document.body.className.split(/\s+/),t=0;t<e.length;t++){var n=e[t];if(0===n.indexOf("project-"))return n.substr(8)}return!1},getTopProjectName:function(){var e=$("#header").find("h1 .root");if(e.size()){var t=e.attr("href");return t.split("/")[2].split("?")[0]}return this.getProjectName()},getProjectId:function(t){if(null===this.projectId)if(this.matchPage("issues","show"))this.projectId=$('#issue_project_id option[selected="selected"]').val(),t(this.projectId);else{var n=new e,i=this;n.getProject(this.getProjectName(),function(e){i.projectId=e.project.id,t(i.projectId)})}else t(this.projectId)},getIssueId:function(){if(null===this.issueId){if(this.matchPage("issues","show"))$("h2").eq(0).text().match(/^.+\#([0-9]+)/)&&(this.issueId=/^.+\#([0-9]+)/.exec($("h2").eq(0).text()).pop());else if(this.matchPage("timelog","new")){var e=$("#issue_id");e.length&&(this.issueId=e.val())}console&&console.log("issue id recognized: "+this.issueId)}return this.issueId},getUserId:function(){return null===this.userId&&(this.userId=/users\/([0-9]+)$/.exec($("#loggedas a").attr("href")).pop(),console&&console.log("user id recognized: "+this.userId)),this.userId},debug:function(){this.getProjectId(function(e){console&&console.log("Project ID recognized: "+e)}),this.getIssueId(),this.getUserId()}}}),define("module/remove_issue_type_from_title",["lib/page_property_miner"],function(e){return{init:function(){e.matchPage("issues","show")&&(document.title=document.title.replace(/^([^#]*)/,""))}}}),define("module/high_res_gravatars",{init:function(){void 0!==window.devicePixelRatio&&2===window.devicePixelRatio&&$(".gravatar").each(function(){var e=this;e.src=e.src.replace(/size=([0-9]*)/,function(t,n){return e.width=n,e.height=n,"size="+2*n})})}}),define("module/better_sidebar",["lib/local_storage"],function(e){var t;return{init:function(){this.getSidebar().children().length>0&&(e.get("sidebarHidden")&&this.hideSidebar(),this.getSidebar().before('<div class="toggleSidebar"><div class="border"></div><div class="text">&times;</div></div>'),this.setListeners())},setListeners:function(){var e=this;$(".toggleSidebar").click(function(){e.toggleSidebar()})},toggleSidebar:function(){this.getSidebar().is(":visible")?(this.hideSidebar(),e.set("sidebarHidden",!0)):(this.showSidebar(),e.remove("sidebarHidden"))},showSidebar:function(){this.getSidebar().show(),$(".toggleSidebar .text").html("&times;"),$("#main").removeClass("nosidebar")},hideSidebar:function(){this.getSidebar().hide(),$(".toggleSidebar .text").html("&larr;"),$("#main").addClass("nosidebar")},getSidebar:function(){return t||(t=$("#sidebar")),t}}}),define("vendor/keymaster",["require","exports","module"],function(e,t,n){!function(e){function t(e,t){for(var n=e.length;n--;)if(e[n]===t)return n;return-1}function i(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function r(e){for(b in M)M[b]=e[Y[b]]}function a(e){var n,i,a,s,o,l;if(n=e.keyCode,-1==t(S,n)&&S.push(n),(93==n||224==n)&&(n=91),n in M){M[n]=!0;for(a in k)k[a]==n&&(u[a]=!0)}else if(r(e),u.filter.call(this,e)&&n in w)for(l=m(),s=0;s<w[n].length;s++)if(i=w[n][s],i.scope==l||"all"==i.scope){o=i.mods.length>0;for(a in M)(!M[a]&&t(i.mods,+a)>-1||M[a]&&-1==t(i.mods,+a))&&(o=!1);(0!=i.mods.length||M[16]||M[18]||M[17]||M[91])&&!o||i.method(e,i)===!1&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0))}}function s(e){var n,i=e.keyCode,r=t(S,i);if(r>=0&&S.splice(r,1),(93==i||224==i)&&(i=91),i in M){M[i]=!1;for(n in k)k[n]==i&&(u[n]=!1)}}function o(){for(b in M)M[b]=!1;for(b in k)u[b]=!1}function u(e,t,n){var i,r;i=_(e),void 0===n&&(n=t,t="all");for(var a=0;a<i.length;a++)r=[],e=i[a].split("+"),e.length>1&&(r=g(e),e=[e[e.length-1]]),e=e[0],e=T(e),e in w||(w[e]=[]),w[e].push({shortcut:i[a],scope:t,method:n,key:i[a],mods:r})}function l(e,t){var n,r,a,s,o,u=[];for(n=_(e),s=0;s<n.length;s++){if(r=n[s].split("+"),r.length>1&&(u=g(r)),e=r[r.length-1],e=T(e),void 0===t&&(t=m()),!w[e])return;for(a=0;a<w[e].length;a++)o=w[e][a],o.scope===t&&i(o.mods,u)&&(w[e][a]={})}}function c(e){return"string"==typeof e&&(e=T(e)),-1!=t(S,e)}function d(){return S.slice(0)}function h(e){var t=(e.target||e.srcElement).tagName;return!("INPUT"==t||"SELECT"==t||"TEXTAREA"==t)}function f(e){D=e||"all"}function m(){return D||"all"}function p(e){var t,n,i;for(t in w)for(n=w[t],i=0;i<n.length;)n[i].scope===e?n.splice(i,1):i++}function _(e){var t;return e=e.replace(/\s/g,""),t=e.split(","),""==t[t.length-1]&&(t[t.length-2]+=","),t}function g(e){for(var t=e.slice(0,e.length-1),n=0;n<t.length;n++)t[n]=k[t[n]];return t}function v(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,function(){n(window.event)})}function y(){var t=e.key;return e.key=P,t}var b,w={},M={16:!1,18:!1,17:!1,91:!1},D="all",k={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,command:91},x={backspace:8,tab:9,clear:12,enter:13,"return":13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,"delete":46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},T=function(e){return x[e]||e.toUpperCase().charCodeAt(0)},S=[];for(b=1;20>b;b++)x["f"+b]=111+b;var Y={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};for(b in k)u[b]=!1;v(document,"keydown",function(e){a(e)}),v(document,"keyup",s),v(window,"focus",o);var P=e.key;e.key=u,e.key.setScope=f,e.key.getScope=m,e.key.deleteScope=p,e.key.filter=h,e.key.isPressed=c,e.key.getPressedKeyCodes=d,e.key.noConflict=y,e.key.unbind=l,"undefined"!=typeof n&&(n.exports=u)}(this)}),define("lib/issue_property_miner",["lib/page_property_miner"],function(e){function t(e){if(0===e.length)return null;var t=e.attr("href"),n=t.split("/")[2];return{id:n,name:e.text()}}var n;return function(){if("undefined"!=typeof n)return n;if(!e.matchPage("issues","show"))return n=null,null;for(var i,r,a,s,o=$("h1")[0].childNodes,u=o[o.length-1].textContent.replace(" » ",""),l=$("h1 .root").text(),c=$("h2:eq(0)").text(),d=$("div.issue"),h=d.find("h3").text(),f=d.find("p.author a"),m=d[0].className.split(/\s+/),p=d.find("td.due-date").text(),_=d.find("td.start-date").text(),g=t(d.find("td.assigned-to a")),v=0;v<m.length;v++){var y=m[v];if(0===y.indexOf("tracker-"))i=y.replace("tracker-","");else if(0===y.indexOf("status-"))r=y.replace("status-","");else if(0===y.indexOf("priority-")){var b=y.replace("priority-","");/\d/.test(b)?a=b:s=b}}return n={id:c.substr(c.indexOf("#")+1),title:h,projectName:e.getProjectName(),projectTitle:u,topProjectName:e.getTopProjectName(),topProjectTitle:l,createdBy:t($(f[0])),assignedTo:g,isCreatedByMe:d.hasClass("created-by-me"),isAssignedToMe:d.hasClass("assigned-to-me"),isOverDueDate:d.hasClass("overdue"),trackerId:i,statusId:r,priority:{id:a,type:s},addedAt:f[1].title,actualizedAt:f[2]?f[2].title:null,startDate:_,dueDate:p}}}),define("templates",["vendor/handlebars.runtime"],function(e){e=e["default"];var t=e.template,n=e.templates=e.templates||{};return n.absences=t({1:function(e,t,n,i){var r;return'    <h4 style="margin: 10px 0 0">'+this.escapeExpression((t.monthFromDate||e&&e.monthFromDate||t.helperMissing).call(e,null!=e?e.month:e,{name:"monthFromDate",hash:{},data:i}))+"</h4>\n    <ul>\n"+(null!=(r=t.each.call(e,null!=e?e.persons:e,{name:"each",hash:{},fn:this.program(2,i,0),inverse:this.noop,data:i}))?r:"")+"    </ul>\n"},2:function(e,t,n,i){var r,a;return'            <li style="margin: 0 0;"><b>'+this.escapeExpression((a=null!=(a=t.name||(null!=e?e.name:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"name",hash:{},data:i}):a))+"</b>:\n\n"+(null!=(r=t.each.call(e,null!=e?e.absences:e,{name:"each",hash:{},fn:this.program(3,i,0),inverse:this.noop,data:i}))?r:"")+"\n            </li>\n"},3:function(e,t,n,i){var r;return"                    "+(null!=(r=t["if"].call(e,null!=e?e.actual:e,{name:"if",hash:{},fn:this.program(4,i,0),inverse:this.noop,data:i}))?r:"")+"\n\n"+(null!=(r=(t.is||e&&e.is||t.helperMissing).call(e,null!=e?e.from:e,null!=e?e.to:e,{name:"is",hash:{},fn:this.program(6,i,0),inverse:this.program(8,i,0),data:i}))?r:"")+"\n                    "+(null!=(r=t["if"].call(e,null!=e?e.actual:e,{name:"if",hash:{},fn:this.program(10,i,0),inverse:this.noop,data:i}))?r:"")+(null!=(r=t["if"].call(e,null!=e?e.type:e,{name:"if",hash:{},fn:this.program(12,i,0),inverse:this.noop,data:i}))?r:"")+(null!=(r=t.unless.call(e,i&&i.last,{name:"unless",hash:{},fn:this.program(21,i,0),inverse:this.noop,data:i}))?r:"")+"\n"},4:function(){return'<span style="color:red">'},6:function(e,t,n,i){return"                        "+this.escapeExpression((t.dayFromDate||e&&e.dayFromDate||t.helperMissing).call(e,null!=e?e.from:e,{name:"dayFromDate",hash:{},data:i}))+".\n"},8:function(e,t,n,i){var r=t.helperMissing,a=this.escapeExpression;return"                        "+a((t.dayFromDate||e&&e.dayFromDate||r).call(e,null!=e?e.from:e,{name:"dayFromDate",hash:{},data:i}))+".–"+a((t.dayFromDate||e&&e.dayFromDate||r).call(e,null!=e?e.to:e,{name:"dayFromDate",hash:{},data:i}))+".\n"},10:function(){return"</span>"},12:function(e,t,n,i){var r;return null!=(r=(t.is||e&&e.is||t.helperMissing).call(e,null!=e?e.type:e,"-",{name:"is",hash:{},fn:this.program(13,i,0),inverse:this.program(15,i,0),data:i}))?r:""},13:function(){return""},15:function(e,t,n,i){var r;return null!=(r=(t.is||e&&e.is||t.helperMissing).call(e,null!=e?e.type:e,"/",{name:"is",hash:{},fn:this.program(13,i,0),inverse:this.program(16,i,0),data:i}))?r:""},16:function(e,t,n,i){var r;return null!=(r=(t.is||e&&e.is||t.helperMissing).call(e,null!=e?e.type:e,"?",{name:"is",hash:{},fn:this.program(17,i,0),inverse:this.program(19,i,0),data:i}))?r:""},17:function(e,t,n,i){return"("+this.escapeExpression((t._||e&&e._||t.helperMissing).call(e,"maybe",{name:"_",hash:{},data:i}))+")"},19:function(e,t,n,i){return"("+this.escapeExpression((t.trim||e&&e.trim||t.helperMissing).call(e,null!=e?e.type:e,{name:"trim",hash:{},data:i}))+")"},21:function(){return", "},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,a,s=t.helperMissing,o=this.escapeExpression;return'<h3 style="margin-top: 30px">'+o((t._||e&&e._||s).call(e,"Planned absences",{name:"_",hash:{},data:i}))+' (<a href="#" class="refresh">'+o((t._||e&&e._||s).call(e,"refresh",{name:"_",hash:{},data:i}))+"</a>)</h3>\n\n"+(null!=(r=t.each.call(e,null!=e?e.months:e,{name:"each",hash:{},fn:this.program(1,i,0),inverse:this.noop,data:i}))?r:"")+'\n<p><a href="'+o((a=null!=(a=t.detailsUri||(null!=e?e.detailsUri:e))?a:s,"function"==typeof a?a.call(e,{name:"detailsUri",hash:{},data:i}):a))+'">'+o((t._||e&&e._||s).call(e,"Show details",{name:"_",hash:{},data:i}))+"</a></p>"},useData:!0}),n.issue_tree_header=t({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r=t.helperMissing,a=this.escapeExpression;return"<thead>\n    <tr>\n        <th>"+a((t._||e&&e._||r).call(e,"Subject",{name:"_",hash:{},data:i}))+"</th>\n        <th>"+a((t._||e&&e._||r).call(e,"Status",{name:"_",hash:{},data:i}))+"</th>\n        <th>"+a((t._||e&&e._||r).call(e,"Assignee",{name:"_",hash:{},data:i}))+"</th>\n        <th>"+a((t._||e&&e._||r).call(e,"Done",{name:"_",hash:{},data:i}))+"</th>\n    </tr>\n</thead>"
},useData:!0}),n.issues=t({1:function(e,t,n,i,r,a){var s,o=t.helperMissing,u=this.escapeExpression;return'<table class="list issues">\n    <thead>\n    <tr>\n        <th>#</th>\n        '+(null!=(s=t["if"].call(e,null!=e?e.withProject:e,{name:"if",hash:{},fn:this.program(2,i,0,r,a),inverse:this.noop,data:i}))?s:"")+"\n        "+(null!=(s=t["if"].call(e,null!=e?e.withAssigned:e,{name:"if",hash:{},fn:this.program(4,i,0,r,a),inverse:this.noop,data:i}))?s:"")+"\n        <th>"+u((t._||e&&e._||o).call(e,"Status",{name:"_",hash:{},data:i}))+"</th>\n        <th>"+u((t._||e&&e._||o).call(e,"Subject",{name:"_",hash:{},data:i}))+"</th>\n        <th>"+u((t._||e&&e._||o).call(e,"Updated on",{name:"_",hash:{},data:i}))+"</th>\n        <th>"+u((t._||e&&e._||o).call(e,"Due date",{name:"_",hash:{},data:i}))+"</th>\n    </tr>\n    </thead>\n    <tbody>\n"+(null!=(s=t.each.call(e,null!=e?e.issues:e,{name:"each",hash:{},fn:this.program(6,i,0,r,a),inverse:this.noop,data:i}))?s:"")+"    </tbody>\n</table>\n"},2:function(e,t,n,i){return"<th>"+this.escapeExpression((t._||e&&e._||t.helperMissing).call(e,"Project",{name:"_",hash:{},data:i}))+"</th>"},4:function(e,t,n,i){return"<th>"+this.escapeExpression((t._||e&&e._||t.helperMissing).call(e,"Assigned to",{name:"_",hash:{},data:i}))+"</th>"},6:function(e,t,n,i,r,a){var s,o,u=t.helperMissing,l=this.lambda,c=this.escapeExpression,d="function";return'        <tr class="issue '+(null!=(s=(t.isEven||e&&e.isEven||u).call(e,i&&i.index,{name:"isEven",hash:{},fn:this.program(7,i,0,r,a),inverse:this.program(9,i,0,r,a),data:i}))?s:"")+" priority-"+c(l(null!=(s=null!=e?e.priority:e)?s.id:s,e))+'">\n            <td class="id"><a href="/issues/'+c((o=null!=(o=t.id||(null!=e?e.id:e))?o:u,typeof o===d?o.call(e,{name:"id",hash:{},data:i}):o))+'">'+c((o=null!=(o=t.id||(null!=e?e.id:e))?o:u,typeof o===d?o.call(e,{name:"id",hash:{},data:i}):o))+"</a></td>\n            "+(null!=(s=t["if"].call(e,null!=a[1]?a[1].withProject:a[1],{name:"if",hash:{},fn:this.program(11,i,0,r,a),inverse:this.noop,data:i}))?s:"")+"\n            "+(null!=(s=t["if"].call(e,null!=a[1]?a[1].withAssigned:a[1],{name:"if",hash:{},fn:this.program(13,i,0,r,a),inverse:this.noop,data:i}))?s:"")+'\n            <td class="status" title="'+c(l(null!=(s=null!=e?e.status:e)?s.name:s,e))+'">'+c(l(null!=(s=null!=e?e.status:e)?s.name:s,e))+'</td>\n            <td class="subject"><a href="/issues/'+c((o=null!=(o=t.id||(null!=e?e.id:e))?o:u,typeof o===d?o.call(e,{name:"id",hash:{},data:i}):o))+'">'+c((o=null!=(o=t.subject||(null!=e?e.subject:e))?o:u,typeof o===d?o.call(e,{name:"subject",hash:{},data:i}):o))+'</a></td>\n            <td class="updated_on">'+c((t.redmineTime||e&&e.redmineTime||u).call(e,null!=e?e.updated_on:e,{name:"redmineTime",hash:{},data:i}))+'</td>\n            <td class="due_date">'+c((o=null!=(o=t.due_date||(null!=e?e.due_date:e))?o:u,typeof o===d?o.call(e,{name:"due_date",hash:{},data:i}):o))+"</td>\n        </tr>\n"},7:function(){return"even"},9:function(){return"odd"},11:function(e){var t,n=this.lambda,i=this.escapeExpression;return'<td class="project"><a href="/projects/'+i(n(null!=(t=null!=e?e.project:e)?t.id:t,e))+'">'+i(n(null!=(t=null!=e?e.project:e)?t.name:t,e))+"</a></td>"},13:function(e){var t;return'<td class="assigned_to">'+this.escapeExpression(this.lambda(null!=(t=null!=e?e.assigned_to:e)?t.name:t,e))+"</td>"},15:function(e,t,n,i){return this.escapeExpression((t._||e&&e._||t.helperMissing).call(e,"No issues",{name:"_",hash:{},data:i}))+"\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i,r,a){var s;return null!=(s=(t.isNotEmpty||e&&e.isNotEmpty||t.helperMissing).call(e,null!=e?e.issues:e,{name:"isNotEmpty",hash:{},fn:this.program(1,i,0,r,a),inverse:this.program(15,i,0,r,a),data:i}))?s:""},useData:!0,useDepths:!0}),n.issues_project=t({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r=t.helperMissing,a=this.escapeExpression;return'<div class="box issues" id="my-issues">\n    <h3>'+a((t._||e&&e._||r).call(e,"My issues",{name:"_",hash:{},data:i}))+' <span class="count"></span></h3>\n    <a href="#" class="select-random" style="display: none;">'+a((t._||e&&e._||r).call(e,"select random",{name:"_",hash:{},data:i}))+'</a>\n    <div class="content"></div>\n</div>\n\n<div class="box issues"  id="due-date-issues">\n    <h3>'+a((t._||e&&e._||r).call(e,"Overdue issues",{name:"_",hash:{},data:i}))+'</h3>\n    <div class="content"></div>\n</div>'},useData:!0}),n.issues_welcome=t({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r=t.helperMissing,a=this.escapeExpression;return'<div class="box issues" id="my-issues">\n    <h3>'+a((t._||e&&e._||r).call(e,"My issues",{name:"_",hash:{},data:i}))+' <span class="count"></span></h3>\n    <a href="#" class="select-random" style="display: none;">'+a((t._||e&&e._||r).call(e,"select random",{name:"_",hash:{},data:i}))+'</a>\n    <div class="content"></div>\n    <a href="/issues?assigned_to_id=me&amp;set_filter=1&amp;sort=priority%3Adesc%2Cupdated_on%3Adesc">'+a((t._||e&&e._||r).call(e,"show all",{name:"_",hash:{},data:i}))+"</a>\n</div>"},useData:!0}),n.last_issue=t({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,a=t.helperMissing,s=this.escapeExpression,o="function";return"<h3>"+s((t._||e&&e._||a).call(e,"Last viewed issue",{name:"_",hash:{},data:i}))+'</h3>\n<p><a href="/issues/'+s((r=null!=(r=t.id||(null!=e?e.id:e))?r:a,typeof r===o?r.call(e,{name:"id",hash:{},data:i}):r))+'">#'+s((r=null!=(r=t.id||(null!=e?e.id:e))?r:a,typeof r===o?r.call(e,{name:"id",hash:{},data:i}):r))+" – "+s((r=null!=(r=t.projectTitle||(null!=e?e.projectTitle:e))?r:a,typeof r===o?r.call(e,{name:"projectTitle",hash:{},data:i}):r))+": "+s((r=null!=(r=t.title||(null!=e?e.title:e))?r:a,typeof r===o?r.call(e,{name:"title",hash:{},data:i}):r))+"</a></p>"},useData:!0}),n.make_money=t({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){return'<div id="makeMoney" style="float: right">\n    <a href="/projects/chci-praci/issues/new?issue[assigned_to_id]=79&issue[priority_id]=5">'+this.escapeExpression((t._||e&&e._||t.helperMissing).call(e,"I wanna work!",{name:"_",hash:{},data:i}))+"</a>\n</div>"},useData:!0}),n.not_available_user=t({1:function(e,t,n,i){return this.escapeExpression((t._||e&&e._||t.helperMissing).call(e,"Not available %0",null!=e?e.from:e,{name:"_",hash:{},data:i}))},3:function(e,t,n,i){return this.escapeExpression((t._||e&&e._||t.helperMissing).call(e,"Not available from %0 to %1",null!=e?e.from:e,null!=e?e.to:e,{name:"_",hash:{},data:i}))},5:function(e,t,n,i){var r;return": "+this.escapeExpression((r=null!=(r=t.type||(null!=e?e.type:e))?r:t.helperMissing,"function"==typeof r?r.call(e,{name:"type",hash:{},data:i}):r))},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r;return' <span class="glyphicon glyphicon-warning-sign" style="color: #d9534f;padding-right:3px;" title="'+(null!=(r=(t.is||e&&e.is||t.helperMissing).call(e,null!=e?e.from:e,null!=e?e.to:e,{name:"is",hash:{},fn:this.program(1,i,0),inverse:this.program(3,i,0),data:i}))?r:"")+(null!=(r=t["if"].call(e,null!=e?e.type:e,{name:"if",hash:{},fn:this.program(5,i,0),inverse:this.noop,data:i}))?r:"")+'"></span>'},useData:!0}),n.open_timey=t({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){return'<div id="enterTimey" style="float: right">\n    <a href="https://timey.proofreason.com" target="_blank">'+this.escapeExpression((t._||e&&e._||t.helperMissing).call(e,"Open Timey",{name:"_",hash:{},data:i}))+"</a>\n</div>"},useData:!0}),n.relations_header=t({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r=t.helperMissing,a=this.escapeExpression;return"<thead>\n<tr>\n    <th>"+a((t._||e&&e._||r).call(e,"Subject",{name:"_",hash:{},data:i}))+"</th>\n    <th>"+a((t._||e&&e._||r).call(e,"Status",{name:"_",hash:{},data:i}))+"</th>\n    <th>"+a((t._||e&&e._||r).call(e,"Assignee",{name:"_",hash:{},data:i}))+"</th>\n    <th>"+a((t._||e&&e._||r).call(e,"Due date",{name:"_",hash:{},data:i}))+"</th>\n    <th></th>\n</tr>\n</thead>"},useData:!0}),n.timey_logger=t({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r;return'<div class="timeyLoggerWrapper">\n    <span class="close"><span class="glyphicon glyphicon-remove"></span></span>\n    <iframe style="border:0; width: 100%; height: 220px" src="'+this.escapeExpression((r=null!=(r=t.url||(null!=e?e.url:e))?r:t.helperMissing,"function"==typeof r?r.call(e,{name:"url",hash:{},data:i}):r))+'"></iframe>\n</div>'},useData:!0}),n}),define("module/last_issue",["lib/page_property_miner","lib/issue_property_miner","lib/local_storage","templates"],function(e,t,n,i){return{init:function(){var r=t();if(r){var a=JSON.stringify({id:r.id,projectTitle:r.projectTitle,title:r.title});n.set("last_issue",a,168),n.set("last_issue["+r.projectName+"]",a,168)}var s,o;e.matchPage("welcome","index")?(s=n.get("last_issue"),s&&(o=i.last_issue(JSON.parse(s)),$("#content .splitcontentright").prepend(o))):e.matchPage("projects","show")&&(s=n.get("last_issue["+e.getProjectName()+"]"),s&&(o=i.last_issue(JSON.parse(s)),$("#content .splitcontentright").prepend(o)))},getLastIssue:function(){var t,i=e.getProjectName();return t=n.get(i?"last_issue["+i+"]":"last_issue"),t?JSON.parse(t):void 0}}}),define("lib/textarea_insert_at_cursor",[],function(){return function(e,t){if(document.selection){e.focus();var n=document.selection.createRange();n.text=t}else if(e.selectionStart||"0"==e.selectionStart){var i=e.selectionStart,r=e.selectionEnd,a=e.value;i>1&&"\n"!=a.substring(i-1,i)&&(t="\n"+t),e.value=a.substring(0,i)+t+a.substring(r,a.length),e.selectionStart=e.selectionEnd=i+t.length}else e.value+=t}}),define("module/key_shortcuts",["lib/page_property_miner","vendor/keymaster","lib/local_storage","module/last_issue","lib/textarea_insert_at_cursor"],function(e,t,n,i,r){return{init:function(){function a(e){window.location.href=e}function s(e){var t=e.attr("href");return t?(a(t),!1):!0}function o(e){return s(l.find("."+e))}var u=$("#q");if(!n.get("enabled:keyShortcuts"))return void($(window).width()>640&&!e.matchPage("issues","show")&&!this.isTouchDevice()&&u.focus());var l=$("#main-menu");if(u.keypress(function(e){return 27===e.keyCode?($(this).blur(),!1):void 0}),t("g",function(){return t.setScope("go"),setTimeout(function(){t.setScope("all")},1e3),!1}),t("p","go",function(){return a("/projects"),!1}),t("h","go",function(){return a("/"),!1}),t("o","go",function(){return o("overview")}),t("i","go",function(){return o("issues")}),t("w","go",function(){return o("wiki")}),t("n","go",function(){return o("new-issue")}),t("a","go",function(){return o("activity")}),t("l","go",function(){var e=i.getLastIssue();return e?(a("/issues/"+e.id),!1):!0}),t("s",function(){return u.focus(),!1}),t("p",function(){return $("#s2id_project_quick_jump_box").select2("open"),!1}),e.matchPage("issues","show")){t("e",function(){return $(".updateButton:eq(0)").click(),!1}),t("esc",function(){return $("#update").hide(),!1});var c=$("#issue_notes");c.keypress(function(e){return 27===e.keyCode?($("#update").hide(),c.blur(),!1):void 0}),t("left",function(){var e=$("#content .next-prev-links *").slice(0,1);return e.is("a")?s(e):!1}),t("right",function(){var e=$("#content .next-prev-links *").slice(-1);return e.is("a")?s(e):!1}),t("r",function(){var e=window.getSelection().toString();return e?(e=e.split("\n").join("\n> "),$(".updateButton:eq(0)").click(),r(document.getElementById("issue_notes"),"> "+e+"\n\n"),!1):void 0})}else e.matchPage("issues","index")&&(t("left",function(){return s($("ul.pagination .prev"))}),t("right",function(){return s($("ul.pagination .next"))}))},isTouchDevice:function(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch}}}),define("module/timey_integration",["lib/page_property_miner","templates"],function(e,t){return{init:function(){if($(t.open_timey()).insertBefore("#loggedas"),e.matchPage("timelog","new"))this.insertTimeyLogger();else if(e.matchPage("timelog","index"))$("#context-menu").remove(),$("td.buttons").hide();else if(e.matchPage("issues","show")){var n=this;$("#main > #content > .contextual .icon-time-add").click(function(){return $(".timeyLoggerWrapper").length||n.insertTimeyLogger(),!1})}},insertTimeyLogger:function(){var n=this;e.getProjectId(function(i){var r=e.getIssueId(),a="https://timey.proofreason.com/";i>0&&(a=a+"?redmine[project_id]="+i,r>0&&(a=a+"&redmine[issue_id]="+r)),a+="#/logs/new";var s=t.timey_logger({url:a});e.matchPage("timelog","new")?$("#new_time_entry").after(s).hide():e.matchPage("issues","show")&&($("body").append(s),$(".timeyLoggerWrapper .close").click(function(){n.removeTimeyLogger()}))})},removeTimeyLogger:function(){$(".timeyLoggerWrapper").remove()}}}),define("module/related_issues_header",["lib/page_property_miner","templates"],function(e,t){return{init:function(){function n(){a.length&&0===a.find("thead").length&&a.prepend(t.issue_tree_header()),s.length&&0===s.find("thead").length&&s.prepend(t.relations_header())}if(e.matchPage("issues","show")){var i=$("#content .issue"),r=i.find("#relations"),a=i.find("#issue_tree table.list.issues"),s=r.find("table.list.issues");n()}}}}),define("lib/replace_issue_form_proxy",[],function(){var e=replaceIssueFormWith,t=[];return replaceIssueFormWith=function(){console.log("replaceIssueFormWith proxy called");for(var n=e.apply(this,arguments),i=0;i<t.length;i++)t[i]();return n},function(e){t.push(e)}}),define("module/absences",["lib/page_property_miner","lib/local_storage","templates","vendor/moment","lib/replace_issue_form_proxy"],function(e,t,n,i,r){return{absencesInfoUrl:null,htmlOutput:null,czechMonths:{Leden:1,"Únor":2,"Březen":3,Duben:4,"Květen":5,"Červen":6,"Červenec":7,Srpen:8,"Září":9,"Říjen":10,Listopad:11,Prosinec:12},init:function(){var t=this;this.absencesInfoUrl="localhost"==window.location.hostname?"holidays.html":"/projects/pm/wiki/Holidays",e.matchPage("welcome","index")?$("div.projects.box").after('<div id="plannedAbsences"></div>'):e.matchPage("issues","index")?$("#sidebar").append('<div id="plannedAbsences"></div>'):(e.matchPage("issues","show")||e.matchPage("issues","new"))&&this.loadWithCache(function(e){t.markAbsencedUsers(e)}),$("#plannedAbsences").length&&this.loadWithCache(function(e){var n=t.createHtml(e);t.putHtmlIntoDocument(n)})},fixDate:function(e){var t=e.split("-");return 2!==t[1].length&&parseInt(t[1])<10&&(t[1]="0"+t[1]),2!==t[2].length&&parseInt(t[2])<10&&(t[2]="0"+t[2]),t.join("-")},removeOldAndMarkActual:function(e){var t={},n=new Date,i=this.fixDate(n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate());for(var r in e)for(var a=0;a<e[r].length;a++){var s=e[r][a],o=this.fixDate(s.from),u=this.fixDate(s.to);i>u||(s.actual=i>=o,r in t||(t[r]=[]),t[r].push(s))}return t},markAbsencedUsers:function(e){function t(t){if(t in e)for(var n=0;n<e[t].length;n++){var i=e[t][n];if(i.actual)return i}return!1}function a(){$("#issue_assigned_to_id option").each(function(){var e=$(this),n=e.text(),i=t(n);i&&e.text(e.text()+" ⚠")})}var s=this;e=this.removeOldAndMarkActual(e),a(),r(a),$(".user").each(function(){var e=$(this),r=e.text(),a=t(r);a&&e.after(n.not_available_user({from:i(s.fixDate(a.from)).format("D. MMMM"),to:i(s.fixDate(a.to)).format("D. MMMM"),type:a.type&&"-"!==a.type?a.type:null}))})},createHtml:function(e){e=this.removeOldAndMarkActual(e);var t={};for(var n in e)for(var i=0;i<e[n].length;i++){var r=e[n][i].from.split("-"),a=r[0]+"-"+r[1];a in t||(t[a]={}),n in t[a]||(t[a][n]=[]),t[a][n].push(e[n][i])}var s=[];for(a in t){var o={month:a,persons:[]};for(var u in t[a])o.persons.push({name:u,absences:t[a][u]});o.persons.sort(function(e,t){return e.name.split(" ")[1].localeCompare(t.name.split(" ")[1])}),s.push(o)}return s.sort(function(e,t){return e.month>t.month?1:e.month<t.month?-1:0}),s},putHtmlIntoDocument:function(e){$("#plannedAbsences").html(n.absences({detailsUri:this.absencesInfoUrl,months:e}));var t=this;$("#plannedAbsences .refresh").click(function(){return $("#ajax-indicator").show(),t.load(function(e){$("#ajax-indicator").hide();var n=t.createHtml(e);t.putHtmlIntoDocument(n)}),!1})},getAbsencesForTable:function(e,t){for(var n=e.querySelectorAll("tr"),i=n[0].querySelector("td strong").textContent,r=i.split(" ")[1]+"-"+this.czechMonths[i.split(" ")[0]]+"-",a=2;a<n.length;a++){var s,o=n[a].querySelectorAll("td"),u=o[0].textContent;u in t?s=t[u]:(t[u]=[],s=t[u]);for(var l=1,c=1;c<o.length;c++){var d,h=o[c],f=h.textContent;f!==l+"."?(d&&d.type!==f&&(d.to=this.fixDate(r+(l-1)),s.push(d),d=null),d||(d={from:this.fixDate(r+l),to:-1,type:f})):d&&(d.to=this.fixDate(r+(l-1)),s.push(d),d=null),h.colSpan?l+=h.colSpan:l++}d&&(d.to=this.fixDate(r+(l-1)),s.push(d),d=null)}},loadAbsencesData:function(e){var t=this;$.ajax({url:this.absencesInfoUrl,global:!1,cache:!1}).success(function(n){var i={},r=document.createElement("div");r.innerHTML=n;for(var a=r.querySelectorAll("table"),s=0;s<a.length;s++)t.getAbsencesForTable(a[s],i);e(i)})},loadWithCache:function(e){if(t.get("absencesObject")){var n=JSON.parse(t.get("absencesObject"));e(n)}else this.load(e)},load:function(e){this.loadAbsencesData(function(n){t.set("absencesObject",JSON.stringify(n),24),e(n)})}}}),define("module/assign_select_author",["lib/page_property_miner","lib/issue_property_miner","lib/translate","lib/replace_issue_form_proxy"],function(e,t,n,i){return{init:function(){function r(){$("#issue_assigned_to_id").find('option[value="'+t().createdBy.id+'"]').each(function(){$(this).text($(this).text()+" ("+n("author")+")")})}e.matchPage("issues","show")&&(t().isCreatedByMe||(r(),i(r)))}}}),define("module/datepicker_focus",[],function(){$("body").on("focus",".hasDatepicker",function(){$(this).datepicker("show")})}),define("module/better_header",[],function(){return{init:function(){$("#header h1").prepend('<a class="go-to-my-issues" href="/issues?query_id=135" title="My issues"></a><a class="go-to-projects" href="/projects" title="Projects"></a>')}}}),define("module/alternate_cell_format",["lib/page_property_miner","lib/local_storage","vendor/moment"],function(e,t,n){function i(e){return"alternateCellFormat:"+e.split(" ").join("").split(".").join("_")}var r=!1;return{init:function(){$("#issue_tree").find("table.issues tr").each(function(){$(this).find("td:eq(2)").addClass("status")}),this.setFormatUp("table.issues .due_date",{verbalDate:this.format.verbalDate}),this.setFormatUp("table.issues .updated_on",{relativeTime:this.format.relativeTime,relativeTimeMoment:this.format.relativeTimeMoment}),this.setFormatUp("table.issues td.status",{newHighlighted:this.format.newIssuesHighlighted,statusIcon:this.format.statusIcon}),this.setFormatUp("table.issues .tracker",{shortIssueType:this.format.shortIssueType}),r=!0},setFormatUp:function(e,n){var a=t.get(i(e));if(this.prepareCells(e,n,a),!r){var s=this;$("#content").on("click",e,function(){s.toggleFormats(e)})}},prepareCells:function(e,t,n){$(e).each(function(){var e=$(this);if(!e.data("currentlyDisplayed")){var i=e.text();e.data("format.originalFormat",i),e.attr("title",i);for(var r in t){var a=t[r];e.data("format."+r,a(i))}n&&"originalFormat"!==n?(e.data("currentlyDisplayed",n),e.html(e.data("format."+n))):e.data("currentlyDisplayed","originalFormat")}})},showAlternateFormat:function(e,t){$(e).each(function(){$(this).html($(this).data("format."+t)),$(this).data("currentlyDisplayed",t)})},toggleFormats:function(e){var n=$(e).first(),r=n.data(),a=[];for(var s in r)0===s.indexOf("format.")&&a.push(s.substring(7));var o=$.inArray(n.data("currentlyDisplayed"),a),u=o<a.length-1?o+1:0;t.set(i(e),a[u]),this.showAlternateFormat(e,a[u])},format:{statusIcon:function(e){var t={"Nový / New":["inbox"],"Přiřazený / Assigned":["arrow-right"],"Vyřešený / Solved":["ok"],Feedback:["comment"],"Čeká se / Waiting":["refresh"],"Odložený / Postponed":["stop"],"Čeká na klienta":["eye-open"],"Uzavřený / Closed":["home"],"Odmítnutý / Rejected":["ban-circle"],"Needs explanation":["question-sign"],"Needs design":["picture"],Refused:["ban-circle"],"Needs estimation":["time"],"Needs estimation approval":["question-sign"],"Needs implementation":["arrow-right"],"Needs code review":["th-list"],"Needs deployment":["upload"],"Needs review":["eye-open"],Closed:["home"]},n={"Nový / New":["red"],"Přiřazený / Assigned":["green"],"Vyřešený / Solved":["blue"],Feedback:["blue"],"Needs explanation":["blue"],"Needs design":["green"],Refused:["red"],"Needs estimation":["blue"],"Needs implementation":["green"],"Needs code review":["blue"],"Needs deployment":["green"]};if(!(e in t))return e;for(var i="",r=0;r<t[e].length;r++){var a=t[e][r],s=n[e]?n[e][r]:null,o=s?'style="background-color: '+s+'"':"";i+="<span "+o+' class="glyphicon glyphicon-'+a+'"></span>'}return i},newIssuesHighlighted:function(e){return"Nový / New"==e?'<b style="color: red">'+e+"</b>":e},verbalDate:function(e){var t=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];if(e){var i=n(e).toDate(),r=daysFromToday(i),a="";switch(r){case 0:a="Yesterday";break;case 1:a=i.toRelativeTime(new Date,5e3,!0);break;case 2:a="Tomorrow";break;case 3:case 4:case 5:a=t[i.getDay()].substring(0,3)+" "+i.getDate()+". "+(i.getMonth()+1)+".";break;default:a=i.getDate()+". "+(i.getMonth()+1)+"."}return i<new Date?'<b style="color: red">'+i.toRelativeTime(new Date,5e3,!0)+"</b>":a}return""},relativeTime:function(e){if(!e)return"";var t=n(e).toDate();return t.toRelativeTime(new Date,5e3,!0)},relativeTimeMoment:function(e){return e?n(e).fromNow():""},shortIssueType:function(e){var t={request:'<span style="opacity:.4">&fnof;</span>',error:'<img src="/themes/prRedmineTheme/stylesheets/img/error.png" width="16" height="16" style="opacity:.4">',support:'<span class="glyphicon glyphicon-question-sign" style="opacity:.4"></span>',development:'<span class="glyphicon glyphicon-console" style="opacity:.4"></span>'},n={"Požadavek":t.request,"Feature Request":t.request,Error:t.error,"Error (Baufinder)":t.error,Podpora:t.support,Development:t.development};return e in n?n[e]:e}}}}),define("module/issues",["vendor/moment","lib/redmine_api","lib/page_property_miner","templates","lib/local_storage","module/alternate_cell_format","module/better_sidebar"],function(e,t,n,i,r,a,s){function o(t){t.sort(function(t,n){return t.due_date||n.due_date?t.due_date?n.due_date?e(t.due_date).diff(n.due_date):-1:1:e(n.updated_on).diff(t.updated_on)})}function u(e,t){o(e.issues);var n=i.issues({issues:e.issues,withProject:t,withAssigned:!1,count:e.total_count}),r=$("#my-issues"),s=r.find(".select-random");r.find(".content").html(n),r.find(".count").html(e.total_count),0===e.total_count?s.hide():s.show(),s.click(function(){var t=Math.floor(Math.random()*e.issues.length),n=e.issues[t].id,i="/issues/"+n;$(this).attr("href",i)}),a.init()}var l=new t;return{init:function(){r.get("enabled:issues_project")&&(n.matchPage("projects","show")?this.project():n.matchPage("welcome","index")&&this.welcome())},project:function(){var t=n.getProjectName();$("#content .splitcontentright").prepend(i.issues_project()).css("width","70%").css("margin-top","-30px"),$("#content .splitcontentleft").css("width","28%"),s.hideSidebar(),l.getIssuesWithCache({project_id:t,assigned_to_id:"me",sort:"due_date:desc,updated_on:desc",limit:20},function(e){u(e,!1)}),l.getIssuesWithCache({project_id:t,due_date:"<="+e().format("YYYY-MM-DD"),sort:"due_date:desc",limit:20},function(e){o(e.issues);var t=i.issues({issues:e.issues,withProject:!1,withAssigned:!0});$("#due-date-issues .content").html(t),a.init()})},welcome:function(){$("#content .splitcontentright").prepend(i.issues_welcome()).css("width","60%"),$("#content .splitcontentleft").css("width","38%"),l.getIssuesWithCache({assigned_to_id:n.getUserId(),sort:"due_date:desc,updated_on:desc",limit:20},function(e){u(e,!0)})}}}),define("module/localize",["lib/page_property_miner","lib/local_storage","lib/replace_issue_form_proxy"],function(e,t,n){var i=$("html").attr("lang");return{init:function(){if(t.get("enabled:localize")){var i=this;if(e.matchPage("issues","show")){this.localizeElementContent($(".issue .attributes td.status")),this.localizeElementContent($(".issue .attributes td.priority"));var r=function(){i.localizeSelect($("#issue_status_id")),i.localizeSelect($("#issue_priority_id"))};r(),n(r)}}},localizeSelect:function(e){var t=this;e.find("option").each(function(){t.localizeElementContent($(this))})},localizeElementContent:function(e){var t=e.text();t="cs"===i?this.extractCzechVersion(t):this.extractEnglishVersion(t),t&&e.text(t)},extractCzechVersion:function(e){var t=e.split("/");return 2===t.length?t[0].trim():!1},extractEnglishVersion:function(e){var t=e.split("/");return 2===t.length?t[1].trim():!1}}}),define("module/paste_issue_number",["lib/local_storage"],function(e){function t(e){return"#"===e[0]&&(e=e.substr(1)),parseInt(e)==e?e:!1}function n(e){window.location.href="/issues/"+e}return{init:function(){e.get("enabled:pasteIssueNumber")&&($("#q").on("paste",function(e){var i=e.originalEvent.clipboardData.getData("text"),r=t(i);r&&n(r)}),document.addEventListener("paste",function(e){if("INPUT"!==e.target.nodeName&&"TEXTAREA"!==e.target.nodeName&&e.clipboardData.types.indexOf("text/plain")>-1){var i=e.clipboardData.getData("text/plain"),r=t(i);r&&n(r)}}))}}}),define("module/checkbox",["lib/page_property_miner"],function(e){return{init:function(){function t(e,t){var n=document.createElement("input");return n.type="checkbox",n.name="todo",n.checked=t,n.value=e,n.disabled=!s,n}function n(e){for(var i=0;i<e.childNodes.length;i++){var a=e.childNodes[i];if(3===a.nodeType){var s=a.textContent;0===s.indexOf("[ ]")?(a.textContent=s.substring(3),e.insertBefore(t(r++),a)):0===s.indexOf("[]")?(a.textContent=s.substring(2),e.insertBefore(t(r++),a)):0===s.indexOf("[X]")||0===s.indexOf("[x]")?(a.textContent=s.substring(3),e.insertBefore(t(r++,!0),a)):(s.indexOf("[ ]")>0||s.indexOf("[]")>0||s.indexOf("[X]")>0||s.indexOf("[x]")>0)&&r++}else n(a)}}function i(e,t){var n=a.text(),i=1;n=n.replace(/\[[ Xx]?]/g,function(n){return e==i++?t?"[x]":"[ ]":n}),a.text(n),a.data("changed","changed")}if(e.matchPage("issues","show")&&"baufinder"===e.getTopProjectName()){var r=1,a=$("#issue_description"),s=a.size()>0,o=$("#content").find(".issue .wiki");n(o[0]),o.on("change",'[name="todo"]',function(e){var t=e.target.value,n=e.target.checked;i(t,n),$("#issue_description_and_toolbar").show().prev().hide(),0==o.find("#saveCheckbox").length&&(o.css("position","relative"),o.append('<input type="submit" value="Uložit" id="saveCheckbox" style="position: absolute; right: 10px; bottom: 10px;">'))}),o.on("click","#saveCheckbox",function(){return $("#issue-form").submit(),!1})}}}}),define("module/cl_ly",["lib/page_property_miner","lib/local_storage"],function(e,t){return{init:function(){if(e.matchPage("issues","show")&&"baufinder"===e.getTopProjectName()){var n=this;$("#content").find("p > a").each(function(){var e=$(this),i=e.attr("href");if(0===i.indexOf("http://cl.ly/")){var r=t.getJsonCache("clly",i);r?n.processLink(e,r):n.getData(e.attr("href"),function(r){t.setJsonCache("clly",i,r,24),n.processLink(e,r)})}})}},getData:function(e,t){var n={headers:{Accept:"application/json"}};$.ajax("http://acci.cz/proxy/proxy.php?csurl="+e,n).done(function(e){t(e)})},processLink:function(e,t){if("image"===t.item_type){var n=new Image;n.src=t.remote_url,n.title=n.alt=t.name,e.html(n),e.attr("target","_blank"),e.removeClass("external")}}}}),define("module/auto_return_to_owner",["lib/page_property_miner","lib/replace_issue_form_proxy","lib/issue_property_miner","vendor/moment"],function(e,t,n,i){return{init:function(){if(e.matchPage("issues","show")){var r=function(){var e=n().createdBy.id,t=$("select#issue_assigned_to_id");t.val(e),t.prev("label").highlight()},a=function(){var e=$("#issue_custom_field_values_24");e.size()>0&&(e.val(i().format("YYYY-MM-DD")),e.prev("label").highlight())},s=$("#all_attributes"),o=!1;s.on("change","select#issue_assigned_to_id",function(){o=!0}),s.on("change","select#issue_status_id",function(){var e=$(this).val();3==e?o||t(function(){r()}):(17==e||5==e)&&t(function(){a()})})}}}}),define("module/attachments",["lib/page_property_miner","lib/local_storage","lib/redmine_api","lib/translate","lib/textarea_insert_at_cursor"],function(e,t,n,i,r){return{activeEditor:"issue_notes",init:function(){if(e.matchPage("issues","show")||e.matchPage("issues","edit"))$("#issue_description").focus(function(){n.activeEditor="issue_description"}),$("#issue_notes").focus(function(){n.activeEditor="issue_notes"});else{if(!e.matchPage("issues","new"))return;this.activeEditor="issue_description"}var t=uploadBlob,n=this;uploadBlob=function(e,i,r){var a=t.apply(this,arguments);return a.done(function(){n.uploaded(r,e)}),a}},uploaded:function(e,t){this.processAttachment($("#attachments_fields").find("#attachments_"+e),t)},processAttachment:function(e,t){var a=new n,s=e.find("a.remove-upload").attr("href").split("?")[0].split("/")[2].split(".")[0],o=this;a.getAttachment(s,function(n){n=n.attachment,"image"===n.content_type.split("/")[0]&&$('<a href="#">'+i("Add to editor")+"</a>").appendTo(e).click(function(){var e;return-1!==n.content_url.indexOf("%")?(e="!/attachments/download/",e+=n.id,e+="/#",e+=t.name.split(" ").join("%20"),e+="!"):e="!"+n.filename+"!",r(document.getElementById(o.activeEditor),e),!1})})}}}),define("module/issue_update_form",["lib/page_property_miner","lib/local_storage"],function(e,t){return{init:function(){function n(){i.hasClass("minimized")?(i.removeClass("minimized"),t.remove("updateFormMinimized")):(i.addClass("minimized"),t.set("updateFormMinimized",!0))}if(e.matchPage("issues","show")){var i=$("#update");i.find("#issue_subject").closest("fieldset").addClass("issueAttributes"),i.find("#time_entry_hours").closest("fieldset").addClass("timeLogging"),i.find("#issue_notes").closest("fieldset").addClass("issueJournalNotes"),i.find(".timeLogging").closest("fieldset").hide(),$(".icon-edit").filter(function(){return'showAndScrollTo("update", "issue_notes"); return false;'===$(this).attr("onclick")}).addClass("updateButton").attr("onclick",""),$(".updateButton").click(function(e){e.preventDefault(),i.show(),$("#issue_notes").focus(),i.hasClass("minimized")||$("html, body").animate({scrollTop:$("#issue-form").offset().top},100)}),i.prepend('<span class="minimize"><span class="glyphicon glyphicon-minus"></span> <span class="glyphicon glyphicon-plus"></span></span>'),i.find("span.minimize").click(function(){return n(),!1}),t.get("updateFormMinimized")&&i.find("span.minimize").click(),$("#issue-form").contents().filter(function(){return 3===this.nodeType&&"|"===this.textContent.trim()}).remove(),$('<span class="delimiter"> | </span>').insertBefore("#issue-form a:last")}}}}),define("module/single_click_select",["lib/page_property_miner"],function(e){return{init:function(){this.issueId(),this.codeElement()},issueId:function(){e.matchPage("issues","show")&&$("#content h2:eq(0)").click(function(){for(var e=0;e<this.childNodes.length;e++)if(this.childNodes[e]instanceof Text){var t=this.childNodes[e],n=t.nodeValue.indexOf("#"),i=t.nodeValue.length,r=document.createRange();r.setStart(t,n),r.setEnd(t,i),window.getSelection().removeAllRanges(),window.getSelection().addRange(r);break}})},codeElement:function(){var e=null,t=null,n=$("body");n.on("mousedown","code",function(n){e=n.clientX,t=n.clientY}),n.on("mouseup","code",function(n){if(null!==e&&e===n.clientX&&t===n.clientY){var i=this.childNodes[0];if(i.nodeValue){var r=document.createRange();r.setStart(i,0),r.setEnd(i,i.nodeValue.length),window.getSelection().removeAllRanges(),window.getSelection().addRange(r),e=t=null}}})}}}),define("module/clickable_issue_names",["lib/page_property_miner"],function(e){return{init:function(){e.matchPage("issues","show")&&$("table.list.issues td.subject").each(function(){var e=$(this);e.html(e.find("a").html(e.text()))})}}}),define("module/make_money",["lib/page_property_miner","templates","vendor/moment"],function(e,t,n){return{init:function(){if($(t.make_money()).insertBefore("#loggedas"),$("body").hasClass("project-chci-praci")&&e.matchPage("issues","new")){var i=n().add(1,"weeks").startOf("isoWeek").format("D. M.");
$("#issue_subject").val("Příští týden (od "+i+") mám X hodin času");var r=$("#all_attributes");r.find("#issue_subject").closest("p").css("display","block"),r.find("#issue_description_and_toolbar").closest("p").css("display","block"),r.find("#issue_description_and_toolbar textarea").attr("placeholder","Upřesněte případné detaily.")}}}}),define("module/better_timeline",["lib/page_property_miner"],function(e){return{init:function(){if(e.matchPage("issues","show")){var t=$("#history");$(' <a href="#" class="showStatusChanges">(show all issue status changes)</a>').appendTo(t.find("h3")).click(function(){return t.find(".peekable").removeClass("peekable"),$(this).remove(),!1}),t.find(">.journal:not(.has-notes)").addClass("peekable").click(function(){$(this).removeClass("peekable")})}}}}),define("module/autologin",["lib/page_property_miner"],function(e){return{init:function(){e.matchPage("account","login")&&(document.getElementById("flash_error")||"jakub"===document.getElementById("username").value&&document.getElementById("password").value&&document.querySelector("#login-form form").submit())}}}),define("module/cmd_enter_form_submit",[],function(){return{init:function(){$(document).on("keydown","textarea#issue_notes, textarea#issue_description, #issue-form input",function(e){13===e.keyCode&&(e.metaKey||e.ctrlKey)&&(window.onbeforeunload=null,$(this).parents("form").submit(),e.preventDefault())})}}}),require(["vendor/moment"],function(e){var t=$("html").attr("lang");"cs"===t&&e.locale(t)}),require(["template/helper/translate","template/helper/dayFromDate","template/helper/trim","template/helper/is","template/helper/isEven","template/helper/isNotEmpty","template/helper/monthFromDate","template/helper/redmineTime"]),require(["module/remove_issue_type_from_title","module/high_res_gravatars","module/better_sidebar","module/key_shortcuts","module/timey_integration","module/related_issues_header","module/absences","module/assign_select_author","module/datepicker_focus","module/better_header","module/issues","module/last_issue","module/localize","module/alternate_cell_format","module/paste_issue_number","module/checkbox","module/cl_ly","module/auto_return_to_owner","module/attachments","module/issue_update_form","module/single_click_select","module/clickable_issue_names","module/make_money","module/better_timeline","module/autologin","module/cmd_enter_form_submit"],function(){for(var e=0;e<arguments.length;e++)!function(e){e&&e.init&&$(function(){e.init()})}(arguments[e])}),require(["lib/local_storage"],function(e){Math.random()>.9&&(console&&console.log("Deleted expired cached entries in localStorage."),e.removeExpired())});var ProofReasonRedmineTheme={init:function(){this.BetterIssuesContextualMenu.init(),this.ZenMode.init(),this.MobileRedmine.init()},ZenMode:{init:function(){$('<div id="enterZenMode" style="float: right"><a href="#">Zen mode</a></div>').insertBefore("#loggedas"),$('<a id="exitZenMode" href="#">&#9775; Exit zen</a>').appendTo("#main>#content>.contextual"),$("body").on("click","#enterZenMode",function(){return $("body").addClass("zenMode"),!1}),$("body").on("click","#exitZenMode",function(){return $("body").removeClass("zenMode"),!1})}},BetterIssuesContextualMenu:{init:function(){var e=document.getElementById("context-menu");e&&(e.parentNode.removeChild(e),document.body.appendChild(e))}},MobileRedmine:{init:function(){$("body").addClass("mobileRedmine"),$("head").append('<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0">'),$(window).width()<=480&&setTimeout(function(){$("#project_quick_jump_box").select2("destroy")},300),$("#footer .bgr").append('<br><a id="backToDestop" href="javascript:ProofReasonRedmineTheme.MobileRedmine.remove()">Back to desktop mode</a>')},remove:function(){$("#backToDestop").remove(),$("body").removeClass("mobileRedmine"),$('head meta[name="viewport"]').remove(),$("#project_quick_jump_box").select2()}}};$(function(){ProofReasonRedmineTheme.init()}),jQuery.fn.highlight=function(){$(this).each(function(){var e=$(this);if(e.is(":visible")){var t=$("<div/>").width(e.outerWidth()).height(e.outerHeight()).css({position:"absolute",left:e.offset().left,top:e.offset().top,"background-color":"#ffff99",opacity:".7","z-index":"9999999"}).appendTo("body");setTimeout(function(){t.fadeOut(1500).queue(function(){t.remove()})},1e3)}})},Date.prototype.toRelativeTime=function(){var e=function(e){var a=t(e),s=a.now||new Date,o=s-this,u=0>=o;if(o=Math.abs(o),o<=a.nowThreshold)return u?"Right now":"Just now";if(a.smartDays&&6*r>=o)return n(this,s);var l=null;for(var c in i){if(o<i[c])break;l=c,l="hour"==l||"minute"==l||"day"==l?l.substr(0,1):" "+l,o/=i[c]}return o=Math.floor(o),1!==o&&l.length>1&&(l+="s"),[o,l,u?" left":" ago"].join("")},t=function(e){return e||(e=0),"string"==typeof e&&(e=parseInt(e,10)),"number"==typeof e?(isNaN(e)&&(e=0),{nowThreshold:e}):e},n=function(e,t){var n,i=e.getDay(),r=i-t.getDay();return n=0===r?"Today":-1==r?"Yesterday":1==r&&e>t?"Tomorrow":a[i],n+" at "+e.toLocaleTimeString()},i={millisecond:1,second:1e3,minute:60,hour:60,day:24,month:30,year:12},r=i.millisecond*i.second*i.minute*i.hour*i.day,a=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];return e}(),define("main",function(){});
//# sourceMappingURL=theme.js
//# sourceMappingURL=theme.js.map
define.amd = undefined;
